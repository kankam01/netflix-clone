/*! For license information please see main.1fb56103.js.LICENSE.txt */
!function(){"use strict";var e={110:function(e,t,n){var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=h(n,y);try{c(t,y,g)}catch(k){}}}}return t}},746:function(e,t){var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||w(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},309:function(e,t,n){e.exports=n(746)},463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Se=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ie(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Te(){if(xe){var e=xe,t=Se;if(Se=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==Se)&&(Ae(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,St,Et,It=!1,Tt=[],Ct=null,At=null,Nt=null,Pt=new Map,Ot=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){It=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),Pt.forEach(jt),Ot.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==At&&zt(At,e),null!==Nt&&zt(Nt,e),Pt.forEach(t),Ot.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Mt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return Sn}var In=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(In),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Pn),Rn=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ie(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Qn(e){Ur(e,0)}function $n(e){if(H(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&$n(Hn)){var t=[];Gn(t,Hn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Hn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Sr={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Ir=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Ar=Er("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Nr.set(e,t),s(t,[e])}for(var Rr=0;Rr<Pr.length;Rr++){var Dr=Pr[Rr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Ir,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Ir:case Tr:case Cr:s=yn;break;case Ar:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=On;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Oe(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(Kn(u))if(Jn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Wr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Oe(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Oe(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Si(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ii(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Si(Ti),Ai=Si(!1),Ni=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ei(Ai),Ei(Ci)}function Di(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ii(Ci,t),Ii(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ci.current,Ii(Ci,e),Ii(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Ci),Ii(Ci,e)):Ei(Ai),Ii(Ai,n)}var Ui=null,ji=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,Bi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Ki=0,Gi=null,Wi=0,Hi=[],Qi=0,$i=null,Yi=1,Ji="";function Xi(e,t){qi[Ki++]=Wi,qi[Ki++]=Gi,Gi=e,Wi=t}function Zi(e,t,n){Hi[Qi++]=Yi,Hi[Qi++]=Ji,Hi[Qi++]=$i,$i=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Yi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Wi=qi[--Ki],qi[Ki]=null;for(;e===$i;)$i=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,Yi=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Si(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ya.current;Ei(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ia=null;function Ta(e){null===Ia?Ia=[e]:Ia.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&As)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Oi(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Oi(t)?Ni:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case _:return(t=jc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Wa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Wa(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(o,r.mode,s)).return=r,r=a}return u(r);case O:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=$a(!0),Ja=$a(!1),Xa={},Za=Si(Xa),eo=Si(Xa),to=Si(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Ii(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ii(eo,e),Ii(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Oo(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Aa(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=Io();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ko(e,t){return Bo(2048,8,e,t)}function Go(e,t){return Bo(4,2,e,t)}function Wo(e,t){return Bo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Ho.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:Uo,useDebugValue:$o,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Io();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Ns.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){return Xo(To(),mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Oo,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Ws=r),hu(0,t)},n}function vu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Ya(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Ds,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Ds,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ii(Ds,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ii(Ds,Rs),Rs|=r;return wu(e,t,i,n),t.child}function Iu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Oi(n)?Ni:Ci.current;return a=Pi(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Oi(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Pi(t,c=Oi(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ai.current||Na?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Na||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Pi(t,s=Oi(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ai.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Iu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Pu(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ou,Ru,Du,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):ju(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),rc(r,e,i,-1))}return mc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=Yi,Hi[Qi++]=Ji,Hi[Qi++]=$i,Yi=e.id,Ji=e.overflow,$i=t),t=ju(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Dc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Dc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ju(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=ju(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zu(e,n,t);else if(19===e.tag)zu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Oi(t.type)&&Ri(),Hu(t),null;case 3:return r=t.stateNode,io(),Ei(Ai),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ru(e,t),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Du(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ou(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),Ru(e,t),null===e&&Br(t.stateNode.containerInfo),Hu(t),null;case 10:return _a(t.type._context),Hu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Wu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Wu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qs&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Je()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Ii(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $u(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ai),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ou=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(){},Du=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Ju=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Ju||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Ju&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Ju&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Ju=(r=Ju)||null!==n.memoizedState,ds(e,t,n),Ju=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Ec(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Je())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ju=(l=Ju)||f,ms(t,e),Ju=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==p?(p.return=d,Zu=p):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Ju;u=Yu;var c=Ju;if(Yu=o,(Ju=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,Yu=u,Ju=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ju||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ju)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Ju||512&t.flags&&as(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Ss,Es=Math.ceil,Is=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,As=0,Ns=null,Ps=null,Os=0,Rs=0,Ds=Si(0),Ls=0,Ms=null,Fs=0,Us=0,js=0,Vs=null,zs=null,Bs=0,qs=1/0,Ks=null,Gs=!1,Ws=null,Hs=null,Qs=!1,$s=null,Ys=0,Js=0,Xs=null,Zs=-1,ec=0;function tc(){return 0!==(6&As)?Je():-1!==Zs?Zs:Zs=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&As)&&0!==Os?Os&-Os:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Js)throw Js=0,Xs=null,Error(a(185));yt(e,n,r),0!==(2&As)&&e===Ns||(e===Ns&&(0===(2&As)&&(Us|=n),4===Ls&&sc(e,Os)),ic(e,r),1===n&&0===As&&0===(1&t.mode)&&(qs=Je()+500,ji&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Os:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&As)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&As))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Os:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=As;As|=2;var o=vc();for(Ns===e&&Os===t||(Ks=null,qs=Je()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Is.current=o,As=i,null!==Ps?t=0:(Ns=null,Os=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,zs,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,zs,Ks),t);break}_c(e,zs,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,zs,Ks),r);break}_c(e,zs,Ks);break;default:throw Error(a(329))}}}return ic(e,Je()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zs,zs=n,null!==t&&uc(t)),e}function uc(e){null===zs?zs=e:zs.push.apply(zs,e)}function sc(e,t){for(t&=~js,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&As))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,zs,Ks),ic(e,Je()),null}function lc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(qs=Je()+500,ji&&Bi())}}function fc(e){null!==$s&&0===$s.tag&&0===(6&As)&&xc();var t=As;As|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(As=t))&&Bi()}}function hc(){Rs=Ds.current,Ei(Ds)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ps)for(n=Ps.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ei(Ai),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,Ps=e=Dc(e.current,null),Os=Rs=t,Ls=0,Ms=null,js=Us=Fs=0,zs=Vs=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ia=null}return e}function pc(e,t){for(;;){var n=Ps;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,Ps=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Os,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Ps===n&&null!==n&&(Ps=n=n.return);continue}break}}function vc(){var e=Is.current;return Is.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ns||0===(268435455&Fs)&&0===(268435455&Us)||sc(Ns,Os)}function yc(e,t){var n=As;As|=2;var r=vc();for(Ns===e&&Os===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),As=n,Is.current=r,null!==Ps)throw Error(a(261));return Ns=null,Os=0,Ls}function gc(){for(;null!==Ps;)bc(Ps)}function kc(){for(;null!==Ps&&!$e();)bc(Ps)}function bc(e){var t=Ss(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?wc(e):Ps=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Rs)))return void(Ps=n)}else{if(null!==(n=$u(n,t)))return n.flags&=32767,void(Ps=n);if(null===e)return Ls=6,void(Ps=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ps=t);Ps=t=e}while(null!==t);0===Ls&&(Ls=5)}function _c(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==$s);if(0!==(6&As))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(Ps=Ns=null,Os=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=As;As|=4,Ts.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Ye(),As=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,$s=e,Ys=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Ws,Ws=null,e;0!==(1&Ys)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xs?Js++:(Js=0,Xs=e):Js=0,Bi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function xc(){if(null!==$s){var e=bt(Ys),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===$s)var r=!1;else{if(e=$s,$s=null,Ys=0,0!==(6&As))throw Error(a(331));var i=As;for(As|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Ec(s,s.return,_)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(As=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Sc(e,t,n){e=Da(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Da(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Os&n)===n&&(4===Ls||3===Ls&&(130023424&Os)===Os&&500>Je()-Bs?dc(e,0):js|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Aa(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return He(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Pc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case S:u=8,i|=8;break;case E:return(e=Oc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case A:return(e=Oc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Oc(19,n,t,i)).elementType=N,e.lanes=o,e;case R:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:u=10;break e;case T:u=9;break e;case C:u=11;break e;case P:u=14;break e;case O:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Oc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Oc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=zc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Ra(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Ss=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Ii(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ii(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Gu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Pu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Iu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ii(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xu(e,t,r,i=ma(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ku(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),qa(t,r,i),Ga(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Je()),0===(6&As)&&(qs=Je()+500,Bi()))}break;case 13:fc((function(){var t=Aa(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},_t=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Aa(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},St=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ae=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ie,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.s=r.createRoot,r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},459:function(e,t){var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){n(459)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,R(_);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(I),I=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&D(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,E=null,I=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function N(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(S=!1,E=null)}}else S=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=N,x=function(){O.postMessage(null)}}else x=function(){y(N,0)};function R(e){E=e,S||(S=!0,x())}function D(e,n){I=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(I),I=-1):m=!0,D(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)},561:function(e,t,n){var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},248:function(e,t,n){e.exports=n(561)},327:function(e,t,n){e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".0904c1f0.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="netflix:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/netflix-clone/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunknetflix=self.webpackChunknetflix||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return Sa},SDK_VERSION:function(){return Ro},_DEFAULT_ENTRY_NAME:function(){return bo},_addComponent:function(){return So},_addOrOverwriteComponent:function(){return Eo},_apps:function(){return _o},_clearComponents:function(){return Ao},_components:function(){return xo},_getProvider:function(){return To},_registerComponent:function(){return Io},_removeServiceInstance:function(){return Co},deleteApp:function(){return Fo},getApp:function(){return Lo},getApps:function(){return Mo},initializeApp:function(){return Do},onLog:function(){return Vo},registerVersion:function(){return jo},setLogLevel:function(){return zo}});var t=n(791),r=n.t(t,2),i=n(250),a=n(248),o=n(327),u=n(164);var s=function(e){e()},c=function(){return s};function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}function h(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=Symbol.for("react-redux-context"),p="undefined"!==typeof globalThis?globalThis:{};function v(){var e;if(!t.createContext)return{};var n=null!=(e=p[d])?e:p[d]=new Map,r=n.get(t.createContext);return r||(r=t.createContext(null),n.set(t.createContext,r)),r}var m=v();function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;return function(){return(0,t.useContext)(e)}}var g=y(),k=function(){throw new Error("uSES not initialized!")},b=function(e,t){return e===t};function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,n=e===m?g:y(e);return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="function"===typeof r?{equalityFn:r}:r,a=i.equalityFn,o=void 0===a?b:a,u=i.stabilityCheck,s=void 0===u?void 0:u;i.noopCheck;var c=n(),l=c.store,f=c.subscription,d=c.getServerState,p=c.stabilityCheck,v=(c.noopCheck,(0,t.useRef)(!0),(0,t.useCallback)(h({},e.name,(function(t){return e(t)}))[e.name],[e,p,s])),m=k(f.addNestedSub,l.getState,d||l.getState,v,o);return(0,t.useDebugValue)(m),m}}var _=w();n(110),n(900);var x={notify:function(){},get:function(){return[]}};function S(e,t){var n,r=x,i=0,a=!1;function o(){l.onStateChange&&l.onStateChange()}function u(){i++,n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){var e=c(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}function s(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=x)}var l={addNestedSub:function(e){u();var t=r.subscribe(e),n=!1;return function(){n||(n=!0,t(),s())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return a},trySubscribe:function(){a||(a=!0,u())},tryUnsubscribe:function(){a&&(a=!1,s())},getListeners:function(){return r}};return l}var E=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;var I=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=e.stabilityCheck,u=void 0===o?"once":o,s=e.noopCheck,c=void 0===s?"once":s,l=t.useMemo((function(){var e=S(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0,stabilityCheck:u,noopCheck:c}}),[n,a,u,c]),f=t.useMemo((function(){return n.getState()}),[n]);E((function(){var e=l.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),f!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[l,f]);var h=r||m;return t.createElement(h.Provider,{value:l},i)};function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=e===m?g:y(e);return function(){return t().store}}var C=T();function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=e===m?C:T(e);return function(){return t().dispatch}}var N,P=A();function O(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function R(e){return!!e&&!!e[_e]}function D(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===xe}(e)||Array.isArray(e)||!!e[we]||!!(null===(t=e.constructor)||void 0===t?void 0:t[we])||z(e)||B(e))}function L(e,t,n){void 0===n&&(n=!1),0===M(e)?(n?Object.keys:Se)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function M(e){var t=e[_e];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:z(e)?2:B(e)?3:0}function F(e,t){return 2===M(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function U(e,t){return 2===M(e)?e.get(t):e[t]}function j(e,t,n){var r=M(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function V(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function z(e){return ye&&e instanceof Map}function B(e){return ge&&e instanceof Set}function q(e){return e.o||e.t}function K(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Ee(e);delete t[_e];for(var n=Se(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function G(e,t){return void 0===t&&(t=!1),H(e)||R(e)||!D(e)||(M(e)>1&&(e.set=e.add=e.clear=e.delete=W),Object.freeze(e),t&&L(e,(function(e,t){return G(t,!0)}),!0)),e}function W(){O(2)}function H(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Q(e){var t=Ie[e];return t||O(18,e),t}function $(e,t){Ie[e]||(Ie[e]=t)}function Y(){return ve}function J(e,t){t&&(Q("Patches"),e.u=[],e.s=[],e.v=t)}function X(e){Z(e),e.p.forEach(te),e.p=null}function Z(e){e===ve&&(ve=e.l)}function ee(e){return ve={p:[],l:ve,h:e,m:!0,_:0}}function te(e){var t=e[_e];0===t.i||1===t.i?t.j():t.g=!0}function ne(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||Q("ES5").S(t,e,r),r?(n[_e].P&&(X(t),O(4)),D(e)&&(e=re(t,e),t.l||ae(t,e)),t.u&&Q("Patches").M(n[_e].t,e,t.u,t.s)):e=re(t,n,[]),X(t),t.u&&t.v(t.u,t.s),e!==be?e:void 0}function re(e,t,n){if(H(t))return t;var r=t[_e];if(!r)return L(t,(function(i,a){return ie(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return ae(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=K(r.k):r.o,a=i,o=!1;3===r.i&&(a=new Set(i),i.clear(),o=!0),L(a,(function(t,a){return ie(e,r,i,t,a,n,o)})),ae(e,i,!1),n&&e.u&&Q("Patches").N(r,n,e.u,e.s)}return r.o}function ie(e,t,n,r,i,a,o){if(R(i)){var u=re(e,i,a&&t&&3!==t.i&&!F(t.R,r)?a.concat(r):void 0);if(j(n,r,u),!R(u))return;e.m=!1}else o&&n.add(i);if(D(i)&&!H(i)){if(!e.h.D&&e._<1)return;re(e,i),t&&t.A.l||ae(e,i)}}function ae(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&G(t,n)}function oe(e,t){var n=e[_e];return(n?q(n):e)[t]}function ue(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function se(e){e.P||(e.P=!0,e.l&&se(e.l))}function ce(e){e.o||(e.o=K(e.t))}function le(e,t,n){var r=z(t)?Q("MapSet").F(t,n):B(t)?Q("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Y(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=Te;n&&(i=[r],a=Ce);var o=Proxy.revocable(i,a),u=o.revoke,s=o.proxy;return r.k=s,r.j=u,s}(t,n):Q("ES5").J(t,n);return(n?n.A:Y()).p.push(r),r}function fe(e){return R(e)||O(22,e),function e(t){if(!D(t))return t;var n,r=t[_e],i=M(t);if(r){if(!r.P&&(r.i<4||!Q("ES5").K(r)))return r.t;r.I=!0,n=he(t,i),r.I=!1}else n=he(t,i);return L(n,(function(t,i){r&&U(r.t,t)===i||j(n,t,e(i))})),3===i?new Set(n):n}(e)}function he(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return K(e)}function de(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[_e];return Te.get(t,e)},set:function(t){var n=this[_e];Te.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][_e];if(!i.P)switch(i.i){case 5:r(i)&&se(i);break;case 4:n(i)&&se(i)}}}function n(e){for(var t=e.t,n=e.k,r=Se(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==_e){var o=t[a];if(void 0===o&&!F(t,a))return!0;var u=n[a],s=u&&u[_e];if(s?s.t!==o:!V(u,o))return!0}}var c=!!t[_e];return r.length!==Se(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};$("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=Ee(n);delete a[_e];for(var o=Se(a),u=0;u<o.length;u++){var s=o[u];a[s]=e(s,t||!!a[s].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:Y(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,_e,{value:a,writable:!0}),i},S:function(e,n,i){i?R(n)&&n[_e].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[_e];if(n){var i=n.t,a=n.k,o=n.R,u=n.i;if(4===u)L(a,(function(t){t!==_e&&(void 0!==i[t]||F(i,t)?o[t]||e(a[t]):(o[t]=!0,se(n)))})),L(i,(function(e){void 0!==a[e]||F(a,e)||(o[e]=!1,se(n))}));else if(5===u){if(r(n)&&(se(n),o.length=!0),a.length<i.length)for(var s=a.length;s<i.length;s++)o[s]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var l=Math.min(a.length,i.length),f=0;f<l;f++)a.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(a[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}!function(e){k=e}(o.useSyncExternalStoreWithSelector),function(e){e}(a.useSyncExternalStore),N=u.unstable_batchedUpdates,s=N;var pe,ve,me="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),ye="undefined"!=typeof Map,ge="undefined"!=typeof Set,ke="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,be=me?Symbol.for("immer-nothing"):((pe={})["immer-nothing"]=!0,pe),we=me?Symbol.for("immer-draftable"):"__$immer_draftable",_e=me?Symbol.for("immer-state"):"__$immer_state",xe=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Se="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Ee=Object.getOwnPropertyDescriptors||function(e){var t={};return Se(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Ie={},Te={get:function(e,t){if(t===_e)return e;var n=q(e);if(!F(n,t))return function(e,t,n){var r,i=ue(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!D(r)?r:r===oe(e.t,t)?(ce(e),e.o[t]=le(e.A.h,r,e)):r},has:function(e,t){return t in q(e)},ownKeys:function(e){return Reflect.ownKeys(q(e))},set:function(e,t,n){var r=ue(q(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=oe(q(e),t),a=null==i?void 0:i[_e];if(a&&a.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(V(n,i)&&(void 0!==n||F(e.t,t)))return!0;ce(e),se(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==oe(e.t,t)||t in e.t?(e.R[t]=!1,ce(e),se(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=q(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){O(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){O(12)}},Ce={};L(Te,(function(e,t){Ce[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Ce.deleteProperty=function(e,t){return Ce.set.call(this,e,t,void 0)},Ce.set=function(e,t,n){return Te.set.call(this,e[0],t,n,e[0])};var Ae=function(){function e(e){var t=this;this.O=ke,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&O(6),void 0!==r&&"function"!=typeof r&&O(7),D(e)){var u=ee(t),s=le(t,e,void 0),c=!0;try{o=n(s),c=!1}finally{c?X(u):Z(u)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return J(u,r),ne(e,u)}),(function(e){throw X(u),e})):(J(u,r),ne(o,u))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===be&&(o=void 0),t.D&&G(o,!0),r){var l=[],f=[];Q("Patches").M(e,o,l,f),r(l,f)}return o}O(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){D(e)||O(8),R(e)&&(e=fe(e));var t=ee(this),n=le(this,e,void 0);return n[_e].C=!0,Z(t),n},t.finishDraft=function(e,t){var n=(e&&e[_e]).A;return J(n,t),ne(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!ke&&O(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=Q("Patches").$;return R(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Ne=new Ae,Pe=Ne.produce,Oe=(Ne.produceWithPatches.bind(Ne),Ne.setAutoFreeze.bind(Ne),Ne.setUseProxies.bind(Ne),Ne.applyPatches.bind(Ne),Ne.createDraft.bind(Ne),Ne.finishDraft.bind(Ne),Pe);function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Me="function"===typeof Symbol&&Symbol.observable||"@@observable",Fe=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ue={INIT:"@@redux/INIT"+Fe(),REPLACE:"@@redux/REPLACE"+Fe(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Fe()}};function je(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ve(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Le(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Le(1));return n(Ve)(e,t)}if("function"!==typeof e)throw new Error(Le(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(Le(3));return a}function f(e){if("function"!==typeof e)throw new Error(Le(4));if(s)throw new Error(Le(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(Le(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!je(e))throw new Error(Le(7));if("undefined"===typeof e.type)throw new Error(Le(8));if(s)throw new Error(Le(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}return h({type:Ue.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Le(10));i=e,h({type:Ue.REPLACE})}})[Me]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Le(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[Me]=function(){return this},e},r}function ze(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:Ue.INIT}))throw new Error(Le(12));if("undefined"===typeof n(void 0,{type:Ue.PROBE_UNKNOWN_ACTION()}))throw new Error(Le(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(Le(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function Be(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function qe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Le(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=Be.apply(void 0,a)(n.dispatch),De(De({},n),{},{dispatch:r})}}}function Ke(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var Ge=Ke();Ge.withExtraArgument=Ke;var We=Ge,He=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qe=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},$e=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Ye=Object.defineProperty,Je=Object.defineProperties,Xe=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertySymbols,et=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable,nt=function(e,t,n){return t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},rt=function(e,t){for(var n in t||(t={}))et.call(t,n)&&nt(e,n,t[n]);if(Ze)for(var r=0,i=Ze(t);r<i.length;r++){n=i[r];tt.call(t,n)&&nt(e,n,t[n])}return e},it=function(e,t){return Je(e,Xe(t))},at=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{u(n.next(e))}catch(t){i(t)}},o=function(e){try{u(n.throw(e))}catch(t){i(t)}},u=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};u((n=n.apply(e,t)).next())}))},ot="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Be:Be.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function ut(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}function st(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return rt(rt({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}var ct=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return He(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,$e([void 0],e[0].concat(this)))):new(t.bind.apply(t,$e([void 0],e.concat(this))))},t}(Array),lt=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return He(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,$e([void 0],e[0].concat(this)))):new(t.bind.apply(t,$e([void 0],e.concat(this))))},t}(Array);function ft(e){return D(e)?Oe(e,(function(){})):e}function ht(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,e.actionCreatorCheck,new ct);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(We.withExtraArgument(n.extraArgument)):r.push(We));0;return r}(e)}}function dt(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(!r)throw new Error("`builder.addCase` cannot be called with an empty action type");if(r in n)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}var pt=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},vt=["name","message","stack","code"],mt=function(e,t){this.payload=e,this.meta=t},yt=function(e,t){this.payload=e,this.meta=t},gt=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=vt;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};!function(){function e(e,t,n){var r=st(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:it(rt({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=st(e+"/pending",(function(e,t,n){return{payload:void 0,meta:it(rt({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=st(e+"/rejected",(function(e,t,r,i,a){return{payload:i,error:(n&&n.serializeError||gt)(e||"Rejected"),meta:it(rt({},a||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(u,s,c){var l,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):pt(),h=new o;function d(e){l=e,h.abort()}var p=function(){return at(this,null,(function(){var o,p,v,m,y,g;return Qe(this,(function(k){switch(k.label){case 0:return k.trys.push([0,4,,5]),m=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:s,extra:c}),null===(b=m)||"object"!==typeof b||"function"!==typeof b.then?[3,2]:[4,m];case 1:m=k.sent(),k.label=2;case 2:if(!1===m||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,y=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),u(i(f,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:f,arg:e},{getState:s,extra:c}))),[4,Promise.race([y,Promise.resolve(t(e,{dispatch:u,getState:s,extra:c,requestId:f,signal:h.signal,abort:d,rejectWithValue:function(e,t){return new mt(e,t)},fulfillWithValue:function(e,t){return new yt(e,t)}})).then((function(t){if(t instanceof mt)throw t;return t instanceof yt?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return v=k.sent(),[3,5];case 4:return g=k.sent(),v=g instanceof mt?a(null,f,e,g.payload,g.meta):a(g,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&a.match(v)&&v.meta.condition||u(v),[2,v]}var b}))}))}();return Object.assign(p,{abort:d,requestId:f,arg:e,unwrap:function(){return p.then(kt)}})}}),{pending:i,rejected:a,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();function kt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var bt="listenerMiddleware";st(bt+"/add"),st(bt+"/removeAll"),st(bt+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var wt,_t=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:_t(10);de();var xt,St=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:ft(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},u={},s={};function c(){var t="function"===typeof e.extraReducers?dt(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,s=t[2],c=void 0===s?void 0:s,l=rt(rt({},i),u);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?dt(t):[t,n,r],o=a[0],u=a[1],s=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return ft(e())};else{var c=ft(e);i=function(){return c}}function l(e,t){void 0===e&&(e=i());var n=$e([o[t.type]],u.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[s]),n.reduce((function(e,n){if(n){var r;if(R(e))return void 0===(r=n(e,t))?e:r;if(D(e))return Oe(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=o;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}c&&e.addDefaultCase(c)}))}return a.forEach((function(e){var n,r,a=i[e],c=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,u[c]=n,s[e]=r?st(c,r):st(c)})),{name:t,reducer:function(e,t){return n||(n=c()),n(e,t)},actions:s,caseReducers:o,getInitialState:function(){return n||(n=c()),n.getInitialState()}}}({name:"user",initialState:{user:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null}}}),Et=St.actions,It=Et.login,Tt=Et.logout,Ct=function(e){return e.user.user},At=function(e){var t,n=ht(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,u=void 0===o?n():o,s=r.devTools,c=void 0===s||s,l=r.preloadedState,f=void 0===l?void 0:l,h=r.enhancers,d=void 0===h?void 0:h;if("function"===typeof a)t=a;else{if(!ut(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=ze(a)}var p=u;"function"===typeof p&&(p=p(n));var v=qe.apply(void 0,p),m=Be;c&&(m=ot(rt({trace:!1},"object"===typeof c&&c)));var y=new lt(v),g=y;return Array.isArray(d)?g=$e([v],d):"function"===typeof d&&(g=d(y)),Ve(t,f,m.apply(void 0,g))}({reducer:{user:St.reducer}});function Nt(e){if(Array.isArray(e))return e}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ot(e,t){if(e){if("string"===typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pt(e,t):void 0}}function Rt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Dt(e,t){return Nt(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||Ot(e,t)||Rt()}function Lt(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Mt(e){return function(e){if(Array.isArray(e))return Pt(e)}(e)||Lt(e)||Ot(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function jt(e,t,n){return t&&Ut(e.prototype,t),n&&Ut(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vt(e,t){return Vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vt(e,t)}function zt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vt(e,t)}function Bt(e){return Bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bt(e)}function qt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gt(e){var t=qt();return function(){var n,r=Bt(e);if(t){var i=Bt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Kt(e)}(this,n)}}function Wt(e,t,n){return Wt=qt()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Vt(i,n.prototype),i},Wt.apply(null,arguments)}function Ht(e){var t="function"===typeof Map?new Map:void 0;return Ht=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Wt(e,arguments,Bt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Vt(n,e)},Ht(e)}function Qt(e){return Nt(e)||Lt(e)||Ot(e)||Rt()}function $t(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ot(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Yt(){return Yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yt.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(xt||(xt={}));var Jt,Xt="popstate";function Zt(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function en(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function tn(e,t){return{usr:e.state,key:e.key,idx:t}}function nn(e,t,n,r){return void 0===n&&(n=null),Yt({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?an(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function rn(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function an(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function on(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=xt.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=xt.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:m.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:rn(e);return Zt(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(Yt({},c.state,{idx:h}),""));var m={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Xt,p),f=e,function(){o.removeEventListener(Xt,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=xt.Push;var r=nn(m.location,e,t);n&&n(r,e);var i=tn(r,h=d()+1),a=m.createHref(r);try{c.pushState(i,"",a)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(a)}s&&f&&f({action:l,location:m.location,delta:1})},replace:function(e,t){l=xt.Replace;var r=nn(m.location,e,t);n&&n(r,e);var i=tn(r,h=d()),a=m.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:m.location,delta:0})},go:function(e){return c.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Jt||(Jt={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function un(e,t,n){void 0===n&&(n="/");var r=wn(("string"===typeof t?an(t):t).pathname||"/",n);if(null==r)return null;var i=sn(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=gn(i[o],bn(r));return a}function sn(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(Zt(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=En([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(Zt(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),sn(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:yn(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=$t(cn(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function cn(e){var t=e.split("/");if(0===t.length)return[];var n=Qt(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=cn(i.join("/")),s=[];return s.push.apply(s,Mt(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,Mt(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var ln=/^:\w+$/,fn=3,hn=2,dn=1,pn=10,vn=-2,mn=function(e){return"*"===e};function yn(e,t){var n=e.split("/"),r=n.length;return n.some(mn)&&(r+=vn),t&&(r+=hn),n.filter((function(e){return!mn(e)})).reduce((function(e,t){return e+(ln.test(t)?fn:""===t?dn:pn)}),r)}function gn(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=kn({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:En([i,l.pathname]),pathnameBase:In(En([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=En([i,l.pathnameBase]))}return a}function kn(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);en("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=Dt(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return en(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function bn(e){try{return decodeURI(e)}catch(t){return en(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function wn(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function _n(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function xn(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function Sn(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=an(e):(Zt(!(i=Yt({},e)).pathname||!i.pathname.includes("?"),_n("?","pathname","search",i)),Zt(!i.pathname||!i.pathname.includes("#"),_n("#","pathname","hash",i)),Zt(!i.search||!i.search.includes("#"),_n("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?an(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:Tn(a),hash:Cn(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var En=function(e){return e.join("/").replace(/\/\/+/g,"/")},In=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},Tn=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Cn=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},An=function(e){zt(n,e);var t=Gt(n);function n(){return Ft(this,n),t.apply(this,arguments)}return jt(n)}(Ht(Error));function Nn(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Pn=["post","put","patch","delete"],On=(new Set(Pn),["get"].concat(Pn));new Set(On),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Rn(){return Rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rn.apply(this,arguments)}var Dn=t.createContext(null);var Ln=t.createContext(null);var Mn=t.createContext(null);var Fn=t.createContext(null);var Un=t.createContext(null);var jn=t.createContext({outlet:null,matches:[],isDataRoute:!1});var Vn=t.createContext(null);function zn(){return null!=t.useContext(Un)}function Bn(){return zn()||Zt(!1),t.useContext(Un).location}function qn(e){t.useContext(Fn).static||t.useLayoutEffect(e)}function Kn(){return t.useContext(jn).isDataRoute?function(){var e=Zn(Jn.UseNavigateStable).router,n=tr(Xn.UseNavigateStable),r=t.useRef(!1);qn((function(){r.current=!0}));var i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,Rn({fromRouteId:n},i)))}),[e,n]);return i}():function(){zn()||Zt(!1);var e=t.useContext(Dn),n=t.useContext(Fn),r=n.basename,i=n.navigator,a=t.useContext(jn).matches,o=Bn().pathname,u=JSON.stringify(xn(a).map((function(e){return e.pathnameBase}))),s=t.useRef(!1);return qn((function(){s.current=!0})),t.useCallback((function(t,n){if(void 0===n&&(n={}),s.current)if("number"!==typeof t){var a=Sn(t,JSON.parse(u),o,"path"===n.relative);null==e&&"/"!==r&&(a.pathname="/"===a.pathname?r:En([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(t)}),[r,i,u,o,e])}()}function Gn(e,n,r){zn()||Zt(!1);var i,a=t.useContext(Fn).navigator,o=t.useContext(jn).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,Bn());if(n){var f,h="string"===typeof n?an(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||Zt(!1),i=h}else i=l;var d=i.pathname||"/",p=un(e,{pathname:"/"===c?d:d.slice(c.length)||"/"});var v=Yn(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:En([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:En([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&v?t.createElement(Un.Provider,{value:{location:Rn({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:xt.Pop}},v):v}function Wn(){var e=function(){var e,n=t.useContext(Vn),r=er(Xn.UseRouteError),i=tr(Xn.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=Nn(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var Hn=t.createElement(Wn,null),Qn=function(e){zt(r,e);var n=Gt(r);function r(e){var t;return Ft(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return jt(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(jn.Provider,{value:this.props.routeContext},t.createElement(Vn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(t.Component);function $n(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(Dn);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(jn.Provider,{value:n},i)}function Yn(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}var o=e,u=null==(i=r)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||Zt(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;r&&(c=i.route.errorElement||Hn);var l=n.concat(o.slice(0,a+1)),f=function(){var n;return n=s?c:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement($n,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(Qn,{location:r.location,revalidation:r.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}var Jn=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Jn||{}),Xn=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Xn||{});function Zn(e){var n=t.useContext(Dn);return n||Zt(!1),n}function er(e){var n=t.useContext(Ln);return n||Zt(!1),n}function tr(e){var n=function(e){var n=t.useContext(jn);return n||Zt(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||Zt(!1),r.route.id}r.startTransition;function nr(e){Zt(!1)}function rr(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?xt.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;zn()&&Zt(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=an(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,b=void 0===k?"":k,w=p.state,_=void 0===w?null:w,x=p.key,S=void 0===x?"default":x,E=t.useMemo((function(){var e=wn(m,h);return null==e?null:{location:{pathname:e,search:g,hash:b,state:_,key:S},navigationType:s}}),[h,m,g,b,_,S,s]);return null==E?null:t.createElement(Fn.Provider,{value:d},t.createElement(Un.Provider,{children:a,value:E}))}function ir(e){var t=e.children,n=e.location;return Gn(ur(t),n)}var ar=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(ar||{}),or=new Promise((function(){}));t.Component;function ur(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat(Mt(n),[i]);if(e.type!==t.Fragment){e.type!==nr&&Zt(!1),e.props.index&&e.props.children&&Zt(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ur(e.props.children,a)),r.push(o)}else r.push.apply(r,ur(e.props.children,a))}})),r}var sr=n(184);var cr=function(){var e=Dt((0,t.useState)(!1),2),n=e[0],r=e[1],i=Kn(),a=function(){window.scrollY>100?r(!0):r(!1)};return(0,t.useEffect)((function(){return window.addEventListener("scroll",a),function(){return window.removeEventListener("scroll",a)}}),[]),(0,sr.jsx)("div",{className:"nav ".concat(n&&"nav__black"),children:(0,sr.jsxs)("div",{className:"nav__contents",children:[(0,sr.jsx)("img",{onClick:function(){return i("/")},className:"nav__logo",src:"https://th.bing.com/th/id/R.a1f673e7df715f16dae49f4874009082?rik=1oW0xBGxcarNqw&pid=ImgRaw&r=0",alt:""}),(0,sr.jsx)("img",{onClick:function(){return i("/profile")},className:"nav__avatar",src:"https://wallpapers.com/images/hd/netflix-profile-pictures-5yup5hd2i60x7ew3.jpg",alt:""})]})})};function lr(){lr=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),u=new P(r||[]);return i(o,"_invoke",{value:T(e,n,u)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var d="suspendedStart",p="suspendedYield",v="executing",m="completed",y={};function g(){}function k(){}function b(){}var w={};c(w,o,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(O([])));x&&x!==n&&r.call(x,o)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=h(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==l(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function T(t,n,r){var i=d;return function(a,o){if(i===v)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var u=r.delegate;if(u){var s=C(u,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function C(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(l(t)+" is not iterable")}return k.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:k,configurable:!0}),k.displayName=c(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(I.prototype),c(I.prototype,u,(function(){return this})),t.AsyncIterator=I,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new I(f(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(S),c(S,s,"Generator"),c(S,o,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function fr(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function hr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){fr(a,r,i,o,u,"next",e)}function u(e){fr(a,r,i,o,u,"throw",e)}o(void 0)}))}}function dr(e,t){return function(){return e.apply(t,arguments)}}var pr,vr=Object.prototype.toString,mr=Object.getPrototypeOf,yr=(pr=Object.create(null),function(e){var t=vr.call(e);return pr[t]||(pr[t]=t.slice(8,-1).toLowerCase())}),gr=function(e){return e=e.toLowerCase(),function(t){return yr(t)===e}},kr=function(e){return function(t){return typeof t===e}},br=Array.isArray,wr=kr("undefined");var _r=gr("ArrayBuffer");var xr=kr("string"),Sr=kr("function"),Er=kr("number"),Ir=function(e){return null!==e&&"object"===typeof e},Tr=function(e){if("object"!==yr(e))return!1;var t=mr(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Cr=gr("Date"),Ar=gr("File"),Nr=gr("Blob"),Pr=gr("FileList"),Or=gr("URLSearchParams");function Rr(e,t){var n,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,a=void 0!==i&&i;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),br(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var o,u=a?Object.getOwnPropertyNames(e):Object.keys(e),s=u.length;for(n=0;n<s;n++)o=u[n],t.call(null,e[o],o,e)}}function Dr(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var Lr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Mr=function(e){return!wr(e)&&e!==Lr};var Fr,Ur=(Fr="undefined"!==typeof Uint8Array&&mr(Uint8Array),function(e){return Fr&&e instanceof Fr}),jr=gr("HTMLFormElement"),Vr=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),zr=gr("RegExp"),Br=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};Rr(n,(function(n,i){var a;!1!==(a=t(n,i,e))&&(r[i]=a||n)})),Object.defineProperties(e,r)},qr="abcdefghijklmnopqrstuvwxyz",Kr="0123456789",Gr={DIGIT:Kr,ALPHA:qr,ALPHA_DIGIT:qr+qr.toUpperCase()+Kr};var Wr=gr("AsyncFunction"),Hr={isArray:br,isArrayBuffer:_r,isBuffer:function(e){return null!==e&&!wr(e)&&null!==e.constructor&&!wr(e.constructor)&&Sr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"===typeof FormData&&e instanceof FormData||Sr(e.append)&&("formdata"===(t=yr(e))||"object"===t&&Sr(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&_r(e.buffer)},isString:xr,isNumber:Er,isBoolean:function(e){return!0===e||!1===e},isObject:Ir,isPlainObject:Tr,isUndefined:wr,isDate:Cr,isFile:Ar,isBlob:Nr,isRegExp:zr,isFunction:Sr,isStream:function(e){return Ir(e)&&Sr(e.pipe)},isURLSearchParams:Or,isTypedArray:Ur,isFileList:Pr,forEach:Rr,merge:function e(){for(var t=(Mr(this)&&this||{}).caseless,n={},r=function(r,i){var a=t&&Dr(n,i)||i;Tr(n[a])&&Tr(r)?n[a]=e(n[a],r):Tr(r)?n[a]=e({},r):br(r)?n[a]=r.slice():n[a]=r},i=0,a=arguments.length;i<a;i++)arguments[i]&&Rr(arguments[i],r);return n},extend:function(e,t,n){return Rr(t,(function(t,r){n&&Sr(t)?e[r]=dr(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,u={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||u[o]||(t[o]=e[o],u[o]=!0);e=!1!==n&&mr(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:yr,kindOfTest:gr,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(br(e))return e;var t=e.length;if(!Er(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:jr,hasOwnProperty:Vr,hasOwnProp:Vr,reduceDescriptors:Br,freezeMethods:function(e){Br(e,(function(t,n){if(Sr(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];Sr(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return br(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:Dr,global:Lr,isContextDefined:Mr,ALPHABET:Gr,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gr.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&Sr(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(Ir(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=br(n)?[]:{};return Rr(n,(function(t,n){var a=e(t,r+1);!wr(a)&&(i[n]=a)})),t[r]=void 0,i}}return n}(e,0)},isAsyncFn:Wr,isThenable:function(e){return e&&(Ir(e)||Sr(e))&&Sr(e.then)&&Sr(e.catch)}};function Qr(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Hr.inherits(Qr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Hr.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var $r=Qr.prototype,Yr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){Yr[e]={value:e}})),Object.defineProperties(Qr,Yr),Object.defineProperty($r,"isAxiosError",{value:!0}),Qr.from=function(e,t,n,r,i,a){var o=Object.create($r);return Hr.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),Qr.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var Jr=Qr;function Xr(e){return Hr.isPlainObject(e)||Hr.isArray(e)}function Zr(e){return Hr.endsWith(e,"[]")?e.slice(0,-2):e}function ei(e,t,n){return e?e.concat(t).map((function(e,t){return e=Zr(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var ti=Hr.toFlatObject(Hr,{},null,(function(e){return/^is[A-Z]/.test(e)}));var ni=function(e,t,n){if(!Hr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=Hr.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Hr.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,a=n.dots,o=n.indexes,u=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Hr.isSpecCompliantForm(t);if(!Hr.isFunction(i))throw new TypeError("visitor must be a function");function s(e){if(null===e)return"";if(Hr.isDate(e))return e.toISOString();if(!u&&Hr.isBlob(e))throw new Jr("Blob is not supported. Use a Buffer instead.");return Hr.isArrayBuffer(e)||Hr.isTypedArray(e)?u&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){var u=e;if(e&&!i&&"object"===typeof e)if(Hr.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Hr.isArray(e)&&function(e){return Hr.isArray(e)&&!e.some(Xr)}(e)||(Hr.isFileList(e)||Hr.endsWith(n,"[]"))&&(u=Hr.toArray(e)))return n=Zr(n),u.forEach((function(e,r){!Hr.isUndefined(e)&&null!==e&&t.append(!0===o?ei([n],r,a):null===o?n:n+"[]",s(e))})),!1;return!!Xr(e)||(t.append(ei(i,n,a),s(e)),!1)}var l=[],f=Object.assign(ti,{defaultVisitor:c,convertValue:s,isVisitable:Xr});if(!Hr.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Hr.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),Hr.forEach(n,(function(n,a){!0===(!(Hr.isUndefined(n)||null===n)&&i.call(t,n,Hr.isString(a)?a.trim():a,r,f))&&e(n,r?r.concat(a):[a])})),l.pop()}}(e),t};function ri(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ii(e,t){this._pairs=[],e&&ni(e,this,t)}var ai=ii.prototype;ai.append=function(e,t){this._pairs.push([e,t])},ai.toString=function(e){var t=e?function(t){return e.call(this,t,ri)}:ri;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var oi=ii;function ui(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function si(e,t,n){if(!t)return e;var r,i=n&&n.encode||ui,a=n&&n.serialize;if(r=a?a(t,n):Hr.isURLSearchParams(t)?t.toString():new oi(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var ci=function(){function e(){Ft(this,e),this.handlers=[]}return jt(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){Hr.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),li=ci,fi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hi={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:oi,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var di=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),u=i>=e.length;return a=!a&&Hr.isArray(r)?r.length:a,u?(Hr.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&Hr.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&Hr.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(Hr.isFormData(e)&&Hr.isFunction(e.entries)){var n={};return Hr.forEachEntry(e,(function(e,r){t(function(e){return Hr.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null};var pi={transitional:fi,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=Hr.isObject(e);if(a&&Hr.isHTMLForm(e)&&(e=new FormData(e)),Hr.isFormData(e))return i&&i?JSON.stringify(di(e)):e;if(Hr.isArrayBuffer(e)||Hr.isBuffer(e)||Hr.isStream(e)||Hr.isFile(e)||Hr.isBlob(e))return e;if(Hr.isArrayBufferView(e))return e.buffer;if(Hr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ni(e,new hi.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return hi.isNode&&Hr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=Hr.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return ni(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(Hr.isString(e))try{return(t||JSON.parse)(e),Hr.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||pi.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&Hr.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i){if("SyntaxError"===a.name)throw Jr.from(a,Jr.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hi.classes.FormData,Blob:hi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Hr.forEach(["delete","get","head","post","put","patch"],(function(e){pi.headers[e]={}}));var vi=pi,mi=Hr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),yi=Symbol("internals");function gi(e){return e&&String(e).trim().toLowerCase()}function ki(e){return!1===e||null==e?e:Hr.isArray(e)?e.map(ki):String(e)}function bi(e,t,n,r,i){return Hr.isFunction(r)?r.call(this,t,n):(i&&(t=n),Hr.isString(t)?Hr.isString(r)?-1!==t.indexOf(r):Hr.isRegExp(r)?r.test(t):void 0:void 0)}var wi=function(e,t){function n(e){Ft(this,n),e&&this.set(e)}return jt(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=gi(t);if(!i)throw new Error("header name must be a non-empty string");var a=Hr.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=ki(e))}var a=function(e,t){return Hr.forEach(e,(function(e,n){return i(e,n,t)}))};return Hr.isPlainObject(e)||e instanceof this.constructor?a(e,t):Hr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&mi[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=gi(e)){var n=Hr.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(Hr.isFunction(t))return t.call(this,r,n);if(Hr.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=gi(e)){var n=Hr.findKey(this,e);return!(!n||void 0===this[n]||t&&!bi(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=gi(e)){var i=Hr.findKey(n,e);!i||t&&!bi(0,n[i],i,t)||(delete n[i],r=!0)}}return Hr.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!bi(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return Hr.forEach(this,(function(r,i){var a=Hr.findKey(n,i);if(a)return t[a]=ki(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=ki(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return Hr.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&Hr.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=Dt(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[yi]=this[yi]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=gi(e);t[r]||(!function(e,t){var n=Hr.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Hr.isArray(e)?e.forEach(r):r(e),this}}]),n}();wi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Hr.reduceDescriptors(wi.prototype,(function(e,t){var n=e.value,r=t[0].toUpperCase()+t.slice(1);return{get:function(){return n},set:function(e){this[r]=e}}})),Hr.freezeMethods(wi);var _i=wi;function xi(e,t){var n=this||vi,r=t||n,i=_i.from(r.headers),a=r.data;return Hr.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function Si(e){return!(!e||!e.__CANCEL__)}function Ei(e,t,n){Jr.call(this,null==e?"canceled":e,Jr.ERR_CANCELED,t,n),this.name="CanceledError"}Hr.inherits(Ei,Jr,{__CANCEL__:!0});var Ii=Ei;var Ti=hi.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),Hr.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Hr.isString(r)&&o.push("path="+r),Hr.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Ci(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Ai=hi.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=Hr.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var Ni=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(u){var s=Date.now(),c=i[o];n||(n=s),r[a]=u,i[a]=s;for(var l=o,f=0;l!==a;)f+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(s-n<t)){var h=c&&s-c;return h?Math.round(1e3*f/h):void 0}}};function Pi(e,t){var n=0,r=Ni(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,u=a-n,s=r(u);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:u,rate:s||void 0,estimated:s&&o&&a<=o?(o-a)/s:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var Oi={http:null,xhr:"undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i,a=e.data,o=_i.from(e.headers).normalize(),u=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}Hr.isFormData(a)&&(hi.isStandardBrowserEnv||hi.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.getContentType(/^\s*multipart\/form-data/)?Hr.isString(i=o.getContentType())&&o.setContentType(i.replace(/^\s*(multipart\/form-data);+/,"$1")):o.setContentType("multipart/form-data"));var c=new XMLHttpRequest;if(e.auth){var l=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(l+":"+f))}var h=Ci(e.baseURL,e.url);function d(){if(c){var r=_i.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Jr("Request failed with status code "+n.status,[Jr.ERR_BAD_REQUEST,Jr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:u&&"text"!==u&&"json"!==u?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:r,config:e,request:c}),c=null}}if(c.open(e.method.toUpperCase(),si(h,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(d)},c.onabort=function(){c&&(n(new Jr("Request aborted",Jr.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new Jr("Network Error",Jr.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||fi;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Jr(t,r.clarifyTimeoutError?Jr.ETIMEDOUT:Jr.ECONNABORTED,e,c)),c=null},hi.isStandardBrowserEnv){var p=(e.withCredentials||Ai(h))&&e.xsrfCookieName&&Ti.read(e.xsrfCookieName);p&&o.set(e.xsrfHeaderName,p)}void 0===a&&o.setContentType(null),"setRequestHeader"in c&&Hr.forEach(o.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),Hr.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),u&&"json"!==u&&(c.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&c.addEventListener("progress",Pi(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",Pi(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){c&&(n(!t||t.type?new Ii(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var v=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);v&&-1===hi.protocols.indexOf(v)?n(new Jr("Unsupported protocol "+v+":",Jr.ERR_BAD_REQUEST,e)):c.send(a||null)}))}};Hr.forEach(Oi,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));var Ri=function(e){return"- ".concat(e)},Di=function(e){return Hr.isFunction(e)||null===e||!1===e},Li=function(e){for(var t,n,r=(e=Hr.isArray(e)?e:[e]).length,i={},a=0;a<r;a++){var o=void 0;if(n=t=e[a],!Di(t)&&void 0===(n=Oi[(o=String(t)).toLowerCase()]))throw new Jr("Unknown adapter '".concat(o,"'"));if(n)break;i[o||"#"+a]=n}if(!n){var u=Object.entries(i).map((function(e){var t=Dt(e,2),n=t[0],r=t[1];return"adapter ".concat(n," ")+(!1===r?"is not supported by the environment":"is not available in the build")})),s=r?u.length>1?"since :\n"+u.map(Ri).join("\n"):" "+Ri(u[0]):"as no adapter specified";throw new Jr("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return n};function Mi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ii(null,e)}function Fi(e){return Mi(e),e.headers=_i.from(e.headers),e.data=xi.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Li(e.adapter||vi.adapter)(e).then((function(t){return Mi(e),t.data=xi.call(e,e.transformResponse,t),t.headers=_i.from(t.headers),t}),(function(t){return Si(t)||(Mi(e),t&&t.response&&(t.response.data=xi.call(e,e.transformResponse,t.response),t.response.headers=_i.from(t.response.headers))),Promise.reject(t)}))}var Ui=function(e){return e instanceof _i?e.toJSON():e};function ji(e,t){t=t||{};var n={};function r(e,t,n){return Hr.isPlainObject(e)&&Hr.isPlainObject(t)?Hr.merge.call({caseless:n},e,t):Hr.isPlainObject(t)?Hr.merge({},t):Hr.isArray(t)?t.slice():t}function i(e,t,n){return Hr.isUndefined(t)?Hr.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!Hr.isUndefined(t))return r(void 0,t)}function o(e,t){return Hr.isUndefined(t)?Hr.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function u(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}var s={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:function(e,t){return i(Ui(e),Ui(t),!0)}};return Hr.forEach(Object.keys(Object.assign({},e,t)),(function(r){var a=s[r]||i,o=a(e[r],t[r],r);Hr.isUndefined(o)&&a!==u||(n[r]=o)})),n}var Vi="1.5.1",zi={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){zi[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var Bi={};zi.transitional=function(e,t,n){function r(e,t){return"[Axios v1.5.1] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new Jr(r(i," has been removed"+(t?" in "+t:"")),Jr.ERR_DEPRECATED);return t&&!Bi[i]&&(Bi[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var qi={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Jr("options must be an object",Jr.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var u=e[a],s=void 0===u||o(u,a,e);if(!0!==s)throw new Jr("option "+a+" must be "+s,Jr.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Jr("Unknown option "+a,Jr.ERR_BAD_OPTION)}},validators:zi},Ki=qi.validators,Gi=function(){function e(t){Ft(this,e),this.defaults=t,this.interceptors={request:new li,response:new li}}return jt(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n=t=ji(this.defaults,t),r=n.transitional,i=n.paramsSerializer,a=n.headers;void 0!==r&&qi.assertOptions(r,{silentJSONParsing:Ki.transitional(Ki.boolean),forcedJSONParsing:Ki.transitional(Ki.boolean),clarifyTimeoutError:Ki.transitional(Ki.boolean)},!1),null!=i&&(Hr.isFunction(i)?t.paramsSerializer={serialize:i}:qi.assertOptions(i,{encode:Ki.function,serialize:Ki.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();var o=a&&Hr.merge(a.common,a[t.method]);a&&Hr.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete a[e]})),t.headers=_i.concat(o,a);var u=[],s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,u.unshift(e.fulfilled,e.rejected))}));var c,l=[];this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));var f,h=0;if(!s){var d=[Fi.bind(this),void 0];for(d.unshift.apply(d,u),d.push.apply(d,l),f=d.length,c=Promise.resolve(t);h<f;)c=c.then(d[h++],d[h++]);return c}f=u.length;var p=t;for(h=0;h<f;){var v=u[h++],m=u[h++];try{p=v(p)}catch(y){m.call(this,y);break}}try{c=Fi.call(this,p)}catch(y){return Promise.reject(y)}for(h=0,f=l.length;h<f;)c=c.then(l[h++],l[h++]);return c}},{key:"getUri",value:function(e){return si(Ci((e=ji(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();Hr.forEach(["delete","get","head","options"],(function(e){Gi.prototype[e]=function(t,n){return this.request(ji(n||{},{method:e,url:t,data:(n||{}).data}))}})),Hr.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(ji(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Gi.prototype[e]=t(),Gi.prototype[e+"Form"]=t(!0)}));var Wi=Gi,Hi=function(){function e(t){if(Ft(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new Ii(e,t,i),n(r.reason))}))}return jt(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t,n=new e((function(e){t=e}));return{token:n,cancel:t}}}]),e}(),Qi=Hi;var $i={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($i).forEach((function(e){var t=Dt(e,2),n=t[0],r=t[1];$i[r]=n}));var Yi=$i;var Ji=function e(t){var n=new Wi(t),r=dr(Wi.prototype.request,n);return Hr.extend(r,Wi.prototype,n,{allOwnKeys:!0}),Hr.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(ji(t,n))},r}(vi);Ji.Axios=Wi,Ji.CanceledError=Ii,Ji.CancelToken=Qi,Ji.isCancel=Si,Ji.VERSION=Vi,Ji.toFormData=ni,Ji.AxiosError=Jr,Ji.Cancel=Ji.CanceledError,Ji.all=function(e){return Promise.all(e)},Ji.spread=function(e){return function(t){return e.apply(null,t)}},Ji.isAxiosError=function(e){return Hr.isObject(e)&&!0===e.isAxiosError},Ji.mergeConfig=ji,Ji.AxiosHeaders=_i,Ji.formToJSON=function(e){return di(Hr.isHTMLForm(e)?new FormData(e):e)},Ji.getAdapter=Li,Ji.HttpStatusCode=Yi,Ji.default=Ji;var Xi=Ji.create({baseURL:"https://api.themoviedb.org/3"}),Zi="5633ad1edc8b625c9fbdbb8eb3856e93",ea={fetchTrending:"/trending/all/week?api_key=".concat(Zi,"&language=en-US"),fetchNetflixOriginals:"/discover/tv?api_key=".concat(Zi,"&with_networks=213"),fetchTopRated:"/movie/top_rated?api_key=".concat(Zi,"&language=en-US"),fetchActonMovies:"/discover/movie?api_key=".concat(Zi,"&with_genres=28"),fetchComedyMovies:"/discover/movie?api_key=".concat(Zi,"&with_genres=35"),fetchHorrorMovies:"/discover/movie?api_key=".concat(Zi,"&with_genres=27"),fetchRomanceMovies:"/discover/movie?api_key=".concat(Zi,"&with_genres=10749"),fetchDocumentaries:"/discover/movie?api_key=".concat(Zi,"&with_genres=99")};var ta=function(){var e=Dt((0,t.useState)([]),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){function e(){return(e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xi.get(ea.fetchNetflixOriginals);case 2:return t=e.sent,r(t.data.results[Math.floor(Math.random()*t.data.results.length-1)]),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),console.log(n),(0,sr.jsxs)("header",{className:"banner",style:{backgroundSize:"cover",backgroundImage:'url("https://image.tmdb.org/t/p/original/'.concat(null===n||void 0===n?void 0:n.backdrop_path,'")'),backgroundPosition:"center center"},children:[(0,sr.jsxs)("div",{className:"banner__contents",children:[(0,sr.jsx)("h1",{className:"banner__title",children:(null===n||void 0===n?void 0:n.title)||(null===n||void 0===n?void 0:n.name)||(null===n||void 0===n?void 0:n.original_name)}),(0,sr.jsxs)("div",{className:"banner__buttons",children:[(0,sr.jsx)("button",{className:"banner__button",children:"Play"}),(0,sr.jsx)("button",{className:"banner__button",children:"My List"})]}),(0,sr.jsx)("h1",{className:"banner__description",children:function(e,t){return(null===e||void 0===e?void 0:e.length)>t?e.substr(0,t-1)+"...":e}(null===n||void 0===n?void 0:n.overview,150)})]}),(0,sr.jsx)("div",{className:"banner--fadeBottom"})]})};var na=function(e){var n=e.title,r=e.fetchUrl,i=e.isLargeRow,a=void 0!==i&&i,o=Dt((0,t.useState)([]),2),u=o[0],s=o[1];return(0,t.useEffect)((function(){function e(){return(e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xi.get(r);case 2:return t=e.sent,s(t.data.results),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]),(0,sr.jsxs)("div",{className:"row",children:[(0,sr.jsx)("h2",{children:n}),(0,sr.jsx)("div",{className:"row__posters",children:u.map((function(e){return(a&&e.poster_path||!a&&e.backdrop_path)&&(0,sr.jsx)("img",{className:"row__poster ".concat(a&&"row__posterLarge"),src:"".concat("https://image.tmdb.org/t/p/original/").concat(a?e.poster_path:e.backdrop_path),alt:e.name},e.id)}))})]})};var ra=function(){return(0,sr.jsxs)("div",{className:"homeScreen",children:[(0,sr.jsx)(cr,{}),(0,sr.jsx)(ta,{}),(0,sr.jsx)(na,{title:"NETFLIX ORIGINALS",fetchUrl:ea.fetchNetflixOriginals,isLargeRow:!0}),(0,sr.jsx)(na,{title:"Trending Now",fetchUrl:ea.fetchTrending}),(0,sr.jsx)(na,{title:"Top Rated",fetchUrl:ea.fetchTopRated}),(0,sr.jsx)(na,{title:"Action Movies",fetchUrl:ea.fetchActonMovies}),(0,sr.jsx)(na,{title:"Comedy Movies",fetchUrl:ea.fetchComedyMovies}),(0,sr.jsx)(na,{title:"Horror Moveis",fetchUrl:ea.fetchHorrorMovies}),(0,sr.jsx)(na,{title:"Romance Movies",fetchUrl:ea.fetchRomanceMovies}),(0,sr.jsx)(na,{title:"Documentaries",fetchUrl:ea.fetchDocumentaries})]})};new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var ia=r.startTransition;function aa(e){var n,r=e.basename,i=e.children,a=e.future,o=e.window,u=t.useRef();null==u.current&&(u.current=(void 0===(n={window:o,v5Compat:!0})&&(n={}),on((function(e,t){var n=e.location;return nn("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:rn(t)}),null,n)));var s=u.current,c=Dt(t.useState({action:s.action,location:s.location}),2),l=c[0],f=c[1],h=(a||{}).v7_startTransition,d=t.useCallback((function(e){h&&ia?ia((function(){return f(e)})):f(e)}),[f,h]);return t.useLayoutEffect((function(){return s.listen(d)}),[s,d]),t.createElement(rr,{basename:r,children:i,location:l.location,navigationType:l.action,navigator:s})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var oa,ua;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(oa||(oa={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ua||(ua={}));var sa=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ca={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(sa(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new la;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},la=function(e){zt(n,e);var t=Gt(n);function n(){var e;return Ft(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return jt(n)}(Ht(Error)),fa=function(e){return function(e){var t=sa(e);return ca.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ha=function(e){try{return ca.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function da(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=da(e[n],t[n]));return e}var pa=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},va=function(){try{return pa()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/netflix-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&ha(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},ma=function(){var e;return null===(e=va())||void 0===e?void 0:e.config},ya=function(){function e(){var t=this;Ft(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return jt(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ga(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ka(){var e,t=null===(e=va())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function ba(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function wa(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function _a(){var e=ga();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function xa(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Sa=function(e){zt(n,e);var t=Gt(n);function n(e,r,i){var a;return Ft(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Kt(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Kt(a),Ea.prototype.create),a}return jt(n)}(Ht(Error)),Ea=function(){function e(t,n,r){Ft(this,e),this.service=t,this.serviceName=n,this.errors=r}return jt(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ia,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Sa(n,a,t)}}]),e}();var Ia=/\{\$([^}]+)}/g;function Ta(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ca(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Aa(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Na(u)&&Na(s)){if(!Aa(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Na(e){return null!==e&&"object"===typeof e}function Pa(e){for(var t=[],n=function(){var e=Dt(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Oa(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=Dt(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ra(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Da(e,t){var n=new La(e,t);return n.subscribe.bind(n)}var La=function(){function e(t,n){var r=this;Ft(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return jt(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=$t(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Ma),void 0===r.error&&(r.error=Ma),void 0===r.complete&&(r.complete=Ma);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Ma(){}function Fa(e){return e&&e._delegate?e._delegate:e}var Ua=function(){function e(t,n,r){Ft(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return jt(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ja="[DEFAULT]",Va=function(){function e(t,n){Ft(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return jt(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ya;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ja})}catch(s){}var t,n=$t(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=Dt(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Mt(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Mt(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=$t(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=Dt(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=$t(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ja?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja;return this.component?this.component.multipleInstances?e:ja:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var za,Ba,qa=function(){function e(t){Ft(this,e),this.name=t,this.providers=new Map}return jt(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Va(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ka=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ba||(Ba={}));var Ga={debug:Ba.DEBUG,verbose:Ba.VERBOSE,info:Ba.INFO,warn:Ba.WARN,error:Ba.ERROR,silent:Ba.SILENT},Wa=Ba.INFO,Ha=(h(za={},Ba.DEBUG,"log"),h(za,Ba.VERBOSE,"log"),h(za,Ba.INFO,"info"),h(za,Ba.WARN,"warn"),h(za,Ba.ERROR,"error"),za),Qa=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ha[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},$a=function(){function e(t){Ft(this,e),this.name=t,this._logLevel=Wa,this._logHandler=Qa,this._userLogHandler=null,Ka.push(this)}return jt(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ba))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ga[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ba.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ba.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ba.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ba.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ba.INFO].concat(t)),this._logHandler.apply(this,[this,Ba.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ba.WARN].concat(t)),this._logHandler.apply(this,[this,Ba.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ba.ERROR].concat(t)),this._logHandler.apply(this,[this,Ba.ERROR].concat(t))}}]),e}();var Ya,Ja,Xa=function(e,t){return t.some((function(t){return e instanceof t}))};var Za=new WeakMap,eo=new WeakMap,to=new WeakMap,no=new WeakMap,ro=new WeakMap;var io={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return eo.get(e);if("objectStoreNames"===t)return e.objectStoreNames||to.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return uo(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ao(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ja||(Ja=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(so(this),n),uo(Za.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return uo(e.apply(so(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[so(this),t].concat(r));return to.set(a,t.sort?t.sort():[t]),uo(a)}}function oo(e){return"function"===typeof e?ao(e):(e instanceof IDBTransaction&&function(e){if(!eo.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));eo.set(e,t)}}(e),Xa(e,Ya||(Ya=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,io):e)}function uo(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(uo(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Za.set(t,e)})).catch((function(){})),ro.set(t,e),t}(e);if(no.has(e))return no.get(e);var t=oo(e);return t!==e&&(no.set(e,t),ro.set(t,e)),t}var so=function(e){return ro.get(e)};var co,lo,fo=["get","getKey","getAll","getAllKeys","count"],ho=["put","add","delete","clear"],po=new Map;function vo(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(po.get(t))return po.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=ho.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||fo.includes(n))){var a=function(){var e=hr(lr().mark((function e(t){var a,o,u,s,c,l,f=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return po.set(t,a),a}}}io=function(e){return De(De({},e),{},{get:function(t,n,r){return vo(t,n)||e.get(t,n,r)},has:function(t,n){return!!vo(t,n)||e.has(t,n)}})}(io);var mo=function(){function e(t){Ft(this,e),this.container=t}return jt(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var yo="@firebase/app",go="0.9.19",ko=new $a("@firebase/app"),bo="[DEFAULT]",wo=(h(co={},yo,"fire-core"),h(co,"@firebase/app-compat","fire-core-compat"),h(co,"@firebase/analytics","fire-analytics"),h(co,"@firebase/analytics-compat","fire-analytics-compat"),h(co,"@firebase/app-check","fire-app-check"),h(co,"@firebase/app-check-compat","fire-app-check-compat"),h(co,"@firebase/auth","fire-auth"),h(co,"@firebase/auth-compat","fire-auth-compat"),h(co,"@firebase/database","fire-rtdb"),h(co,"@firebase/database-compat","fire-rtdb-compat"),h(co,"@firebase/functions","fire-fn"),h(co,"@firebase/functions-compat","fire-fn-compat"),h(co,"@firebase/installations","fire-iid"),h(co,"@firebase/installations-compat","fire-iid-compat"),h(co,"@firebase/messaging","fire-fcm"),h(co,"@firebase/messaging-compat","fire-fcm-compat"),h(co,"@firebase/performance","fire-perf"),h(co,"@firebase/performance-compat","fire-perf-compat"),h(co,"@firebase/remote-config","fire-rc"),h(co,"@firebase/remote-config-compat","fire-rc-compat"),h(co,"@firebase/storage","fire-gcs"),h(co,"@firebase/storage-compat","fire-gcs-compat"),h(co,"@firebase/firestore","fire-fst"),h(co,"@firebase/firestore-compat","fire-fst-compat"),h(co,"fire-js","fire-js"),h(co,"firebase","fire-js-all"),co),_o=new Map,xo=new Map;function So(e,t){try{e.container.addComponent(t)}catch(n){ko.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Eo(e,t){e.container.addOrOverwriteComponent(t)}function Io(e){var t=e.name;if(xo.has(t))return ko.debug("There were multiple attempts to register component ".concat(t,".")),!1;xo.set(t,e);var n,r=$t(_o.values());try{for(r.s();!(n=r.n()).done;){So(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function To(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Co(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bo;To(e,t).clearInstance(n)}function Ao(){xo.clear()}var No=(h(lo={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),h(lo,"bad-app-name","Illegal App name: '{$appName}"),h(lo,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),h(lo,"app-deleted","Firebase App named '{$appName}' already deleted"),h(lo,"no-options","Need to provide options, when not being deployed to hosting via source."),h(lo,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),h(lo,"invalid-log-argument","First argument to `onLog` must be null or a function."),h(lo,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),h(lo,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),h(lo,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),h(lo,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),lo),Po=new Ea("app","Firebase",No),Oo=function(){function e(t,n,r){var i=this;Ft(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ua("app",(function(){return i}),"PUBLIC"))}return jt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Po.create("app-deleted",{appName:this._name})}}]),e}(),Ro="10.4.0";function Do(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:bo,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Po.create("bad-app-name",{appName:String(i)});if(n||(n=ma()),!n)throw Po.create("no-options");var a=_o.get(i);if(a){if(Aa(n,a.options)&&Aa(r,a.config))return a;throw Po.create("duplicate-app",{appName:i})}var o,u=new qa(i),s=$t(xo.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Oo(n,r,u);return _o.set(i,l),l}function Lo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bo,t=_o.get(e);if(!t&&e===bo&&ma())return Do();if(!t)throw Po.create("no-app",{appName:e});return t}function Mo(){return Array.from(_o.values())}function Fo(e){return Uo.apply(this,arguments)}function Uo(){return(Uo=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!_o.has(n)){e.next=6;break}return _o.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jo(e,t,n){var r,i=null!==(r=wo[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ko.warn(u.join(" "))}Io(new Ua("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Vo(e,t){if(null!==e&&"function"!==typeof e)throw Po.create("invalid-log-argument");!function(e,t){var n,r=$t(Ka);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Ga[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ba[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function zo(e){var t;t=e,Ka.forEach((function(e){e.setLogLevel(t)}))}var Bo="firebase-heartbeat-database",qo=1,Ko="firebase-heartbeat-store",Go=null;function Wo(){return Go||(Go=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=uo(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(uo(u.result),e.oldVersion,e.newVersion,uo(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Bo,qo,{upgrade:function(e,t){if(0===t)e.createObjectStore(Ko)}}).catch((function(e){throw Po.create("idb-open",{originalErrorMessage:e.message})}))),Go}function Ho(e){return Qo.apply(this,arguments)}function Qo(){return Qo=hr(lr().mark((function e(t){var n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wo();case 3:return n=e.sent,e.next=6,n.transaction(Ko).objectStore(Ko).get(Jo(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Sa?ko.warn(e.t0.message):(i=Po.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ko.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Qo.apply(this,arguments)}function $o(e,t){return Yo.apply(this,arguments)}function Yo(){return Yo=hr(lr().mark((function e(t,n){var r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wo();case 3:return r=e.sent,i=r.transaction(Ko,"readwrite"),a=i.objectStore(Ko),e.next=8,a.put(n,Jo(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Sa?ko.warn(e.t0.message):(o=Po.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ko.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Yo.apply(this,arguments)}function Jo(e){return"".concat(e.name,"!").concat(e.options.appId)}var Xo=function(){function e(t){var n=this;Ft(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new ru(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return jt(e,[{key:"triggerHeartbeat",value:function(){var e=hr(lr().mark((function e(){var t,n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Zo(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=hr(lr().mark((function e(){var t,n,r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Zo(),n=eu(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=fa(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Zo(){return(new Date).toISOString().substring(0,10)}function eu(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=$t(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),iu(r)>n)return a.dates.pop(),0}else if(r.push({agent:e.agent,dates:[e.date]}),iu(r)>n)return r.pop(),0;i=i.slice(1)};for(a.s();!(t=a.n()).done&&0!==o(););}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var tu,nu,ru=function(){function e(t){Ft(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return jt(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xa()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ho(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",$o(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",$o(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Mt(r.heartbeats),Mt(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function iu(e){return fa(JSON.stringify({version:2,heartbeats:e})).length}tu="",Io(new Ua("platform-logger",(function(e){return new mo(e)}),"PRIVATE")),Io(new Ua("heartbeat",(function(e){return new Xo(e)}),"PRIVATE")),jo(yo,go,tu),jo(yo,go,"esm2017"),jo("fire-js","");var au=function(){function e(t,n){var r=this;Ft(this,e),this._delegate=t,this.firebase=n,So(t,new Ua("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return jt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Fo(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bo;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bo;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){So(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Eo(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),ou=(h(nu={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),h(nu,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),nu),uu=new Ea("app-compat","Firebase",ou);var su=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Do(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ta(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:jo,setLogLevel:zo,onLog:Vo,apps:null,SDK_VERSION:Ro,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Io(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw uu.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&da(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ta(n,e=e||bo))throw uu.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(au);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){da(n,e)},createSubscribe:Da,ErrorFactory:Ea,deepExtend:da}),n}(),cu=new $a("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){cu.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var lu=self.firebase.SDK_VERSION;lu&&lu.indexOf("LITE")>=0&&cu.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var fu=su;!function(e){jo("@firebase/app-compat","0.2.19",e)}();function hu(){return hu="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},hu.apply(this,arguments)}fu.registerVersion("firebase","10.4.0","app-compat");var du,pu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},vu={},mu=mu||{},yu=pu||self;function gu(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ku(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var bu="closure_uid_"+(1e9*Math.random()>>>0),wu=0;function _u(e,t,n){return e.call.apply(e.bind,arguments)}function xu(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Su(e,t,n){return(Su=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_u:xu).apply(null,arguments)}function Eu(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Iu(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Tu(){this.s=this.s,this.o=this.o}Tu.prototype.s=!1,Tu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,bu)&&e[bu]||(e[bu]=++wu)}(this)},Tu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Cu=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Au(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Nu(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(gu(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Pu(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Pu.prototype.h=function(){this.defaultPrevented=!0};var Ou=function(){if(!yu.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{yu.addEventListener("test",(function(){}),t),yu.removeEventListener("test",(function(){}),t)}catch(V){}return e}();function Ru(e){return/^[\s\xa0]*$/.test(e)}function Du(){var e=yu.navigator;return e&&(e=e.userAgent)?e:""}function Lu(e){return-1!=Du().indexOf(e)}function Mu(e){return Mu[" "](e),e}Mu[" "]=function(){};var Fu,Uu,ju=Lu("Opera"),Vu=Lu("Trident")||Lu("MSIE"),zu=Lu("Edge"),Bu=zu||Vu,qu=Lu("Gecko")&&!(-1!=Du().toLowerCase().indexOf("webkit")&&!Lu("Edge"))&&!(Lu("Trident")||Lu("MSIE"))&&!Lu("Edge"),Ku=-1!=Du().toLowerCase().indexOf("webkit")&&!Lu("Edge");function Gu(){var e=yu.document;return e?e.documentMode:void 0}e:{var Wu="",Hu=function(){var e=Du();return qu?/rv:([^\);]+)(\)|;)/.exec(e):zu?/Edge\/([\d\.]+)/.exec(e):Vu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ku?/WebKit\/(\S+)/.exec(e):ju?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Hu&&(Wu=Hu?Hu[1]:""),Vu){var Qu=Gu();if(null!=Qu&&Qu>parseFloat(Wu)){Fu=String(Qu);break e}}Fu=Wu}if(yu.document&&Vu){var $u=Gu();Uu=$u||(parseInt(Fu,10)||void 0)}else Uu=void 0;var Yu=Uu;function Ju(e,t){if(Pu.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(qu){e:{try{Mu(t.nodeName);var i=!0;break e}catch(j){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Xu[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ju.$.h.call(this)}}Iu(Ju,Pu);var Xu={2:"touch",3:"pen",4:"mouse"};Ju.prototype.h=function(){Ju.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Zu="closure_listenable_"+(1e6*Math.random()|0),es=0;function ts(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++es,this.fa=this.ia=!1}function ns(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function rs(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function is(e){var t={};for(var n in e)t[n]=e[n];return t}var as="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function os(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<as.length;a++)n=as[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function us(e){this.src=e,this.g={},this.h=0}function ss(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Cu(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ns(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function cs(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}us.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=cs(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new ts(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var ls="closure_lm_"+(1e6*Math.random()|0),fs={};function hs(e,t,n,r,i){if(r&&r.once)return ps(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)hs(e,t[a],n,r,i);return null}return n=ws(n),e&&e[Zu]?e.O(t,n,ku(r)?!!r.capture:!!r,i):ds(e,t,n,!1,r,i)}function ds(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=ku(i)?!!i.capture:!!i,u=ks(e);if(u||(e[ls]=u=new us(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=gs;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ou||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ys(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ps(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ps(e,t[a],n,r,i);return null}return n=ws(n),e&&e[Zu]?e.P(t,n,ku(r)?!!r.capture:!!r,i):ds(e,t,n,!0,r,i)}function vs(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)vs(e,t[a],n,r,i);else r=ku(r)?!!r.capture:!!r,n=ws(n),e&&e[Zu]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=cs(a=e.g[t],n,r,i))&&(ns(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ks(e))&&(t=e.g[t.toString()],e=-1,t&&(e=cs(t,n,r,i)),(n=-1<e?t[e]:null)&&ms(n))}function ms(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Zu])ss(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ys(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ks(t))?(ss(n,e),0==n.h&&(n.src=null,t[ls]=null)):ns(e)}}}function ys(e){return e in fs?fs[e]:fs[e]="on"+e}function gs(e,t){if(e.fa)e=!0;else{t=new Ju(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ms(e),e=n.call(r,t)}return e}function ks(e){return(e=e[ls])instanceof us?e:null}var bs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ws(e){return"function"===typeof e?e:(e[bs]||(e[bs]=function(t){return e.handleEvent(t)}),e[bs])}function _s(){Tu.call(this),this.i=new us(this),this.S=this,this.J=null}function xs(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Pu(t,e);else if(t instanceof Pu)t.target=t.target||e;else{var i=t;os(t=new Pu(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Ss(o,r,!0,t)&&i}if(i=Ss(o=t.g=e,r,!0,t)&&i,i=Ss(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Ss(o=t.g=n[a],r,!1,t)&&i}function Ss(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&ss(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Iu(_s,Tu),_s.prototype[Zu]=!0,_s.prototype.removeEventListener=function(e,t,n,r){vs(this,e,t,n,r)},_s.prototype.N=function(){if(_s.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ns(n[r]);delete t.g[e],t.h--}}this.J=null},_s.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},_s.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Es=yu.JSON.stringify,Is=function(){function e(t,n){Ft(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return jt(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Ts(){var e=Ls,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Cs=function(){function e(){Ft(this,e),this.h=this.g=null}return jt(e,[{key:"add",value:function(e,t){var n=As.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),As=new Is((function(){return new Ns}),(function(e){return e.reset()})),Ns=function(){function e(){Ft(this,e),this.next=this.g=this.h=null}return jt(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Ps(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Os(e){yu.setTimeout((function(){throw e}),0)}var Rs,Ds=!1,Ls=new Cs,Ms=function(){var e=yu.Promise.resolve(void 0);Rs=function(){e.then(Fs)}},Fs=function(){for(var e;e=Ts();){try{e.h.call(e.g)}catch(V){Os(V)}var t=As;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ds=!1};function Us(e,t){_s.call(this),this.h=e||1,this.g=t||yu,this.j=Su(this.qb,this),this.l=Date.now()}function js(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Vs(e,t,n){if("function"===typeof e)n&&(e=Su(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Su(e.handleEvent,e)}return 2147483647<Number(t)?-1:yu.setTimeout(e,t||0)}function zs(e){e.g=Vs((function(){e.g=null,e.i&&(e.i=!1,zs(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Iu(Us,_s),(du=Us.prototype).ga=!1,du.T=null,du.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),xs(this,"tick"),this.ga&&(js(this),this.start()))}},du.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},du.N=function(){Us.$.N.call(this),js(this),delete this.g};var Bs=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return jt(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:zs(this)}},{key:"N",value:function(){hu(Bt(n.prototype),"N",this).call(this),this.g&&(yu.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Tu);function qs(e){Tu.call(this),this.h=e,this.g={}}Iu(qs,Tu);var Ks=[];function Gs(e,t,n,r){Array.isArray(n)||(n&&(Ks[0]=n.toString()),n=Ks);for(var i=0;i<n.length;i++){var a=hs(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ws(e){rs(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ms(e)}),e),e.g={}}function Hs(){this.g=!0}function Qs(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Es(n)}catch(O){return t}}(e,n)+(r?" "+r:"")}))}qs.prototype.N=function(){qs.$.N.call(this),Ws(this)},qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hs.prototype.Ea=function(){this.g=!1},Hs.prototype.info=function(){};var $s={},Ys=null;function Js(){return Ys=Ys||new _s}function Xs(e){Pu.call(this,$s.Ta,e)}function Zs(e){var t=Js();xs(t,new Xs(t))}function ec(e,t){Pu.call(this,$s.STAT_EVENT,e),this.stat=t}function tc(e){var t=Js();xs(t,new ec(t,e))}function nc(e,t){Pu.call(this,$s.Ua,e),this.size=t}function rc(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return yu.setTimeout((function(){e()}),t)}$s.Ta="serverreachability",Iu(Xs,Pu),$s.STAT_EVENT="statevent",Iu(ec,Pu),$s.Ua="timingevent",Iu(nc,Pu);var ic={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ac={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function oc(){}function uc(e){return e.h||(e.h=e.i())}function sc(){}oc.prototype.h=null;var cc,lc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function fc(){Pu.call(this,"d")}function hc(){Pu.call(this,"c")}function dc(){}function pc(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new qs(this),this.P=mc,e=Bu?125:void 0,this.V=new Us(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new vc}function vc(){this.i=null,this.g="",this.h=!1}Iu(fc,Pu),Iu(hc,Pu),Iu(dc,oc),dc.prototype.g=function(){return new XMLHttpRequest},dc.prototype.i=function(){return{}},cc=new dc;var mc=45e3,yc={},gc={};function kc(e,t,n){e.L=1,e.v=Uc(Rc(t)),e.s=n,e.S=!0,bc(e,null)}function bc(e,t){e.G=Date.now(),Sc(e),e.A=Rc(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Jc(n.i,"t",r),e.C=0,n=e.l.J,e.h=new vc,e.g=Jl(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Bs(Su(e.Pa,e,e.g),e.O)),Gs(e.U,e.g,"readystatechange",e.nb),t=e.I?is(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Zs(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function wc(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function _c(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=xc(e,n))==gc){4==t&&(e.o=4,tc(14),i=!1),Qs(e.j,e.m,null,"[Incomplete Response]");break}if(r==yc){e.o=4,tc(15),Qs(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Qs(e.j,e.m,r,null),Ac(e,r)}wc(e)&&r!=gc&&r!=yc&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,tc(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ql(t),t.M=!0,tc(11))):(Qs(e.j,e.m,n,"[Invalid Chunked Response]"),Cc(e),Tc(e))}function xc(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?gc:(n=Number(t.substring(n,r)),isNaN(n)?yc:(r+=1)+n>t.length?gc:(t=t.slice(r,r+n),e.C=r+n,t))}function Sc(e){e.Y=Date.now()+e.P,Ec(e,e.P)}function Ec(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=rc(Su(e.lb,e),t)}function Ic(e){e.B&&(yu.clearTimeout(e.B),e.B=null)}function Tc(e){0==e.l.H||e.J||Wl(e.l,e)}function Cc(e){Ic(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,js(e.V),Ws(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Ac(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||il(n.i,e)))if(!e.K&&il(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Gl(n),Ll(n)}Bl(n),tc(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=rc(Su(n.ib,n),6e3));if(1>=rl(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Ql(n,11)}else if((e.K||n.g==e)&&Gl(n),!Ru(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(al(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,Fc(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Yl(r,r.J?r.pa:null,r.Y),d.K){ol(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(Ic(p),Sc(p)),r.g=d}else zl(r);0<n.j.length&&Fl(n)}else"stop"!=a[0]&&"close"!=a[0]||Ql(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ql(n,7):Dl(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Zs()}catch(a){}}function Nc(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(gu(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(gu(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(gu(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(du=pc.prototype).setTimeout=function(e){this.P=e},du.nb=function(e){e=e.target;var t=this.M;t&&3==Cl(e)?t.l():this.Pa(e)},du.Pa=function(e){try{if(e==this.g)e:{var t=Cl(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Bu||this.g&&(this.h.h||this.g.ja()||Al(this.g)))){this.J||4!=t||7==n||Zs(),Ic(this);var r=this.g.da();this.ca=r;t:if(wc(this)){var i=Al(this.g);e="";var a=i.length,o=4==Cl(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Cc(this),Tc(this);var u="";break t}this.h.i=new yu.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ru(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,tc(12),Cc(this),Tc(this);break e}Qs(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ac(this,r)}this.S?(_c(this,t,u),Bu&&this.i&&3==t&&(Gs(this.U,this.V,"tick",this.mb),this.V.start())):(Qs(this.j,this.m,u,null),Ac(this,u)),4==t&&Cc(this),this.i&&!this.J&&(4==t?Wl(this.l,this):(this.i=!1,Sc(this)))}else(function(e){var t={};e=(e.g&&2<=Cl(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Ru(e[n])){var r=Ps(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,tc(12)):(this.o=0,tc(13)),Cc(this),Tc(this)}}}catch(t){}},du.mb=function(){if(this.g){var e=Cl(this.g),t=this.g.ja();this.C<t.length&&(Ic(this),_c(this,e,t),this.i&&4!=e&&Sc(this))}},du.cancel=function(){this.J=!0,Cc(this)},du.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Zs(),tc(17)),Cc(this),this.o=2,Tc(this)):Ec(this,this.Y-e)};var Pc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oc(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Oc){this.h=e.h,Dc(this,e.j),this.s=e.s,this.g=e.g,Lc(this,e.m),this.l=e.l;var t=e.i,n=new Hc;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Mc(this,n),this.o=e.o}else e&&(t=String(e).match(Pc))?(this.h=!1,Dc(this,t[1]||"",!0),this.s=jc(t[2]||""),this.g=jc(t[3]||"",!0),Lc(this,t[4]),this.l=jc(t[5]||"",!0),Mc(this,t[6]||"",!0),this.o=jc(t[7]||"")):(this.h=!1,this.i=new Hc(null,this.h))}function Rc(e){return new Oc(e)}function Dc(e,t,n){e.j=n?jc(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Lc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Mc(e,t,n){t instanceof Hc?(e.i=t,function(e,t){t&&!e.j&&(Qc(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&($c(this,t),Jc(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Vc(t,Gc)),e.i=new Hc(t,e.h))}function Fc(e,t,n){e.i.set(t,n)}function Uc(e){return Fc(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function jc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Vc(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,zc),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function zc(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Oc.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Vc(t,Bc,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Vc(t,Bc,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Vc(n,"/"==n.charAt(0)?Kc:qc,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Vc(n,Wc)),e.join("")};var Bc=/[#\/\?@]/g,qc=/[#\?:]/g,Kc=/[#\?]/g,Gc=/[#\?@]/g,Wc=/#/g;function Hc(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Qc(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function $c(e,t){Qc(e),t=Xc(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Yc(e,t){return Qc(e),t=Xc(e,t),e.g.has(t)}function Jc(e,t,n){$c(e,t),0<n.length&&(e.i=null,e.g.set(Xc(e,t),Au(n)),e.h+=n.length)}function Xc(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(du=Hc.prototype).add=function(e,t){Qc(this),this.i=null,e=Xc(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},du.forEach=function(e,t){Qc(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},du.ta=function(){Qc(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},du.Z=function(e){Qc(this);var t=[];if("string"===typeof e)Yc(this,e)&&(t=t.concat(this.g.get(Xc(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},du.set=function(e,t){return Qc(this),this.i=null,Yc(this,e=Xc(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},du.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},du.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Zc=jt((function e(t,n){Ft(this,e),this.g=t,this.map=n}));function el(e){this.l=e||tl,yu.PerformanceNavigationTiming?e=0<(e=yu.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(yu.g&&yu.g.Ka&&yu.g.Ka()&&yu.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var tl=10;function nl(e){return!!e.h||!!e.g&&e.g.size>=e.j}function rl(e){return e.h?1:e.g?e.g.size:0}function il(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function al(e,t){e.g?e.g.add(t):e.h=t}function ol(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ul(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=$t(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Au(e.i)}el.prototype.cancel=function(){if(this.i=ul(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=$t(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var sl=function(){function e(){Ft(this,e)}return jt(e,[{key:"stringify",value:function(e){return yu.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return yu.JSON.parse(e,void 0)}}]),e}();function cl(){this.g=new sl}function ll(e,t,n){var r=n||"";try{Nc(e,(function(e,n){var i=e;ku(e)&&(i=Es(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function fl(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(j){}}function hl(e){this.l=e.ec||null,this.j=e.ob||!1}function dl(e,t){_s.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=pl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Iu(hl,oc),hl.prototype.g=function(){return new dl(this.l,this.j)},hl.prototype.i=function(e){return function(){return e}}({}),Iu(dl,_s);var pl=0;function vl(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ml(e){e.readyState=4,e.l=null,e.j=null,e.A=null,yl(e)}function yl(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(du=dl.prototype).open=function(e,t){if(this.readyState!=pl)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,yl(this)},du.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||yu).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},du.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ml(this)),this.readyState=pl},du.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,yl(this)),this.g&&(this.readyState=3,yl(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof yu.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vl(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},du.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ml(this):yl(this),3==this.readyState&&vl(this)}},du.Za=function(e){this.g&&(this.response=this.responseText=e,ml(this))},du.Ya=function(e){this.g&&(this.response=e,ml(this))},du.ka=function(){this.g&&ml(this)},du.setRequestHeader=function(e,t){this.v.append(e,t)},du.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},du.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(dl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var gl=yu.JSON.parse;function kl(e){_s.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=bl,this.L=this.M=!1}Iu(kl,_s);var bl="",wl=/^https?$/i,_l=["POST","PUT"];function xl(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Sl(e),Il(e)}function Sl(e){e.F||(e.F=!0,xs(e,"complete"),xs(e,"error"))}function El(e){if(e.h&&"undefined"!=typeof mu&&(!e.C[1]||4!=Cl(e)||2!=e.da()))if(e.v&&4==Cl(e))Vs(e.La,0,e);else if(xs(e,"readystatechange"),4==Cl(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Pc)[1]||null;!a&&yu.self&&yu.self.location&&(a=yu.self.location.protocol.slice(0,-1)),i=!wl.test(a?a.toLowerCase():"")}t=i}if(t)xs(e,"complete"),xs(e,"success");else{e.m=6;try{var o=2<Cl(e)?e.g.statusText:""}catch(O){o=""}e.j=o+" ["+e.da()+"]",Sl(e)}}finally{Il(e)}}}function Il(e,t){if(e.g){Tl(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||xs(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Tl(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(yu.clearTimeout(e.A),e.A=null)}function Cl(e){return e.g?e.g.readyState:0}function Al(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case bl:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Q){return null}}function Nl(e){var t="";return rs(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Pl(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Nl(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Fc(e,t,n))}function Ol(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Rl(e){this.Ga=0,this.j=[],this.l=new Hs,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ol("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ol("baseRetryDelayMs",5e3,e),this.hb=Ol("retryDelaySeedMs",1e4,e),this.eb=Ol("forwardChannelMaxRetries",2,e),this.xa=Ol("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new el(e&&e.concurrentRequestLimit),this.Ja=new cl,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Dl(e){if(Ml(e),3==e.H){var t=e.W++,n=Rc(e.I);if(Fc(n,"SID",e.K),Fc(n,"RID",t),Fc(n,"TYPE","terminate"),jl(e,n),(t=new pc(e,e.l,t)).L=2,t.v=Uc(Rc(n)),n=!1,yu.navigator&&yu.navigator.sendBeacon)try{n=yu.navigator.sendBeacon(t.v.toString(),"")}catch(G){}!n&&yu.Image&&((new Image).src=t.v,n=!0),n||(t.g=Jl(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Sc(t)}$l(e)}function Ll(e){e.g&&(ql(e),e.g.cancel(),e.g=null)}function Ml(e){Ll(e),e.u&&(yu.clearTimeout(e.u),e.u=null),Gl(e),e.i.cancel(),e.m&&("number"===typeof e.m&&yu.clearTimeout(e.m),e.m=null)}function Fl(e){if(!nl(e.i)&&!e.m){e.m=!0;var t=e.Na;Rs||Ms(),Ds||(Rs(),Ds=!0),Ls.add(t,e),e.C=0}}function Ul(e,t){var n;n=t?t.m:e.W++;var r=Rc(e.I);Fc(r,"SID",e.K),Fc(r,"RID",n),Fc(r,"AID",e.V),jl(e,r),e.o&&e.s&&Pl(r,e.o,e.s),n=new pc(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Vl(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),al(e.i,n),kc(n,r,t)}function jl(e,t){e.na&&rs(e.na,(function(e,n){Fc(t,n,e)})),e.h&&Nc({},(function(e,n){Fc(t,n,e)}))}function Vl(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Su(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{ll(l,o,"req"+c+"_")}catch(we){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function zl(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Rs||Ms(),Ds||(Rs(),Ds=!0),Ls.add(t,e),e.A=0}}function Bl(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=rc(Su(e.Ma,e),Hl(e,e.A)),e.A++,!0)}function ql(e){null!=e.B&&(yu.clearTimeout(e.B),e.B=null)}function Kl(e){e.g=new pc(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Rc(e.wa);Fc(t,"RID","rpc"),Fc(t,"SID",e.K),Fc(t,"AID",e.V),Fc(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Fc(t,"TO",e.qa),Fc(t,"TYPE","xmlhttp"),jl(e,t),e.o&&e.s&&Pl(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Uc(Rc(t)),n.s=null,n.S=!0,bc(n,e)}function Gl(e){null!=e.v&&(yu.clearTimeout(e.v),e.v=null)}function Wl(e,t){var n=null;if(e.g==t){Gl(e),ql(e),e.g=null;var r=2}else{if(!il(e.i,t))return;n=t.F,ol(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;xs(r=Js(),new nc(r,n)),Fl(e)}else zl(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(rl(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=rc(Su(e.Na,e,t),Hl(e,e.C)),e.C++,!0))}(e,t)||2==r&&Bl(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ql(e,5);break;case 4:Ql(e,10);break;case 3:Ql(e,6);break;default:Ql(e,2)}}function Hl(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Ql(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Su(e.pb,e);n||(n=new Oc("//www.google.com/images/cleardot.gif"),yu.location&&"http"==yu.location.protocol||Dc(n,"https"),Uc(n)),function(e,t){var n=new Hs;if(yu.Image){var r=new Image;r.onload=Eu(fl,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Eu(fl,n,r,"TestLoadImage: error",!1,t),r.onabort=Eu(fl,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Eu(fl,n,r,"TestLoadImage: timeout",!1,t),yu.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else tc(2);e.H=0,e.h&&e.h.za(t),$l(e),Ml(e)}function $l(e){if(e.H=0,e.ma=[],e.h){var t=ul(e.i);0==t.length&&0==e.j.length||(Nu(e.ma,t),Nu(e.ma,e.j),e.i.i.length=0,Au(e.j),e.j.length=0),e.h.ya()}}function Yl(e,t,n){var r=n instanceof Oc?Rc(n):new Oc(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Lc(r,r.m);else{var i=yu.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Oc(null);r&&Dc(a,r),t&&(a.g=t),i&&Lc(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Fc(r,n,t),Fc(r,"VER",e.ra),jl(e,r),r}function Jl(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new kl(new hl({ob:!0})):new kl(e.va)).Oa(e.J),t}function Xl(){}function Zl(){if(Vu&&!(10<=Number(Yu)))throw Error("Environmental error: no available transport.")}function ef(e,t){_s.call(this),this.g=new Rl(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ru(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ru(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new rf(this)}function tf(e){fc.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function nf(){hc.call(this),this.status=1}function rf(e){this.g=e}function af(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function of(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function uf(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(du=kl.prototype).Oa=function(e){this.M=e},du.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():cc.g(),this.C=this.u?uc(this.u):uc(cc),this.g.onreadystatechange=Su(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void xl(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=$t(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=yu.FormData&&e instanceof yu.FormData,!(0<=Cu(_l,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=$t(n);try{for(c.s();!(s=c.n()).done;){var l=Dt(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Tl(this),0<this.B&&((this.L=function(e){return Vu&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Su(this.ua,this)):this.A=Vs(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){xl(this,u)}},du.ua=function(){"undefined"!=typeof mu&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xs(this,"timeout"),this.abort(8))},du.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,xs(this,"complete"),xs(this,"abort"),Il(this))},du.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Il(this,!0)),kl.$.N.call(this)},du.La=function(){this.s||(this.G||this.v||this.l?El(this):this.kb())},du.kb=function(){El(this)},du.isActive=function(){return!!this.g},du.da=function(){try{return 2<Cl(this)?this.g.status:-1}catch(U){return-1}},du.ja=function(){try{return this.g?this.g.responseText:""}catch(U){return""}},du.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),gl(t)}},du.Ia=function(){return this.m},du.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(du=Rl.prototype).ra=8,du.H=1,du.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new pc(this,this.l,e),n=this.s;if(this.U&&(n?os(n=is(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Vl(this,t,r),Fc(i=Rc(this.I),"RID",e),Fc(i,"CVER",22),this.F&&Fc(i,"X-HTTP-Session-Id",this.F),jl(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Nl(n)))+"&"+r:this.o&&Pl(i,this.o,n)),al(this.i,t),this.bb&&Fc(i,"TYPE","init"),this.P?(Fc(i,"$req",r),Fc(i,"SID","null"),t.aa=!0,kc(t,i,null)):kc(t,i,r),this.H=2}}else 3==this.H&&(e?Ul(this,e):0==this.j.length||nl(this.i)||Ul(this))},du.Ma=function(){if(this.u=null,Kl(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=rc(Su(this.jb,this),e)}},du.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,tc(10),Ll(this),Kl(this))},du.ib=function(){null!=this.v&&(this.v=null,Ll(this),Bl(this),tc(19))},du.pb=function(e){e?(this.l.info("Successfully pinged google.com"),tc(2)):(this.l.info("Failed to ping google.com"),tc(1))},du.isActive=function(){return!!this.h&&this.h.isActive(this)},(du=Xl.prototype).Ba=function(){},du.Aa=function(){},du.za=function(){},du.ya=function(){},du.isActive=function(){return!0},du.Va=function(){},Zl.prototype.g=function(e,t){return new ef(e,t)},Iu(ef,_s),ef.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;tc(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Yl(e,null,e.Y),Fl(e)},ef.prototype.close=function(){Dl(this.g)},ef.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Es(e),e=n);t.j.push(new Zc(t.fb++,e)),3==t.H&&Fl(t)},ef.prototype.N=function(){this.g.h=null,delete this.j,Dl(this.g),delete this.g,ef.$.N.call(this)},Iu(tf,fc),Iu(nf,hc),Iu(rf,Xl),rf.prototype.Ba=function(){xs(this.g,"a")},rf.prototype.Aa=function(e){xs(this.g,new tf(e))},rf.prototype.za=function(e){xs(this.g,new nf)},rf.prototype.ya=function(){xs(this.g,"b")},Iu(af,(function(){this.blockSize=-1})),af.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},af.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)of(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){of(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){of(this,r),i=0;break}}this.h=i,this.i+=t},af.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var sf={};function cf(e){return-128<=e&&128>e?function(e,t){var n=sf;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new uf([0|e],0>e?-1:0)})):new uf([0|e],0>e?-1:0)}function lf(e){if(isNaN(e)||!isFinite(e))return hf;if(0>e)return yf(lf(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ff;return new uf(t,0)}var ff=4294967296,hf=cf(0),df=cf(1),pf=cf(16777216);function vf(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function mf(e){return-1==e.h}function yf(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new uf(n,~e.h).add(df)}function gf(e,t){return e.add(yf(t))}function kf(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function bf(e,t){this.g=e,this.h=t}function wf(e,t){if(vf(t))throw Error("division by zero");if(vf(e))return new bf(hf,hf);if(mf(e))return t=wf(yf(e),t),new bf(yf(t.g),yf(t.h));if(mf(t))return t=wf(e,yf(t)),new bf(yf(t.g),t.h);if(30<e.g.length){if(mf(e)||mf(t))throw Error("slowDivide_ only works with positive integers.");for(var n=df,r=t;0>=r.X(e);)n=_f(n),r=_f(r);var i=xf(n,1),a=xf(r,1);for(r=xf(r,2),n=xf(n,2);!vf(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=xf(r,1),n=xf(n,1)}return t=gf(e,i.R(t)),new bf(i,t)}for(i=hf;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=lf(n)).R(t);mf(o)||0<o.X(e);)o=(a=lf(n-=r)).R(t);vf(a)&&(a=df),i=i.add(a),e=gf(e,o)}return new bf(i,e)}function _f(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new uf(n,e.h)}function xf(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new uf(i,e.h)}(du=uf.prototype).ea=function(){if(mf(this))return-yf(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ff+r)*t,t*=ff}return e},du.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(vf(this))return"0";if(mf(this))return"-"+yf(this).toString(e);for(var t=lf(Math.pow(e,6)),n=this,r="";;){var i=wf(n,t).g,a=((0<(n=gf(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(vf(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},du.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},du.X=function(e){return mf(e=gf(this,e))?-1:vf(e)?0:1},du.abs=function(){return mf(this)?yf(this):this},du.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new uf(n,-2147483648&n[n.length-1]?-1:0)},du.R=function(e){if(vf(this)||vf(e))return hf;if(mf(this))return mf(e)?yf(this).R(yf(e)):yf(yf(this).R(e));if(mf(e))return yf(this.R(yf(e)));if(0>this.X(pf)&&0>e.X(pf))return lf(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,kf(n,2*r+2*i),n[2*r+2*i+1]+=a*s,kf(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,kf(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,kf(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new uf(n,0)},du.gb=function(e){return wf(this,e).h},du.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new uf(n,this.h&e.h)},du.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new uf(n,this.h|e.h)},du.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new uf(n,this.h^e.h)},Zl.prototype.createWebChannel=Zl.prototype.g,ef.prototype.send=ef.prototype.u,ef.prototype.open=ef.prototype.m,ef.prototype.close=ef.prototype.close,ic.NO_ERROR=0,ic.TIMEOUT=8,ic.HTTP_ERROR=6,ac.COMPLETE="complete",sc.EventType=lc,lc.OPEN="a",lc.CLOSE="b",lc.ERROR="c",lc.MESSAGE="d",_s.prototype.listen=_s.prototype.O,kl.prototype.listenOnce=kl.prototype.P,kl.prototype.getLastError=kl.prototype.Sa,kl.prototype.getLastErrorCode=kl.prototype.Ia,kl.prototype.getStatus=kl.prototype.da,kl.prototype.getResponseJson=kl.prototype.Wa,kl.prototype.getResponseText=kl.prototype.ja,kl.prototype.send=kl.prototype.ha,kl.prototype.setWithCredentials=kl.prototype.Oa,af.prototype.digest=af.prototype.l,af.prototype.reset=af.prototype.reset,af.prototype.update=af.prototype.j,uf.prototype.add=uf.prototype.add,uf.prototype.multiply=uf.prototype.R,uf.prototype.modulo=uf.prototype.gb,uf.prototype.compare=uf.prototype.X,uf.prototype.toNumber=uf.prototype.ea,uf.prototype.toString=uf.prototype.toString,uf.prototype.getBits=uf.prototype.D,uf.fromNumber=lf,uf.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return yf(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=lf(Math.pow(n,8)),i=hf,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=lf(Math.pow(n,o)),i=i.R(o).add(lf(u))):i=(i=i.R(r)).add(lf(u))}return i};var Sf=vu.createWebChannelTransport=function(){return new Zl},Ef=vu.getStatEventTarget=function(){return Js()},If=vu.ErrorCode=ic,Tf=vu.EventType=ac,Cf=vu.Event=$s,Af=vu.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Nf=(vu.FetchXmlHttpFactory=hl,vu.WebChannel=sc),Pf=vu.XhrIo=kl,Of=vu.Md5=af,Rf=vu.Integer=uf,Df="@firebase/firestore",Lf=function(){function e(t){Ft(this,e),this.uid=t}return jt(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Lf.UNAUTHENTICATED=new Lf(null),Lf.GOOGLE_CREDENTIALS=new Lf("google-credentials-uid"),Lf.FIRST_PARTY=new Lf("first-party-uid"),Lf.MOCK_USER=new Lf("mock-user");var Mf="10.4.0",Ff=new $a("@firebase/firestore");function Uf(){return Ff.logLevel}function jf(e){if(Ff.logLevel<=Ba.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Bf);Ff.debug.apply(Ff,["Firestore (".concat(Mf,"): ").concat(e)].concat(Mt(i)))}}function Vf(e){if(Ff.logLevel<=Ba.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Bf);Ff.error.apply(Ff,["Firestore (".concat(Mf,"): ").concat(e)].concat(Mt(i)))}}function zf(e){if(Ff.logLevel<=Ba.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Bf);Ff.warn.apply(Ff,["Firestore (".concat(Mf,"): ").concat(e)].concat(Mt(i)))}}function Bf(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(D){return e}}function qf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Mf,") INTERNAL ASSERTION FAILED: ")+e;throw Vf(t),new Error(t)}function Kf(e,t){e||qf()}function Gf(e,t){return e}var Wf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Hf=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return jt(n)}(Sa),Qf=jt((function e(){var t=this;Ft(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),$f=jt((function e(t,n){Ft(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Yf=function(){function e(){Ft(this,e)}return jt(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Lf.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Jf=function(){function e(t){Ft(this,e),this.token=t,this.changeListener=null}return jt(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Xf=function(){function e(t){Ft(this,e),this.t=t,this.currentUser=Lf.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return jt(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Qf;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Qf,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){jf("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(jf("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Qf)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(jf("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Kf("string"==typeof n.accessToken),new $f(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Kf(null===e||"string"==typeof e),new Lf(e)}}]),e}(),Zf=function(){function e(t,n,r){Ft(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Lf.FIRST_PARTY,this.I=new Map}return jt(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),eh=function(){function e(t,n,r){Ft(this,e),this.l=t,this.h=n,this.P=r}return jt(e,[{key:"getToken",value:function(){return Promise.resolve(new Zf(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Lf.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),th=jt((function e(t){Ft(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),nh=function(){function e(t){Ft(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return jt(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&jf("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,jf("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){jf("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):jf("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Kf("string"==typeof t.token),e.R=t.token,new th(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function rh(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var ih=function(){function e(){Ft(this,e)}return jt(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=rh(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function ah(e,t){return e<t?-1:e>t?1:0}function oh(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function uh(e){return e+"\0"}var sh=function(){function e(t,n){if(Ft(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Hf(Wf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Hf(Wf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Hf(Wf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Hf(Wf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return jt(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?ah(this.nanoseconds,e.nanoseconds):ah(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),ch=function(){function e(t){Ft(this,e),this.timestamp=t}return jt(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new sh(0,0))}},{key:"max",value:function(){return new e(new sh(253402300799,999999999))}}]),e}(),lh=function(){function e(t,n,r){Ft(this,e),void 0===n?n=0:n>t.length&&qf(),void 0===r?r=t.length-n:r>t.length-n&&qf(),this.segments=t,this.offset=n,this.len=r}return jt(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),fh=function(e){zt(n,e);var t=Gt(n);function n(){return Ft(this,n),t.apply(this,arguments)}return jt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Mt(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(lh),hh=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dh=function(e){zt(n,e);var t=Gt(n);function n(){return Ft(this,n),t.apply(this,arguments)}return jt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return hh.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Hf(Wf.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Hf(Wf.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Hf(Wf.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(lh),ph=function(){function e(t){Ft(this,e),this.path=t}return jt(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===fh.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(fh.fromString(t))}},{key:"fromName",value:function(t){return new e(fh.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(fh.emptyPath())}},{key:"comparator",value:function(e,t){return fh.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new fh(t.slice()))}}]),e}(),vh=jt((function e(t,n,r,i){Ft(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function mh(e){return e.fields.find((function(e){return 2===e.kind}))}function yh(e){return e.fields.filter((function(e){return 2!==e.kind}))}vh.UNKNOWN_ID=-1;var gh=jt((function e(t,n){Ft(this,e),this.fieldPath=t,this.kind=n}));var kh=function(){function e(t,n){Ft(this,e),this.sequenceNumber=t,this.offset=n}return jt(e,null,[{key:"empty",value:function(){return new e(0,_h.min())}}]),e}();function bh(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ch.fromTimestamp(1e9===r?new sh(n+1,0):new sh(n,r));return new _h(i,ph.empty(),t)}function wh(e){return new _h(e.readTime,e.key,-1)}var _h=function(){function e(t,n,r){Ft(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return jt(e,null,[{key:"min",value:function(){return new e(ch.min(),ph.empty(),-1)}},{key:"max",value:function(){return new e(ch.max(),ph.empty(),-1)}}]),e}();function xh(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ph.comparator(e.documentKey,t.documentKey))?n:ah(e.largestBatchId,t.largestBatchId)}var Sh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Eh=function(){function e(){Ft(this,e),this.onCommittedListeners=[]}return jt(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Ih(e){return Th.apply(this,arguments)}function Th(){return Th=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Wf.FAILED_PRECONDITION&&t.message===Sh){e.next=2;break}throw t;case 2:jf("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Th.apply(this,arguments)}var Ch=function(){function e(t){var n=this;Ft(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return jt(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&qf(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=$t(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Ah=function(){function e(t,n){var r=this;Ft(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.m=new Qf,this.transaction.oncomplete=function(){r.m.resolve()},this.transaction.onabort=function(){n.error?r.m.reject(new Oh(t,n.error)):r.m.resolve()},this.transaction.onerror=function(e){var n=Fh(e.target.error);r.m.reject(new Oh(t,n))}}return jt(e,[{key:"g",get:function(){return this.m.promise}},{key:"abort",value:function(e){e&&this.m.reject(e),this.aborted||(jf("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"p",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Dh(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Oh(n,t)}}}]),e}(),Nh=function(){function e(t,n,r){Ft(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(ga())&&Vf("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return jt(e,[{key:"N",value:function(){var e=hr(lr().mark((function e(t){var n=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return jf("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Oh(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Hf(Wf.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Hf(Wf.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Oh(t,n))},i.onupgradeneeded=function(e){jf("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.B(t,i.transaction,e.oldVersion,n.version).next((function(){jf("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"k",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=hr(lr().mark((function e(t,n,r,i){var a,o,u,s,c=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=lr().mark((function e(){var n,u,s,l;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.N(t);case 4:return c.db=e.sent,n=Ah.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.p(),e})).catch((function(e){return n.abort(e),Ch.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.g;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,jf("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if(!(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return jf("SimpleDb","Removing database:",e),Lh(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!xa())return!1;if(e.v())return!0;var t=ga(),n=e.D(t),r=0<n&&n<10,i=e.F(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"v",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/netflix-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"F",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Ph=function(){function e(t){Ft(this,e),this.q=t,this.K=!1,this.$=null}return jt(e,[{key:"isDone",get:function(){return this.K}},{key:"U",get:function(){return this.$}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.K=!0}},{key:"W",value:function(e){this.$=e}},{key:"delete",value:function(){return Lh(this.q.delete())}}]),e}(),Oh=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this,Wf.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return jt(n)}(Hf);function Rh(e){return"IndexedDbTransactionError"===e.name}var Dh=function(){function e(t){Ft(this,e),this.store=t}return jt(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(jf("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(jf("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Lh(n)}},{key:"add",value:function(e){return jf("SimpleDb","ADD",this.store.name,e,e),Lh(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Lh(this.store.get(e)).next((function(n){return void 0===n&&(n=null),jf("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return jf("SimpleDb","DELETE",this.store.name,e),Lh(this.store.delete(e))}},{key:"count",value:function(){return jf("SimpleDb","COUNT",this.store.name),Lh(this.store.count())}},{key:"G",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.j(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Ch((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Ch((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){jf("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.j(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.j(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new Ch((function(n,r){t.onerror=function(e){var t=Fh(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"j",value:function(e,t){var n=[];return new Ch((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Ph(i),o=t(i.primaryKey,i.value,a);if(o instanceof Ch){var u=o.catch((function(e){return a.done(),Ch.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Ch.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Lh(e){return new Ch((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Fh(e.target.error);n(t)}}))}var Mh=!1;function Fh(e){var t=Nh.D(ga());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Hf("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Mh||(Mh=!0,setTimeout((function(){throw r}),0)),r}}return e}var Uh=function(){function e(t,n){Ft(this,e),this.asyncQueue=t,this.ee=n,this.task=null}return jt(e,[{key:"start",value:function(){this.te(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"te",value:function(e){var t=this;jf("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=jf,e.t1="Documents written: ",e.next=6,t.ee.ne();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Rh(e.t4)){e.next=17;break}jf("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Ih(e.t4);case 19:return e.next=21,t.te(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),jh=function(){function e(t,n){Ft(this,e),this.localStore=t,this.persistence=n}return jt(e,[{key:"ne",value:function(){var e=hr(lr().mark((function e(){var t,n=this,r=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.re(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"re",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Ch.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return jf("IndexBackiller","Processing collection: ".concat(t)),n.ie(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"ie",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.se(i,n)})).next((function(n){return jf("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"se",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=wh(t);xh(r,n)>0&&(n=r)})),new _h(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Vh=function(){function e(t,n){var r=this;Ft(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return jt(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function zh(e){return null==e}function Bh(e){return 0===e&&1/e==-1/0}function qh(e){return"number"==typeof e&&Number.isInteger(e)&&!Bh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Kh(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Wh(t)),t=Gh(e.get(n),t);return Wh(t)}function Gh(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Wh(e){return e+"\x01\x01"}function Hh(e){var t=e.length;if(Kf(t>=2),2===t)return Kf("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),fh.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&qf(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:qf()}a=o+2}return new fh(r)}Vh.ae=-1;var Qh=["userId","batchId"];function $h(e,t){return[e,Kh(t)]}function Yh(e,t,n){return[e,Kh(t),n]}var Jh={},Xh=["prefixPath","collectionGroup","readTime","documentId"],Zh=["prefixPath","collectionGroup","documentId"],ed=["collectionGroup","readTime","prefixPath","documentId"],td=["canonicalId","targetId"],nd=["targetId","path"],rd=["path","targetId"],id=["collectionId","parent"],ad=["indexId","uid"],od=["uid","sequenceNumber"],ud=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sd=["indexId","uid","orderedDocumentKey"],cd=["userId","collectionPath","documentId"],ld=["userId","collectionPath","largestBatchId"],fd=["userId","collectionGroup","largestBatchId"],hd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),dd=[].concat(Mt(hd),["documentOverlays"]),pd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vd=pd,md=[].concat(vd,["indexConfiguration","indexState","indexEntries"]),yd=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this)).ue=e,i.currentSequenceNumber=r,i}return jt(n)}(Eh);function gd(e,t){var n=Gf(e);return Nh.O(n.ue,t)}function kd(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function bd(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wd(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var _d=function(){function e(t,n){Ft(this,e),this.comparator=t,this.root=n||Sd.EMPTY}return jt(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Sd.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Sd.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new xd(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new xd(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new xd(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new xd(this.root,e,this.comparator,!0)}}]),e}(),xd=function(){function e(t,n,r,i){Ft(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return jt(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Sd=function(){function e(t,n,r,i,a){Ft(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return jt(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw qf();if(this.right.isRed())throw qf();var e=this.left.check();if(e!==this.right.check())throw qf();return e+(this.isRed()?0:1)}}]),e}();Sd.EMPTY=null,Sd.RED=!0,Sd.BLACK=!1,Sd.EMPTY=new(function(){function e(){Ft(this,e),this.size=0}return jt(e,[{key:"key",get:function(){throw qf()}},{key:"value",get:function(){throw qf()}},{key:"color",get:function(){throw qf()}},{key:"left",get:function(){throw qf()}},{key:"right",get:function(){throw qf()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Sd(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Ed=function(){function e(t){Ft(this,e),this.comparator=t,this.data=new _d(this.comparator)}return jt(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Id(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Id(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Id=function(){function e(t){Ft(this,e),this.iter=t}return jt(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Td(e){return e.hasNext()?e.getNext():void 0}var Cd=function(){function e(t){Ft(this,e),this.fields=t,t.sort(dh.comparator)}return jt(e,[{key:"unionWith",value:function(t){var n,r=new Ed(dh.comparator),i=$t(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=$t(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=$t(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return oh(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Ad=function(e){zt(n,e);var t=Gt(n);function n(){var e;return Ft(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return jt(n)}(Ht(Error));var Nd=function(e){function t(e){Ft(this,t),this.binaryString=e}return jt(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return function(e){return btoa(e)}(this.binaryString)}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return ah(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ad("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Nd.EMPTY_BYTE_STRING=new Nd("");var Pd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Od(e){if(Kf(!!e),"string"==typeof e){var t=0,n=Pd.exec(e);if(Kf(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Rd(e.seconds),nanos:Rd(e.nanos)}}function Rd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Dd(e){return"string"==typeof e?Nd.fromBase64String(e):Nd.fromUint8Array(e)}function Ld(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Md(e){var t=e.mapValue.fields.__previous_value__;return Ld(t)?Md(t):t}function Fd(e){var t=Od(e.mapValue.fields.__local_write_time__.timestampValue);return new sh(t.seconds,t.nanos)}var Ud=jt((function e(t,n,r,i,a,o,u,s,c){Ft(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),jd=function(){function e(t,n){Ft(this,e),this.projectId=t,this.database=n||"(default)"}return jt(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Vd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zd={nullValue:"NULL_VALUE"};function Bd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ld(e)?4:np(e)?9007199254740991:10:qf()}function qd(e,t){if(e===t)return!0;var n=Bd(e);if(n!==Bd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fd(e).isEqual(Fd(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Od(e.timestampValue),r=Od(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Dd(e.bytesValue).isEqual(Dd(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Rd(e.geoPointValue.latitude)===Rd(t.geoPointValue.latitude)&&Rd(e.geoPointValue.longitude)===Rd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Rd(e.integerValue)===Rd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Rd(e.doubleValue),r=Rd(t.doubleValue);return n===r?Bh(n)===Bh(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return oh(e.arrayValue.values||[],t.arrayValue.values||[],qd);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(kd(n)!==kd(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qd(n[i],r[i])))return!1;return!0}(e,t);default:return qf()}}function Kd(e,t){return void 0!==(e.values||[]).find((function(e){return qd(e,t)}))}function Gd(e,t){if(e===t)return 0;var n=Bd(e),r=Bd(t);if(n!==r)return ah(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ah(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Rd(e.integerValue||e.doubleValue),r=Rd(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Wd(e.timestampValue,t.timestampValue);case 4:return Wd(Fd(e),Fd(t));case 5:return ah(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Dd(e),r=Dd(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=ah(n[i],r[i]);if(0!==a)return a}return ah(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=ah(Rd(e.latitude),Rd(t.latitude));return 0!==n?n:ah(Rd(e.longitude),Rd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Gd(n[i],r[i]);if(a)return a}return ah(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Vd.mapValue&&t===Vd.mapValue)return 0;if(e===Vd.mapValue)return 1;if(t===Vd.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=ah(r[o],a[o]);if(0!==u)return u;var s=Gd(n[r[o]],i[a[o]]);if(0!==s)return s}return ah(r.length,a.length)}(e.mapValue,t.mapValue);default:throw qf()}}function Wd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ah(e,t);var n=Od(e),r=Od(t),i=ah(n.seconds,r.seconds);return 0!==i?i:ah(n.nanos,r.nanos)}function Hd(e){return Qd(e)}function Qd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Od(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Dd(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ph.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=$t(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Qd(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=$t(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Qd(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):qf()}function $d(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Yd(e){return!!e&&"integerValue"in e}function Jd(e){return!!e&&"arrayValue"in e}function Xd(e){return!!e&&"nullValue"in e}function Zd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ep(e){return!!e&&"mapValue"in e}function tp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return bd(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=tp(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=tp(e.arrayValue.values[r]);return n}return Object.assign({},e)}function np(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function rp(e){return"nullValue"in e?zd:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?$d(jd.empty(),ph.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:qf()}function ip(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?$d(jd.empty(),ph.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Vd:qf()}function ap(e,t){var n=Gd(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function op(e,t){var n=Gd(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var up=function(){function e(t){Ft(this,e),this.value=t}return jt(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ep(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tp(t)}},{key:"setAll",value:function(e){var t=this,n=dh.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=tp(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ep(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return qd(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ep(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){bd(t,(function(t,n){return e[t]=n}));var r,i=$t(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(tp(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function sp(e){var t=[];return bd(e.fields,(function(e,n){var r=new dh([e]);if(ep(n)){var i=sp(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=$t(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Cd(t)}var cp=function(){function e(t,n,r,i,a,o,u){Ft(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return jt(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(ch.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=up.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=up.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=ch.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,ch.min(),ch.min(),ch.min(),up.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,ch.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,ch.min(),ch.min(),up.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,ch.min(),ch.min(),up.empty(),2)}}]),e}(),lp=jt((function e(t,n){Ft(this,e),this.position=t,this.inclusive=n}));function fp(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ph.comparator(ph.fromName(o.referenceValue),n.key):Gd(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function hp(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!qd(e.position[n],t.position[n]))return!1;return!0}var dp=jt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Ft(this,e),this.field=t,this.dir=n}));function pp(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var vp=jt((function e(){Ft(this,e)})),mp=function(e){zt(n,e);var t=Gt(n);function n(e,r,i){var a;return Ft(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return jt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Gd(t,this.value)):null!==t&&Bd(this.value)===Bd(t)&&this.matchesComparison(Gd(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return qf()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Ip(e,t,r):"array-contains"===t?new Np(e,r):"in"===t?new Pp(e,r):"not-in"===t?new Op(e,r):"array-contains-any"===t?new Rp(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Tp(e,n):new Cp(e,n)}}]),n}(vp),yp=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return jt(n,[{key:"matches",value:function(e){return gp(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=$t(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(vp);function gp(e){return"and"===e.op}function kp(e){return"or"===e.op}function bp(e){return wp(e)&&gp(e)}function wp(e){var t,n=$t(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof yp)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function _p(e){if(e instanceof mp)return e.field.canonicalString()+e.op.toString()+Hd(e.value);if(bp(e))return e.filters.map((function(e){return _p(e)})).join(",");var t=e.filters.map((function(e){return _p(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function xp(e,t){return e instanceof mp?function(e,t){return t instanceof mp&&e.op===t.op&&e.field.isEqual(t.field)&&qd(e.value,t.value)}(e,t):e instanceof yp?function(e,t){return t instanceof yp&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&xp(n,t.filters[r])}),!0)}(e,t):void qf()}function Sp(e,t){var n=e.filters.concat(t);return yp.create(n,e.op)}function Ep(e){return e instanceof mp?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Hd(e.value))}(e):e instanceof yp?function(e){return e.op.toString()+" {"+e.getFilters().map(Ep).join(" ,")+"}"}(e):"Filter"}var Ip=function(e){zt(n,e);var t=Gt(n);function n(e,r,i){var a;return Ft(this,n),(a=t.call(this,e,r,i)).key=ph.fromName(i.referenceValue),a}return jt(n,[{key:"matches",value:function(e){var t=ph.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(mp),Tp=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this,e,"in",r)).keys=Ap("in",r),i}return jt(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(mp),Cp=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this,e,"not-in",r)).keys=Ap("not-in",r),i}return jt(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(mp);function Ap(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ph.fromName(e.referenceValue)}))}var Np=function(e){zt(n,e);var t=Gt(n);function n(e,r){return Ft(this,n),t.call(this,e,"array-contains",r)}return jt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Jd(t)&&Kd(t.arrayValue,this.value)}}]),n}(mp),Pp=function(e){zt(n,e);var t=Gt(n);function n(e,r){return Ft(this,n),t.call(this,e,"in",r)}return jt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Kd(this.value.arrayValue,t)}}]),n}(mp),Op=function(e){zt(n,e);var t=Gt(n);function n(e,r){return Ft(this,n),t.call(this,e,"not-in",r)}return jt(n,[{key:"matches",value:function(e){if(Kd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Kd(this.value.arrayValue,t)}}]),n}(mp),Rp=function(e){zt(n,e);var t=Gt(n);function n(e,r){return Ft(this,n),t.call(this,e,"array-contains-any",r)}return jt(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Jd(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Kd(t.value.arrayValue,e)}))}}]),n}(mp),Dp=jt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Ft(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.he=null}));function Lp(e){return new Dp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Mp(e){var t=Gf(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return _p(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),zh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Hd(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Hd(e)})).join(",")),t.he=n}return t.he}function Fp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!pp(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!xp(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!hp(e.startAt,t.startAt)&&hp(e.endAt,t.endAt)}function Up(e){return ph.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function jp(e,t){return e.filters.filter((function(e){return e instanceof mp&&e.field.isEqual(t)}))}function Vp(e,t,n){var r,i=zd,a=!0,o=$t(jp(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=zd,c=!0;switch(u.op){case"<":case"<=":s=rp(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=zd}ap({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];ap({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function zp(e,t,n){var r,i=Vd,a=!0,o=$t(jp(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Vd,c=!0;switch(u.op){case">=":case">":s=ip(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Vd}op({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];op({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Bp=jt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ft(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}));function qp(e,t,n,r,i,a,o,u){return new Bp(e,t,n,r,i,a,o,u)}function Kp(e){return new Bp(e)}function Gp(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Wp(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Hp(e){var t,n=$t(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Qp(e){return null!==e.collectionGroup}function $p(e){var t=Gf(e);if(null===t.Pe){t.Pe=[];var n=Hp(t),r=Wp(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new dp(n)),t.Pe.push(new dp(dh.keyField(),"asc"));else{var i,a=!1,o=$t(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.Pe.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new dp(dh.keyField(),s))}}}return t.Pe}function Yp(e){var t=Gf(e);return t.Ie||(t.Ie=Jp(t,$p(e))),t.Ie}function Jp(e,t){if("F"===e.limitType)return Lp(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new dp(e.field,t)}));var n=e.endAt?new lp(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new lp(e.startAt.position,e.startAt.inclusive):null;return Lp(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function Xp(e,t){t.getFirstInequalityField(),Hp(e);var n=e.filters.concat([t]);return new Bp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Zp(e,t,n){return new Bp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ev(e,t){return Fp(Yp(e),Yp(t))&&e.limitType===t.limitType}function tv(e){return"".concat(Mp(Yp(e)),"|lt:").concat(e.limitType)}function nv(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Ep(e)})).join(", "),"]")),zh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Hd(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Hd(e)})).join(",")),"Target(".concat(t,")")}(Yp(e)),"; limitType=").concat(e.limitType,")")}function rv(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ph.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=$t($p(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=$t(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=fp(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,$p(e),t))&&!(e.endAt&&!function(e,t,n){var r=fp(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,$p(e),t))}(e,t)}function iv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function av(e){return function(t,n){var r,i=!1,a=$t($p(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=ov(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function ov(e,t,n){var r=e.field.isKeyField()?ph.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Gd(r,i):qf()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return qf()}}var uv=function(){function e(t,n){Ft(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return jt(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=$t(n);try{for(i.s();!(r=i.n()).done;){var a=Dt(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){bd(this.inner,(function(t,n){var r,i=$t(n);try{for(i.s();!(r=i.n()).done;){var a=Dt(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return wd(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),sv=new _d(ph.comparator);function cv(){return sv}var lv=new _d(ph.comparator);function fv(){for(var e=lv,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function hv(e){var t=lv;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function dv(){return vv()}function pv(){return vv()}function vv(){return new uv((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var mv=new _d(ph.comparator),yv=new Ed(ph.comparator);function gv(){for(var e=yv,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var kv=new Ed(ah);function bv(){return kv}function wv(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bh(t)?"-0":t}}function _v(e){return{integerValue:""+e}}function xv(e,t){return qh(t)?_v(t):wv(e,t)}var Sv=jt((function e(){Ft(this,e),this._=void 0}));function Ev(e,t,n){return e instanceof Cv?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ld(t)&&(t=Md(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Av?Nv(e,t):e instanceof Pv?Ov(e,t):function(e,t){var n=Tv(e,t),r=Dv(n)+Dv(e.Te);return Yd(n)&&Yd(e.Te)?_v(r):wv(e.serializer,r)}(e,t)}function Iv(e,t,n){return e instanceof Av?Nv(e,t):e instanceof Pv?Ov(e,t):n}function Tv(e,t){return e instanceof Rv?function(e){return Yd(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var Cv=function(e){zt(n,e);var t=Gt(n);function n(){return Ft(this,n),t.apply(this,arguments)}return jt(n)}(Sv),Av=function(e){zt(n,e);var t=Gt(n);function n(e){var r;return Ft(this,n),(r=t.call(this)).elements=e,r}return jt(n)}(Sv);function Nv(e,t){var n,r=Lv(t),i=$t(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return qd(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Pv=function(e){zt(n,e);var t=Gt(n);function n(e){var r;return Ft(this,n),(r=t.call(this)).elements=e,r}return jt(n)}(Sv);function Ov(e,t){var n,r=Lv(t),i=$t(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!qd(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Rv=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this)).serializer=e,i.Te=r,i}return jt(n)}(Sv);function Dv(e){return Rd(e.integerValue||e.doubleValue)}function Lv(e){return Jd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Mv=jt((function e(t,n){Ft(this,e),this.field=t,this.transform=n}));var Fv=jt((function e(t,n){Ft(this,e),this.version=t,this.transformResults=n})),Uv=function(){function e(t,n){Ft(this,e),this.updateTime=t,this.exists=n}return jt(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function jv(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Vv=jt((function e(){Ft(this,e)}));function zv(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Zv(e.key,Uv.none()):new Wv(e.key,e.data,Uv.none());var n,r=e.data,i=up.empty(),a=new Ed(dh.comparator),o=$t(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Hv(e.key,i,new Cd(a.toArray()),Uv.none())}function Bv(e,t,n){e instanceof Wv?function(e,t,n){var r=e.value.clone(),i=$v(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Hv?function(e,t,n){if(jv(e.precondition,t)){var r=$v(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Qv(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function qv(e,t,n,r){return e instanceof Wv?function(e,t,n,r){if(!jv(e.precondition,t))return n;var i=e.value.clone(),a=Yv(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Hv?function(e,t,n,r){if(!jv(e.precondition,t))return n;var i=Yv(e.fieldTransforms,r,t),a=t.data;return a.setAll(Qv(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return jv(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Kv(e,t){var n,r=null,i=$t(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Tv(a.transform,o||null);null!=u&&(null===r&&(r=up.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Gv(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&oh(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Av&&t instanceof Av||e instanceof Pv&&t instanceof Pv?oh(e.elements,t.elements,qd):e instanceof Rv&&t instanceof Rv?qd(e.Te,t.Te):e instanceof Cv&&t instanceof Cv}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Wv=function(e){zt(n,e);var t=Gt(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Ft(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return jt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Vv),Hv=function(e){zt(n,e);var t=Gt(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Ft(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return jt(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Vv);function Qv(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function $v(e,t,n){var r=new Map;Kf(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Iv(o,u,n[i]))}return r}function Yv(e,t,n){var r,i=new Map,a=$t(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Ev(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Jv,Xv,Zv=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return jt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Vv),em=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return jt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Vv),tm=function(){function e(t,n,r,i){Ft(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return jt(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Bv(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=$t(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=qv(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=$t(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=qv(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=pv();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=zv(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(ch.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),gv())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&oh(this.mutations,e.mutations,(function(e,t){return Gv(e,t)}))&&oh(this.baseMutations,e.baseMutations,(function(e,t){return Gv(e,t)}))}}]),e}(),nm=function(){function e(t,n,r,i){Ft(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return jt(e,null,[{key:"from",value:function(t,n,r){Kf(t.mutations.length===r.length);for(var i=mv,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),rm=function(){function e(t,n){Ft(this,e),this.largestBatchId=t,this.mutation=n}return jt(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),im=jt((function e(t,n){Ft(this,e),this.count=t,this.unchangedNames=n}));function am(e){switch(e){default:return qf();case Wf.CANCELLED:case Wf.UNKNOWN:case Wf.DEADLINE_EXCEEDED:case Wf.RESOURCE_EXHAUSTED:case Wf.INTERNAL:case Wf.UNAVAILABLE:case Wf.UNAUTHENTICATED:return!1;case Wf.INVALID_ARGUMENT:case Wf.NOT_FOUND:case Wf.ALREADY_EXISTS:case Wf.PERMISSION_DENIED:case Wf.FAILED_PRECONDITION:case Wf.ABORTED:case Wf.OUT_OF_RANGE:case Wf.UNIMPLEMENTED:case Wf.DATA_LOSS:return!0}}function om(e){if(void 0===e)return Vf("GRPC error has no .code"),Wf.UNKNOWN;switch(e){case Jv.OK:return Wf.OK;case Jv.CANCELLED:return Wf.CANCELLED;case Jv.UNKNOWN:return Wf.UNKNOWN;case Jv.DEADLINE_EXCEEDED:return Wf.DEADLINE_EXCEEDED;case Jv.RESOURCE_EXHAUSTED:return Wf.RESOURCE_EXHAUSTED;case Jv.INTERNAL:return Wf.INTERNAL;case Jv.UNAVAILABLE:return Wf.UNAVAILABLE;case Jv.UNAUTHENTICATED:return Wf.UNAUTHENTICATED;case Jv.INVALID_ARGUMENT:return Wf.INVALID_ARGUMENT;case Jv.NOT_FOUND:return Wf.NOT_FOUND;case Jv.ALREADY_EXISTS:return Wf.ALREADY_EXISTS;case Jv.PERMISSION_DENIED:return Wf.PERMISSION_DENIED;case Jv.FAILED_PRECONDITION:return Wf.FAILED_PRECONDITION;case Jv.ABORTED:return Wf.ABORTED;case Jv.OUT_OF_RANGE:return Wf.OUT_OF_RANGE;case Jv.UNIMPLEMENTED:return Wf.UNIMPLEMENTED;case Jv.DATA_LOSS:return Wf.DATA_LOSS;default:return qf()}}(Xv=Jv||(Jv={}))[Xv.OK=0]="OK",Xv[Xv.CANCELLED=1]="CANCELLED",Xv[Xv.UNKNOWN=2]="UNKNOWN",Xv[Xv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xv[Xv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xv[Xv.NOT_FOUND=5]="NOT_FOUND",Xv[Xv.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xv[Xv.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xv[Xv.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xv[Xv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xv[Xv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xv[Xv.ABORTED=10]="ABORTED",Xv[Xv.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xv[Xv.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xv[Xv.INTERNAL=13]="INTERNAL",Xv[Xv.UNAVAILABLE=14]="UNAVAILABLE",Xv[Xv.DATA_LOSS=15]="DATA_LOSS";var um=null;function sm(){return new TextEncoder}var cm=new Rf([4294967295,4294967295],0);function lm(e){var t=sm().encode(e),n=new Of;return n.update(t),new Uint8Array(n.digest())}function fm(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Rf([n,r],0),new Rf([i,a],0)]}var hm=function(){function e(t,n,r){if(Ft(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new dm("Invalid padding: ".concat(n));if(r<0)throw new dm("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new dm("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new dm("Invalid padding when bitmap length is 0: ".concat(n));this.Ae=8*t.length-n,this.Re=Rf.fromNumber(this.Ae)}return jt(e,[{key:"Ve",value:function(e,t,n){var r=e.add(t.multiply(Rf.fromNumber(n)));return 1===r.compare(cm)&&(r=new Rf([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Re).toNumber()}},{key:"me",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Ae)return!1;for(var t=Dt(fm(lm(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ve(n,r,i);if(!this.me(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Ae)for(var t=Dt(fm(lm(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ve(n,r,i);this.fe(a)}}},{key:"fe",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),dm=function(e){zt(n,e);var t=Gt(n);function n(){var e;return Ft(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return jt(n)}(Ht(Error)),pm=function(){function e(t,n,r,i,a){Ft(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return jt(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,vm.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(ch.min(),i,new _d(ah),cv(),gv())}}]),e}(),vm=function(){function e(t,n,r,i,a){Ft(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return jt(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,gv(),gv(),gv())}}]),e}(),mm=jt((function e(t,n,r,i){Ft(this,e),this.ge=t,this.removedTargetIds=n,this.key=r,this.pe=i})),ym=jt((function e(t,n){Ft(this,e),this.targetId=t,this.ye=n})),gm=jt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nd.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Ft(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),km=function(){function e(){Ft(this,e),this.we=0,this.Se=_m(),this.be=Nd.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}return jt(e,[{key:"current",get:function(){return this.De}},{key:"resumeToken",get:function(){return this.be}},{key:"ve",get:function(){return 0!==this.we}},{key:"Fe",get:function(){return this.Ce}},{key:"Me",value:function(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}},{key:"xe",value:function(){var e=gv(),t=gv(),n=gv();return this.Se.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:qf()}})),new vm(this.be,this.De,e,t,n)}},{key:"Oe",value:function(){this.Ce=!1,this.Se=_m()}},{key:"Ne",value:function(e,t){this.Ce=!0,this.Se=this.Se.insert(e,t)}},{key:"Be",value:function(e){this.Ce=!0,this.Se=this.Se.remove(e)}},{key:"Le",value:function(){this.we+=1}},{key:"ke",value:function(){this.we-=1}},{key:"qe",value:function(){this.Ce=!0,this.De=!0}}]),e}(),bm=function(){function e(t){Ft(this,e),this.Qe=t,this.Ke=new Map,this.$e=cv(),this.Ue=wm(),this.We=new _d(ah)}return jt(e,[{key:"Ge",value:function(e){var t,n=$t(e.ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.pe&&e.pe.isFoundDocument()?this.ze(r,e.pe):this.je(r,e.key,e.pe)}}catch(u){n.e(u)}finally{n.f()}var i,a=$t(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.je(o,e.key,e.pe)}}catch(u){a.e(u)}finally{a.f()}}},{key:"He",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Je(n);switch(e.state){case 0:t.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||t.removeTarget(n);break;case 3:t.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:t.Ye(n)&&(t.Ze(n),r.Me(e.resumeToken));break;default:qf()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ke.forEach((function(e,r){n.Ye(r)&&t(r)}))}},{key:"Xe",value:function(e){var t=e.targetId,n=e.ye.count,r=this.et(t);if(r){var i=r.target;if(Up(i))if(0===n){var a=new ph(i.path);this.je(t,a,cp.newNoDocument(a,ch.min()))}else Kf(1===n);else{var o=this.tt(t);if(o!==n){var u=this.nt(e),s=u?this.rt(u,e,o):1;if(0!==s){this.Ze(t);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(t,c)}null==um||um.it(function(e,t,n,r,i){var a,o,u,s,c,l,f={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(f.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===(u=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===u?void 0:u.length)&&void 0!==s?s:0,padding:null!==(l=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),f}(o,e.ye,this.Qe.st(),u,s))}}}}},{key:"nt",value:function(e){var t=e.ye.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,u=i.padding,s=void 0===u?0:u,c=t.hashCount,l=void 0===c?0:c;try{n=Dd(o).toUint8Array()}catch(e){if(e instanceof Ad)return zf("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new hm(n,s,l)}catch(e){return zf(e instanceof dm?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Ae?null:r}},{key:"rt",value:function(e,t,n){return t.ye.count===n-this.ot(e,t.targetId)?0:2}},{key:"ot",value:function(e,t){var n=this,r=this.Qe.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.Qe.st(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.je(t,r,null),i++)})),i}},{key:"_t",value:function(e){var t=this,n=new Map;this.Ke.forEach((function(r,i){var a=t.et(i);if(a){if(r.current&&Up(a.target)){var o=new ph(a.target.path);null!==t.$e.get(o)||t.ut(i,o)||t.je(i,o,cp.newNoDocument(o,e))}r.Fe&&(n.set(i,r.xe()),r.Oe())}}));var r=gv();this.Ue.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.et(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$e.forEach((function(t,n){return n.setReadTime(e)}));var i=new pm(e,n,this.We,this.$e,r);return this.$e=cv(),this.Ue=wm(),this.We=new _d(ah),i}},{key:"ze",value:function(e,t){if(this.Ye(e)){var n=this.ut(e,t.key)?2:0;this.Je(e).Ne(t.key,n),this.$e=this.$e.insert(t.key,t),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}}},{key:"je",value:function(e,t,n){if(this.Ye(e)){var r=this.Je(e);this.ut(e,t)?r.Ne(t,1):r.Be(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),n&&(this.$e=this.$e.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ke.delete(e)}},{key:"tt",value:function(e){var t=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Le",value:function(e){this.Je(e).Le()}},{key:"Je",value:function(e){var t=this.Ke.get(e);return t||(t=new km,this.Ke.set(e,t)),t}},{key:"ct",value:function(e){var t=this.Ue.get(e);return t||(t=new Ed(ah),this.Ue=this.Ue.insert(e,t)),t}},{key:"Ye",value:function(e){var t=null!==this.et(e);return t||jf("WatchChangeAggregator","Detected inactive target",e),t}},{key:"et",value:function(e){var t=this.Ke.get(e);return t&&t.ve?null:this.Qe.lt(e)}},{key:"Ze",value:function(e){var t=this;this.Ke.set(e,new km),this.Qe.getRemoteKeysForTarget(e).forEach((function(n){t.je(e,n,null)}))}},{key:"ut",value:function(e,t){return this.Qe.getRemoteKeysForTarget(e).has(t)}}]),e}();function wm(){return new _d(ph.comparator)}function _m(){return new _d(ph.comparator)}var xm={asc:"ASCENDING",desc:"DESCENDING"},Sm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Em={and:"AND",or:"OR"},Im=jt((function e(t,n){Ft(this,e),this.databaseId=t,this.useProto3Json=n}));function Tm(e,t){return e.useProto3Json||zh(t)?t:{value:t}}function Cm(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Am(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Nm(e,t){return Cm(e,t.toTimestamp())}function Pm(e){return Kf(!!e),ch.fromTimestamp(function(e){var t=Od(e);return new sh(t.seconds,t.nanos)}(e))}function Om(e,t){return function(e){return new fh(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Rm(e){var t=fh.fromString(e);return Kf(ny(t)),t}function Dm(e,t){return Om(e.databaseId,t.path)}function Lm(e,t){var n=Rm(t);if(n.get(1)!==e.databaseId.projectId)throw new Hf(Wf.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Hf(Wf.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ph(jm(n))}function Mm(e,t){return Om(e.databaseId,t)}function Fm(e){var t=Rm(e);return 4===t.length?fh.emptyPath():jm(t)}function Um(e){return new fh(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jm(e){return Kf(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Vm(e,t,n){return{name:Dm(e,t),fields:n.value.mapValue.fields}}function zm(e,t,n){var r=Lm(e,t.name),i=Pm(t.updateTime),a=t.createTime?Pm(t.createTime):ch.min(),o=new up({mapValue:{fields:t.fields}}),u=cp.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Bm(e,t){return"found"in t?function(e,t){Kf(!!t.found),t.found.name,t.found.updateTime;var n=Lm(e,t.found.name),r=Pm(t.found.updateTime),i=t.found.createTime?Pm(t.found.createTime):ch.min(),a=new up({mapValue:{fields:t.found.fields}});return cp.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Kf(!!t.missing),Kf(!!t.readTime);var n=Lm(e,t.missing),r=Pm(t.readTime);return cp.newNoDocument(n,r)}(e,t):qf()}function qm(e,t){var n;if(t instanceof Wv)n={update:Vm(e,t.key,t.value)};else if(t instanceof Zv)n={delete:Dm(e,t.key)};else if(t instanceof Hv)n={update:Vm(e,t.key,t.data),updateMask:ty(t.fieldMask)};else{if(!(t instanceof em))return qf();n={verify:Dm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Cv)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Av)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Pv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Rv)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw qf()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Nm(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:qf()}(e,t.precondition)),n}function Km(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Uv.updateTime(Pm(e.updateTime)):void 0!==e.exists?Uv.exists(e.exists):Uv.none()}(t.currentDocument):Uv.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Kf("REQUEST_TIME"===t.setToServerValue),n=new Cv;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Av(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Pv(i)}else"increment"in t?n=new Rv(e,t.increment):qf();var a=dh.fromServerFormat(t.fieldPath);return new Mv(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Lm(e,t.update.name),a=new up({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Cd(t.map((function(e){return dh.fromServerFormat(e)})))}(t.updateMask);return new Hv(i,a,o,n,r)}return new Wv(i,a,n,r)}if(t.delete){var u=Lm(e,t.delete);return new Zv(u,n)}if(t.verify){var s=Lm(e,t.verify);return new em(s,n)}return qf()}function Gm(e,t){return{documents:[Mm(e,t.path)]}}function Wm(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Mm(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Mm(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return ey(yp.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Xm(e.field),direction:$m(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=Tm(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Hm(e){var t=Fm(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Kf(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Qm(e);return t instanceof yp&&bp(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new dp(Zm(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return zh(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new lp(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new lp(n,t)}(n.endAt)),qp(t,i,u,o,s,"F",c,l)}function Qm(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Zm(e.unaryFilter.field);return mp.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Zm(e.unaryFilter.field);return mp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Zm(e.unaryFilter.field);return mp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Zm(e.unaryFilter.field);return mp.create(i,"!=",{nullValue:"NULL_VALUE"});default:return qf()}}(e):void 0!==e.fieldFilter?function(e){return mp.create(Zm(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return qf()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return yp.create(e.compositeFilter.filters.map((function(e){return Qm(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return qf()}}(e.compositeFilter.op))}(e):qf()}function $m(e){return xm[e]}function Ym(e){return Sm[e]}function Jm(e){return Em[e]}function Xm(e){return{fieldPath:e.canonicalString()}}function Zm(e){return dh.fromServerFormat(e.fieldPath)}function ey(e){return e instanceof mp?function(e){if("=="===e.op){if(Zd(e.value))return{unaryFilter:{field:Xm(e.field),op:"IS_NAN"}};if(Xd(e.value))return{unaryFilter:{field:Xm(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Zd(e.value))return{unaryFilter:{field:Xm(e.field),op:"IS_NOT_NAN"}};if(Xd(e.value))return{unaryFilter:{field:Xm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xm(e.field),op:Ym(e.op),value:e.value}}}(e):e instanceof yp?function(e){var t=e.getFilters().map((function(e){return ey(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Jm(e.op),filters:t}}}(e):qf()}function ty(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function ny(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var ry=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ch.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ch.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Nd.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ft(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return jt(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),iy=jt((function e(t){Ft(this,e),this.ht=t}));function ay(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:oy(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Dm(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Cm(e,t.version.toTimestamp()),createTime:Cm(e,t.createTime.toTimestamp())}}(e.ht,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:uy(t.version)};else{if(!t.isUnknownDocument())return qf();r.unknownDocument={path:n.path.toArray(),version:uy(t.version)}}return r}function oy(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function uy(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function sy(e){var t=new sh(e.seconds,e.nanoseconds);return ch.fromTimestamp(t)}function cy(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Km(e.ht,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Km(e.ht,t)})),u=sh.fromMillis(t.localWriteTimeMs);return new tm(t.batchId,u,n,o)}function ly(e){var t,n=sy(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?sy(e.lastLimboFreeSnapshotVersion):ch.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return Kf(1===e.documents.length),Yp(Kp(Fm(e.documents[0])))}(e.query):function(e){return Yp(Hm(e))}(e.query),new ry(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,Nd.fromBase64String(e.resumeToken))}function fy(e,t){var n,r=uy(t.snapshotVersion),i=uy(t.lastLimboFreeSnapshotVersion);n=Up(t.target)?Gm(e.ht,t.target):Wm(e.ht,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Mp(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function hy(e){var t=Hm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Zp(t,t.limit,"L"):t}function dy(e,t){return new rm(t.largestBatchId,Km(e.ht,t.overlayMutation))}function py(e,t){var n=t.path.lastSegment();return[e,Kh(t.path.popLast()),n]}function vy(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:uy(r.readTime),documentKey:Kh(r.documentKey.path),largestBatchId:r.largestBatchId}}var my=function(){function e(){Ft(this,e)}return jt(e,[{key:"getBundleMetadata",value:function(e,t){return yy(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:sy(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return yy(e).put(function(e){return{bundleId:e.id,createTime:uy(Pm(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return gy(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:hy(e.bundledQuery),readTime:sy(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return gy(e).put(function(e){return{name:e.name,readTime:uy(Pm(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function yy(e){return gd(e,"bundles")}function gy(e){return gd(e,"namedQueries")}var ky=function(){function e(t,n){Ft(this,e),this.serializer=t,this.userId=n}return jt(e,[{key:"getOverlay",value:function(e,t){var n=this;return by(e).get(py(this.userId,t)).next((function(e){return e?dy(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=dv();return Ch.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new rm(t,a);i.push(r.It(e,o))})),Ch.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Kh(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(by(e).J("collectionPathOverlayIndex",i))})),Ch.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=dv(),a=Kh(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return by(e).G("collectionPathOverlayIndex",o).next((function(e){var t,n=$t(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=dy(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=dv(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return by(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=dy(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"It",value:function(e,t){return by(e).put(function(e,t,n){var r=Dt(py(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:qm(e.ht,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"Pt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function by(e){return gd(e,"documentOverlays")}var wy=function(){function e(){Ft(this,e)}return jt(e,[{key:"dt",value:function(e,t){this.Tt(e,t),t.Et()}},{key:"Tt",value:function(e,t){if("nullValue"in e)this.At(t,5);else if("booleanValue"in e)this.At(t,10),t.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(t,15),t.Rt(Rd(e.integerValue));else if("doubleValue"in e){var n=Rd(e.doubleValue);isNaN(n)?this.At(t,13):(this.At(t,15),Bh(n)?t.Rt(0):t.Rt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.At(t,20),"string"==typeof r?t.Vt(r):(t.Vt("".concat(r.seconds||"")),t.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,t),this.gt(t);else if("bytesValue"in e)this.At(t,30),t.yt(Dd(e.bytesValue)),this.gt(t);else if("referenceValue"in e)this.wt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.At(t,45),t.Rt(i.latitude||0),t.Rt(i.longitude||0)}else"mapValue"in e?np(e)?this.At(t,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,t),this.gt(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.gt(t)):qf()}},{key:"ft",value:function(e,t){this.At(t,25),this.Dt(e,t)}},{key:"Dt",value:function(e,t){t.Vt(e)}},{key:"St",value:function(e,t){var n=e.fields||{};this.At(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.ft(a,t),this.Tt(n[a],t)}}},{key:"bt",value:function(e,t){var n=e.values||[];this.At(t,50);var r,i=$t(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Tt(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"wt",value:function(e,t){var n=this;this.At(t,37),ph.fromName(e).path.forEach((function(e){n.At(t,60),n.Dt(e,t)}))}},{key:"At",value:function(e,t){e.Rt(t)}},{key:"gt",value:function(e){e.Rt(2)}}]),e}();function _y(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function xy(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=_y(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}wy.Ct=new wy;var Sy=function(){function e(){Ft(this,e),this.buffer=new Uint8Array(1024),this.position=0}return jt(e,[{key:"vt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ft(n.value),n=t.next();this.Mt()}},{key:"xt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ot(n.value),n=t.next();this.Nt()}},{key:"Bt",value:function(e){var t,n=$t(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{var a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Mt()}},{key:"Lt",value:function(e){var t,n=$t(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{var a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Nt()}},{key:"kt",value:function(e){var t=this.qt(e),n=xy(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Kt",value:function(e){var t=this.qt(e),n=xy(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"Wt",value:function(){this.Gt(255),this.Gt(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"zt",value:function(){return this.buffer.slice(0,this.position)}},{key:"qt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ft",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}},{key:"Ot",value:function(e){var t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}},{key:"Mt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Nt",value:function(){this.Gt(0),this.Gt(1)}},{key:"Ut",value:function(e){this.Qt(1),this.buffer[this.position++]=e}},{key:"Gt",value:function(e){this.Qt(1),this.buffer[this.position++]=~e}},{key:"Qt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Ey=function(){function e(t){Ft(this,e),this.jt=t}return jt(e,[{key:"yt",value:function(e){this.jt.vt(e)}},{key:"Vt",value:function(e){this.jt.Bt(e)}},{key:"Rt",value:function(e){this.jt.kt(e)}},{key:"Et",value:function(){this.jt.$t()}}]),e}(),Iy=function(){function e(t){Ft(this,e),this.jt=t}return jt(e,[{key:"yt",value:function(e){this.jt.xt(e)}},{key:"Vt",value:function(e){this.jt.Lt(e)}},{key:"Rt",value:function(e){this.jt.Kt(e)}},{key:"Et",value:function(){this.jt.Wt()}}]),e}(),Ty=function(){function e(){Ft(this,e),this.jt=new Sy,this.Ht=new Ey(this.jt),this.Jt=new Iy(this.jt)}return jt(e,[{key:"seed",value:function(e){this.jt.seed(e)}},{key:"Yt",value:function(e){return 0===e?this.Ht:this.Jt}},{key:"zt",value:function(){return this.jt.zt()}},{key:"reset",value:function(){this.jt.reset()}}]),e}(),Cy=function(){function e(t,n,r,i){Ft(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return jt(e,[{key:"Zt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Ay(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Ny(e.arrayValue,t.arrayValue))?n:0!==(n=Ny(e.directionalValue,t.directionalValue))?n:ph.comparator(e.documentKey,t.documentKey)}function Ny(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Py=function(){function e(t){Ft(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Xt=t.orderBy,this.en=[];var n,r=$t(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.tn=i:this.en.push(i)}}catch(a){r.e(a)}finally{r.f()}}return jt(e,[{key:"nn",value:function(e){Kf(e.collectionGroup===this.collectionId);var t=mh(e);if(void 0!==t&&!this.rn(t))return!1;for(var n=yh(e),r=new Set,i=0,a=0;i<n.length&&this.rn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.tn){if(!r.has(this.tn.field.canonicalString())){var o=n[i];if(!this.sn(this.tn,o)||!this.on(this.Xt[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Xt.length||!this.on(this.Xt[a++],u))return!1}return!0}},{key:"_n",value:function(){var e,t=new Ed(dh.comparator),n=[],r=$t(this.en);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)n.push(new gh(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),n.push(new gh(i.field,0))}}}catch(s){r.e(s)}finally{r.f()}var a,o=$t(this.Xt);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||t.has(u.field)||(t=t.add(u.field),n.push(new gh(u.field,"asc"===u.dir?0:1)))}}catch(s){o.e(s)}finally{o.f()}return new vh(vh.UNKNOWN_ID,this.collectionId,n,kh.empty())}},{key:"rn",value:function(e){var t,n=$t(this.en);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.sn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"sn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"on",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Oy(e){var t,n;if(Kf(e instanceof mp||e instanceof yp),e instanceof mp){if(e instanceof Pp){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return mp.create(e.field,"==",t)})))||[];return yp.create(r,"or")}return e}var i=e.filters.map((function(e){return Oy(e)}));return yp.create(i,e.op)}function Ry(e){if(0===e.getFilters().length)return[];var t=Fy(Oy(e));return Kf(My(t)),Dy(t)||Ly(t)?[t]:t.getFilters()}function Dy(e){return e instanceof mp}function Ly(e){return e instanceof yp&&bp(e)}function My(e){return Dy(e)||Ly(e)||function(e){if(e instanceof yp&&kp(e)){var t,n=$t(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Dy(r)&&!Ly(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Fy(e){if(Kf(e instanceof mp||e instanceof yp),e instanceof mp)return e;if(1===e.filters.length)return Fy(e.filters[0]);var t=e.filters.map((function(e){return Fy(e)})),n=yp.create(t,e.op);return My(n=Vy(n))?n:(Kf(n instanceof yp),Kf(gp(n)),Kf(n.filters.length>1),n.filters.reduce((function(e,t){return Uy(e,t)})))}function Uy(e,t){var n;return Kf(e instanceof mp||e instanceof yp),Kf(t instanceof mp||t instanceof yp),n=e instanceof mp?t instanceof mp?function(e,t){return yp.create([e,t],"and")}(e,t):jy(e,t):t instanceof mp?jy(t,e):function(e,t){if(Kf(e.filters.length>0&&t.filters.length>0),gp(e)&&gp(t))return Sp(e,t.getFilters());var n=kp(e)?e:t,r=kp(e)?t:e,i=n.filters.map((function(e){return Uy(e,r)}));return yp.create(i,"or")}(e,t),Vy(n)}function jy(e,t){if(gp(t))return Sp(t,e.getFilters());var n=t.filters.map((function(t){return Uy(e,t)}));return yp.create(n,"or")}function Vy(e){if(Kf(e instanceof mp||e instanceof yp),e instanceof mp)return e;var t=e.getFilters();if(1===t.length)return Vy(t[0]);if(wp(e))return e;var n=t.map((function(e){return Vy(e)})),r=[];return n.forEach((function(t){t instanceof mp?r.push(t):t instanceof yp&&(t.op===e.op?r.push.apply(r,Mt(t.filters)):r.push(t))})),1===r.length?r[0]:yp.create(r,e.op)}var zy=function(){function e(){Ft(this,e),this.an=new By}return jt(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.an.add(t),Ch.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ch.resolve(this.an.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ch.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ch.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return Ch.resolve()}},{key:"createTargetIndexes",value:function(e,t){return Ch.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Ch.resolve(null)}},{key:"getIndexType",value:function(e,t){return Ch.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Ch.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ch.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Ch.resolve(_h.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Ch.resolve(_h.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Ch.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ch.resolve()}}]),e}(),By=function(){function e(){Ft(this,e),this.index={}}return jt(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ed(fh.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Ed(fh.comparator)).toArray()}}]),e}(),qy=new Uint8Array(0),Ky=function(){function e(t,n){Ft(this,e),this.user=t,this.databaseId=n,this.un=new By,this.cn=new uv((function(e){return Mp(e)}),(function(e,t){return Fp(e,t)})),this.uid=t.uid||""}return jt(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.un.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.un.add(t)}));var a={collectionId:r,parent:Kh(i)};return Gy(e).put(a)}return Ch.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[uh(t),""],!1,!0);return Gy(e).G(r).next((function(e){var r,i=$t(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Hh(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Hy(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Qy(e);return a.next((function(e){o.put(vy(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Hy(e),r=Qy(e),i=Wy(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"deleteAllFieldIndexes",value:function(e){var t=Hy(e),n=Wy(e),r=Qy(e);return t.J().next((function(){return n.J()})).next((function(){return r.J()}))}},{key:"createTargetIndexes",value:function(e,t){var n=this;return Ch.forEach(this.ln(t),(function(t){return n.getIndexType(e,t).next((function(r){if(0===r||1===r){var i=new Py(t);return n.addFieldIndex(e,i._n())}}))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Wy(e),i=!0,a=new Map;return Ch.forEach(this.ln(t),(function(t){return n.hn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=gv(),o=[];return Ch.forEach(a,(function(i,a){jf("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(Mp(t)));var u=function(e,t){var n=mh(t);if(void 0===n)return null;var r,i=$t(jp(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=$t(yh(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=$t(jp(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=$t(yh(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Vp(e,o.fieldPath,e.startAt):zp(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new lp(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=$t(yh(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?zp(e,o.fieldPath,e.endAt):Vp(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new lp(r,i)}(a,i),f=n.Pn(i,a,c),h=n.Pn(i,a,l),d=n.In(i,a,s),p=n.dn(i.indexId,u,f,c.inclusive,h,l.inclusive,d);return Ch.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=ph.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Ch.resolve(null)}))}},{key:"ln",value:function(e){var t=this.cn.get(e);return t||(t=0===e.filters.length?[e]:Ry(yp.create(e.filters,"and")).map((function(t){return Lp(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.cn.set(e,t),t)}},{key:"dn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.Tn(t[h/c]):qy,f=u.En(e,s,n[h%c],r),d=u.An(e,s,i[h%c],a),p=o.map((function(t){return u.En(e,s,t,!0)}));l.push.apply(l,Mt(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"En",value:function(e,t,n,r){var i=new Cy(e,ph.empty(),t,n);return r?i:i.Zt()}},{key:"An",value:function(e,t,n,r){var i=new Cy(e,ph.empty(),t,n);return r?i.Zt():i}},{key:"hn",value:function(e,t){var n=new Py(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=$t(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.nn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.ln(t);return Ch.forEach(i,(function(t){return n.hn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Ed(dh.comparator),r=!1,i=$t(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=$t(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=$t(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"Rn",value:function(e,t){var n,r=new Ty,i=$t(yh(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Yt(a.kind);wy.Ct.dt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.zt()}},{key:"Tn",value:function(e){var t=new Ty;return wy.Ct.dt(e,t.Yt(0)),t.zt()}},{key:"Vn",value:function(e,t){var n=new Ty;return wy.Ct.dt($d(this.databaseId,t),n.Yt(function(e){var t=yh(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.zt()}},{key:"In",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Ty);var i,a=0,o=$t(yh(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=$t(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.mn(t,s.fieldPath)&&Jd(c))r=this.fn(r,s,c);else{var h=f.Yt(s.kind);wy.Ct.dt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.gn(r)}},{key:"Pn",value:function(e,t,n){return this.In(e,t,n.position)}},{key:"gn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].zt();return t}},{key:"fn",value:function(e,t,n){var r,i=Mt(e),a=[],o=$t(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=$t(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Ty;f.seed(l.zt()),wy.Ct.dt(s,f.Yt(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"mn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof mp&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Hy(e),i=Qy(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next((function(e){var t=[];return Ch.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new kh(t.sequenceNumber,new _h(sy(t.readTime),new ph(Hh(t.documentKey)),t.largestBatchId)):kh.empty(),r=e.fields.map((function(e){var t=Dt(e,2),n=t[0],r=t[1];return new gh(dh.fromServerFormat(n),r)}));return new vh(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:ah(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Hy(e),a=Qy(e);return this.pn(e).next((function(e){return i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Ch.forEach(t,(function(t){return a.put(vy(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Ch.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Ch.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Ch.forEach(a,(function(r){return n.yn(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?Ch.resolve():n.Sn(e,i,r,t,a)}))}))}))}))}},{key:"bn",value:function(e,t,n,r){return Wy(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Vn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Dn",value:function(e,t,n,r){return Wy(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Vn(n,t.key),t.key.path.toArray()])}},{key:"yn",value:function(e,t,n){var r=Wy(e),i=new Ed(Ay);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Vn(n,t)])},(function(e,r){i=i.add(new Cy(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new Ed(Ay),r=this.Rn(t,e);if(null==r)return n;var i=mh(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Jd(a)){var o,u=$t(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Cy(t.indexId,e.key,this.Tn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Cy(t.indexId,e.key,qy,r));return n}},{key:"Sn",value:function(e,t,n,r,i){var a=this;jf("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Td(a),s=Td(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Td(o)):l?(i(u),u=Td(a)):(u=Td(a),s=Td(o))}}(r,i,Ay,(function(r){o.push(a.bn(e,t,n,r))}),(function(r){o.push(a.Dn(e,t,n,r))})),Ch.waitFor(o)}},{key:"pn",value:function(e){var t=1;return Qy(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Ay(e,t)})).filter((function(e,t,n){return!t||0!==Ay(e,n[t-1])}));var r=[];r.push(e);var i,a=$t(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Ay(o,e),s=Ay(o,t);if(0===u)r[0]=e.Zt();else if(u>0&&s<0)r.push(o),r.push(o.Zt());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Cn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,qy,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,qy,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Cn",value:function(e,t){return Ay(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next($y)}},{key:"getMinOffset",value:function(e,t){var n=this;return Ch.mapArray(this.ln(t),(function(t){return n.hn(e,t).next((function(e){return e||qf()}))})).next($y)}}]),e}();function Gy(e){return gd(e,"collectionParents")}function Wy(e){return gd(e,"indexEntries")}function Hy(e){return gd(e,"indexConfiguration")}function Qy(e){return gd(e,"indexState")}function $y(e){Kf(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;xh(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new _h(t.readTime,t.documentKey,n)}var Yy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jy=function(){function e(t,n,r){Ft(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return jt(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Xy(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Kf(1===u)})));var c,l=[],f=$t(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Yh(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Ch.waitFor(a).next((function(){return l}))}function Zy(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw qf();t=e.noDocument}return JSON.stringify(t).length}Jy.DEFAULT_COLLECTION_PERCENTILE=10,Jy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jy.DEFAULT=new Jy(41943040,Jy.DEFAULT_COLLECTION_PERCENTILE,Jy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jy.DISABLED=new Jy(-1,0,0);var eg=function(){function e(t,n,r,i){Ft(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.vn={}}return jt(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ng(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=rg(e),o=ng(e);return o.add({}).next((function(u){Kf("number"==typeof u);var s,c=new tm(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return qm(e.ht,t)})),i=n.mutations.map((function(t){return qm(e.ht,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Ed((function(e,t){return ah(e.canonicalString(),t.canonicalString())})),d=$t(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Yh(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Jh))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.vn[u]=c.keys()})),Ch.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return ng(e).get(t).next((function(e){return e?(Kf(e.userId===n.userId),cy(n.serializer,e)):null}))}},{key:"Fn",value:function(e,t){var n=this;return this.vn[t]?Ch.resolve(this.vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return ng(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Kf(t.batchId>=r),a=cy(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ng(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ng(e).G("userMutationsIndex",n).next((function(e){return e.map((function(e){return cy(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=$h(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return rg(e).Z({range:i},(function(r,i,o){var u=Dt(r,3),s=u[0],c=u[1],l=u[2],f=Hh(c);if(s===n.userId&&t.path.isEqual(f))return ng(e).get(l).next((function(e){if(!e)throw qf();Kf(e.userId===n.userId),a.push(cy(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ed(ah),i=[];return t.forEach((function(t){var a=$h(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=rg(e).Z({range:o},(function(e,i,a){var o=Dt(e,3),u=o[0],s=o[1],c=o[2],l=Hh(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Ch.waitFor(i).next((function(){return n.Mn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=$h(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Ed(ah);return rg(e).Z({range:o},(function(e,t,a){var o=Dt(e,3),s=o[0],c=o[1],l=o[2],f=Hh(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Mn(e,u)}))}},{key:"Mn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(ng(e).get(t).next((function(e){if(null===e)throw qf();Kf(e.userId===n.userId),r.push(cy(n.serializer,e))})))})),Ch.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Xy(e.ue,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.xn(t.batchId)})),Ch.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"xn",value:function(e){delete this.vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ch.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return rg(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Hh(e[1]);i.push(a)}else r.done()})).next((function(){Kf(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return tg(e,this.userId,t)}},{key:"On",value:function(e){var t=this;return ig(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Pt",value:function(t,n,r,i){return Kf(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function tg(e,t,n){var r=$h(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return rg(e).Z({range:a,Y:!0},(function(e,n,r){var a=Dt(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function ng(e){return gd(e,"mutations")}function rg(e){return gd(e,"documentMutations")}function ig(e){return gd(e,"mutationQueues")}var ag=function(){function e(t){Ft(this,e),this.Nn=t}return jt(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"Bn",value:function(){return new e(0)}},{key:"Ln",value:function(){return new e(-1)}}]),e}(),og=function(){function e(t,n){Ft(this,e),this.referenceDelegate=t,this.serializer=n}return jt(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.kn(e).next((function(n){var r=new ag(n.highestTargetId);return n.highestTargetId=r.next(),t.qn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.kn(e).next((function(e){return ch.fromTimestamp(new sh(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.kn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.kn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.qn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Qn(e,t).next((function(){return n.kn(e).next((function(r){return r.targetCount+=1,n.Kn(t,r),n.qn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Qn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return ug(e).delete(t.targetId)})).next((function(){return n.kn(e)})).next((function(t){return Kf(t.targetCount>0),t.targetCount-=1,n.qn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return ug(e).Z((function(o,u){var s=ly(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Ch.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return ug(e).Z((function(e,n){var r=ly(n);t(r)}))}},{key:"kn",value:function(e){return sg(e).get("targetGlobalKey").next((function(e){return Kf(null!==e),e}))}},{key:"qn",value:function(e,t){return sg(e).put("targetGlobalKey",t)}},{key:"Qn",value:function(e,t){return ug(e).put(fy(this.serializer,t))}},{key:"Kn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.kn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Mp(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ug(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=ly(n);Fp(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=cg(e);return t.forEach((function(t){var o=Kh(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Ch.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=cg(e);return Ch.forEach(t,(function(t){var a=Kh(t.path);return Ch.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=cg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=cg(e),i=gv();return r.Z({range:n,Y:!0},(function(e,t,n){var r=Hh(e[1]),a=new ph(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Kh(t.path),r=IDBKeyRange.bound([n],[uh(n)],!1,!0),i=0;return cg(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=Dt(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"lt",value:function(e,t){return ug(e).get(t).next((function(e){return e?ly(e):null}))}}]),e}();function ug(e){return gd(e,"targets")}function sg(e){return gd(e,"targetGlobal")}function cg(e){return gd(e,"targetDocuments")}function lg(e,t){var n=Dt(e,2),r=n[0],i=n[1],a=Dt(t,2),o=a[0],u=a[1],s=ah(r,o);return 0===s?ah(i,u):s}var fg=function(){function e(t){Ft(this,e),this.$n=t,this.buffer=new Ed(lg),this.Un=0}return jt(e,[{key:"Wn",value:function(){return++this.Un}},{key:"Gn",value:function(e){var t=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();lg(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),hg=function(){function e(t,n,r){Ft(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.zn=null}return jt(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.jn(6e4)}},{key:"stop",value:function(){this.zn&&(this.zn.cancel(),this.zn=null)}},{key:"started",get:function(){return null!==this.zn}},{key:"jn",value:function(e){var t=this;jf("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.zn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Rh(e.t0)){e.next=12;break}jf("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Ih(e.t0);case 14:return e.next=16,t.jn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),dg=function(){function e(t,n){Ft(this,e),this.Hn=t,this.params=n}return jt(e,[{key:"calculateTargetCount",value:function(e,t){return this.Hn.Jn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Ch.resolve(Vh.ae);var r=new fg(t);return this.Hn.forEachTarget(e,(function(e){return r.Gn(e.sequenceNumber)})).next((function(){return n.Hn.Yn(e,(function(e){return r.Gn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Hn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Hn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(jf("LruGarbageCollector","Garbage collection skipped; disabled"),Ch.resolve(Yy)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(jf("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Yy):n.Zn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Hn.getCacheSize(e)}},{key:"Zn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(jf("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Uf()<=Ba.DEBUG&&jf("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Ch.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function pg(e,t){return new dg(e,t)}var vg=function(){function e(t,n){Ft(this,e),this.db=t,this.garbageCollector=pg(this,n)}return jt(e,[{key:"Jn",value:function(e){var t=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Xn",value:function(e){var t=0;return this.Yn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Yn",value:function(e,t){return this.er(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return mg(e,n)}},{key:"removeReference",value:function(e,t,n){return mg(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return mg(e,t)}},{key:"tr",value:function(e,t){return function(e,t){var n=!1;return ig(e).X((function(r){return tg(e,r,t).next((function(e){return e&&(n=!0),Ch.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.er(e,(function(o,u){if(u<=t){var s=n.tr(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,ch.min()),cg(e).delete(function(e){return[0,Kh(e.path)]}(o))}))}));i.push(s)}})).next((function(){return Ch.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return mg(e,t)}},{key:"er",value:function(e,t){var n,r=cg(e),i=Vh.ae;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=Dt(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Vh.ae&&t(new ph(Hh(n)),i),i=s,n=u):i=Vh.ae})).next((function(){i!==Vh.ae&&t(new ph(Hh(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function mg(e,t){return cg(e).put(function(e,t){return{targetId:0,path:Kh(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var yg=function(){function e(){Ft(this,e),this.changes=new uv((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return jt(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,cp.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ch.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),gg=function(){function e(t){Ft(this,e),this.serializer=t}return jt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return _g(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return _g(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],oy(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.nr(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=cp.newInvalidDocument(t);return _g(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(xg(t))},(function(e,i){r=n.rr(t,i)})).next((function(){return r}))}},{key:"ir",value:function(e,t){var n=this,r={size:0,document:cp.newInvalidDocument(t)};return _g(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(xg(t))},(function(e,i){r={document:n.rr(t,i),size:Zy(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=cv();return this.sr(e,t,(function(e,t){var i=n.rr(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"_r",value:function(e,t){var n=this,r=cv(),i=new _d(ph.comparator);return this.sr(e,t,(function(e,t){var a=n.rr(e,t);r=r.insert(e,a),i=i.insert(e,Zy(t))})).next((function(){return{documents:r,ar:i}}))}},{key:"sr",value:function(e,t,n){if(t.isEmpty())return Ch.resolve();var r=new Ed(Eg);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(xg(r.first()),xg(r.last())),a=r.getIterator(),o=a.getNext();return _g(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=ph.fromSegments([].concat(Mt(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Eg(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.W(xg(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r,i){var a=this,o=t.path,u=[o.popLast().toArray(),o.lastSegment(),oy(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _g(e).G(IDBKeyRange.bound(u,s,!0)).next((function(e){null==i||i.incrementDocumentReadCount(e.length);var n,o=cv(),u=$t(e);try{for(u.s();!(n=u.n()).done;){var s=n.value,c=a.rr(ph.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);c.isFoundDocument()&&(rv(t,c)||r.has(c.key))&&(o=o.insert(c.key,c))}}catch(l){u.e(l)}finally{u.f()}return o}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=cv(),o=Sg(t,n),u=Sg(t,_h.max());return _g(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.rr(ph.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new bg(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return wg(e).get("remoteDocumentGlobalKey").next((function(e){return Kf(!!e),e}))}},{key:"nr",value:function(e,t){return wg(e).put("remoteDocumentGlobalKey",t)}},{key:"rr",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=zm(e.ht,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=ph.fromSegments(t.noDocument.path),i=sy(t.noDocument.readTime);n=cp.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return qf();var a=ph.fromSegments(t.unknownDocument.path),o=sy(t.unknownDocument.version);n=cp.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new sh(e[0],e[1]);return ch.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(ch.min()))return n}return cp.newInvalidDocument(e)}}]),e}();function kg(e){return new gg(e)}var bg=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this)).ur=e,i.trackRemovals=r,i.cr=new uv((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return jt(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Ed((function(e,t){return ah(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.cr.get(a);if(n.push(t.ur.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=ay(t.ur.serializer,o);i=i.add(a.path.popLast());var c=Zy(s);r+=c-u.size,n.push(t.ur.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=ay(t.ur.serializer,o.convertToNoDocument(ch.min()));n.push(t.ur.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.ur.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.ur.updateMetadata(e,r)),Ch.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.ur.ir(e,t).next((function(e){return n.cr.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.ur._r(e,t).next((function(e){var t=e.documents;return e.ar.forEach((function(e,r){n.cr.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(yg);function wg(e){return gd(e,"remoteDocumentGlobal")}function _g(e){return gd(e,"remoteDocumentsV14")}function xg(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Sg(e,t){var n=t.documentKey.path.toArray();return[e,oy(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Eg(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=ah(n[a],r[a]))return i;return(i=ah(n.length,r.length))||((i=ah(n[n.length-2],r[r.length-2]))||ah(n[n.length-1],r[r.length-1]))}var Ig=jt((function e(t,n){Ft(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Tg=function(){function e(t,n,r,i){Ft(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return jt(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&qv(r.mutation,e,Cd.empty(),sh.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,gv()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gv(),i=dv();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=fv();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=dv();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,gv())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=cv(),a=vv(),o=vv();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Hv)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),qv(o.mutation,t,o.mutation.getFieldMask(),sh.now())):a.set(t.key,Cd.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Ig(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=vv(),i=new _d((function(e,t){return e-t})),a=gv();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=$t(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Cd.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||gv()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=pv();c.forEach((function(e){if(!a.has(e)){var n=zv(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Ch.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return function(e){return ph.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Ch.resolve(dv()),u=-1,s=a;return o.next((function(t){return Ch.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Ch.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,gv())})).next((function(e){return{batchId:u,changes:hv(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new ph(t)).next((function(e){var t=fv();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=fv();return this.indexManager.getCollectionParents(e,a).next((function(u){return Ch.forEach(u,(function(u){var s=function(e,t){return new Bp(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,u.child(a));return i.getDocumentsMatchingCollectionQuery(e,s,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,cp.newInvalidDocument(r)))}));var n=fv();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&qv(a.mutation,r,Cd.empty(),sh.now()),rv(t,r)&&(n=n.insert(e,r))})),n}))}}]),e}(),Cg=function(){function e(t){Ft(this,e),this.serializer=t,this.lr=new Map,this.hr=new Map}return jt(e,[{key:"getBundleMetadata",value:function(e,t){return Ch.resolve(this.lr.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Pm(e.createTime)}}(t)),Ch.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ch.resolve(this.hr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hr.set(t.name,function(e){return{name:e.name,query:hy(e.bundledQuery),readTime:Pm(e.readTime)}}(t)),Ch.resolve()}}]),e}(),Ag=function(){function e(){Ft(this,e),this.overlays=new _d(ph.comparator),this.Pr=new Map}return jt(e,[{key:"getOverlay",value:function(e,t){return Ch.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=dv();return Ch.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.It(e,t,i)})),Ch.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Pr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Pr.delete(n)),Ch.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=dv(),i=t.length+1,a=new ph(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Ch.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new _d((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=dv(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=dv(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Ch.resolve(s)}},{key:"It",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Pr.get(r.largestBatchId).delete(n.key);this.Pr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new rm(t,n));var a=this.Pr.get(t);void 0===a&&(a=gv(),this.Pr.set(t,a)),this.Pr.set(t,a.add(n.key))}}]),e}(),Ng=function(){function e(){Ft(this,e),this.Ir=new Ed(Pg.dr),this.Tr=new Ed(Pg.Er)}return jt(e,[{key:"isEmpty",value:function(){return this.Ir.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Pg(e,t);this.Ir=this.Ir.add(n),this.Tr=this.Tr.add(n)}},{key:"Ar",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Rr(new Pg(e,t))}},{key:"Vr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"mr",value:function(e){var t=this,n=new ph(new fh([])),r=new Pg(n,e),i=new Pg(n,e+1),a=[];return this.Tr.forEachInRange([r,i],(function(e){t.Rr(e),a.push(e.key)})),a}},{key:"gr",value:function(){var e=this;this.Ir.forEach((function(t){return e.Rr(t)}))}},{key:"Rr",value:function(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}},{key:"pr",value:function(e){var t=new ph(new fh([])),n=new Pg(t,e),r=new Pg(t,e+1),i=gv();return this.Tr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Pg(e,0),n=this.Ir.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Pg=function(){function e(t,n){Ft(this,e),this.key=t,this.yr=n}return jt(e,null,[{key:"dr",value:function(e,t){return ph.comparator(e.key,t.key)||ah(e.yr,t.yr)}},{key:"Er",value:function(e,t){return ah(e.yr,t.yr)||ph.comparator(e.key,t.key)}}]),e}(),Og=function(){function e(t,n){Ft(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new Ed(Pg.dr)}return jt(e,[{key:"checkEmpty",value:function(e){return Ch.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new tm(i,t,n,r);this.mutationQueue.push(a);var o,u=$t(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Sr=this.Sr.add(new Pg(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Ch.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Ch.resolve(this.br(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Dr(n),i=r<0?0:r;return Ch.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ch.resolve(0===this.mutationQueue.length?-1:this.wr-1)}},{key:"getAllMutationBatches",value:function(e){return Ch.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Pg(t,0),i=new Pg(t,Number.POSITIVE_INFINITY),a=[];return this.Sr.forEachInRange([r,i],(function(e){var t=n.br(e.yr);a.push(t)})),Ch.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ed(ah);return t.forEach((function(e){var t=new Pg(e,0),i=new Pg(e,Number.POSITIVE_INFINITY);n.Sr.forEachInRange([t,i],(function(e){r=r.add(e.yr)}))})),Ch.resolve(this.Cr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ph.isDocumentKey(i)||(i=i.child(""));var a=new Pg(new ph(i),0),o=new Ed(ah);return this.Sr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.yr)),!0)}),a),Ch.resolve(this.Cr(o))}},{key:"Cr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.br(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Kf(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Sr;return Ch.forEach(t.mutations,(function(i){var a=new Pg(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Sr=r}))}},{key:"xn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Pg(t,0),r=this.Sr.firstAfterOrEqual(n);return Ch.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Ch.resolve()}},{key:"vr",value:function(e,t){return this.Dr(e)}},{key:"Dr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"br",value:function(e){var t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Rg=function(){function e(t){Ft(this,e),this.Fr=t,this.docs=new _d(ph.comparator),this.size=0}return jt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Fr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ch.resolve(n?n.document.mutableCopy():cp.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=cv();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():cp.newInvalidDocument(e))})),Ch.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=cv(),a=t.path,o=new ph(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||xh(wh(l),n)<=0||(r.has(l.key)||rv(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Ch.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){qf()}},{key:"Mr",value:function(e,t){return Ch.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Dg(this)}},{key:"getSize",value:function(e){return Ch.resolve(this.size)}}]),e}(),Dg=function(e){zt(n,e);var t=Gt(n);function n(e){var r;return Ft(this,n),(r=t.call(this)).ur=e,r}return jt(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.ur.addEntry(e,i)):t.ur.removeEntry(r)})),Ch.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.ur.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.ur.getEntries(e,t)}}]),n}(yg),Lg=function(){function e(t){Ft(this,e),this.persistence=t,this.Or=new uv((function(e){return Mp(e)}),Fp),this.lastRemoteSnapshotVersion=ch.min(),this.highestTargetId=0,this.Nr=0,this.Br=new Ng,this.targetCount=0,this.Lr=ag.Bn()}return jt(e,[{key:"forEachTarget",value:function(e,t){return this.Or.forEach((function(e,n){return t(n)})),Ch.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ch.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ch.resolve(this.Nr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Lr.next(),Ch.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Nr&&(this.Nr=t),Ch.resolve()}},{key:"Qn",value:function(e){this.Or.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Lr=new ag(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Qn(t),this.targetCount+=1,Ch.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Qn(t),Ch.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Or.delete(t.target),this.Br.mr(t.targetId),this.targetCount-=1,Ch.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Or.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Or.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Ch.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Ch.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Or.get(t)||null;return Ch.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Br.Ar(t,n),Ch.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Br.Vr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Ch.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Br.mr(t),Ch.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Br.pr(t);return Ch.resolve(n)}},{key:"containsKey",value:function(e,t){return Ch.resolve(this.Br.containsKey(t))}}]),e}(),Mg=function(){function e(t,n){var r=this;Ft(this,e),this.kr={},this.overlays={},this.qr=new Vh(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=t(this),this.Kr=new Lg(this),this.indexManager=new zy,this.remoteDocumentCache=function(e){return new Rg(e)}((function(e){return r.referenceDelegate.$r(e)})),this.serializer=new iy(n),this.Ur=new Cg(this.serializer)}return jt(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Qr=!1,Promise.resolve()}},{key:"started",get:function(){return this.Qr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Ag,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.kr[e.toKey()];return n||(n=new Og(t,this.referenceDelegate),this.kr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ur}},{key:"runTransaction",value:function(e,t,n){var r=this;jf("MemoryPersistence","Starting transaction:",e);var i=new Fg(this.qr.next());return this.referenceDelegate.Wr(),n(i).next((function(e){return r.referenceDelegate.Gr(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zr",value:function(e,t){return Ch.or(Object.values(this.kr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Fg=function(e){zt(n,e);var t=Gt(n);function n(e){var r;return Ft(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return jt(n)}(Eh),Ug=function(){function e(t){Ft(this,e),this.persistence=t,this.jr=new Ng,this.Hr=null}return jt(e,[{key:"Yr",get:function(){if(this.Hr)return this.Hr;throw qf()}},{key:"addReference",value:function(e,t,n){return this.jr.addReference(n,t),this.Yr.delete(n.toString()),Ch.resolve()}},{key:"removeReference",value:function(e,t,n){return this.jr.removeReference(n,t),this.Yr.add(n.toString()),Ch.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Yr.add(t.toString()),Ch.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.jr.mr(t.targetId).forEach((function(e){return n.Yr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Yr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Wr",value:function(){this.Hr=new Set}},{key:"Gr",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ch.forEach(this.Yr,(function(r){var i=ph.fromPath(r);return t.Zr(e,i).next((function(e){e||n.removeEntry(i,ch.min())}))})).next((function(){return t.Hr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zr(e,t).next((function(e){e?n.Yr.delete(t.toString()):n.Yr.add(t.toString())}))}},{key:"$r",value:function(e){return 0}},{key:"Zr",value:function(e,t){var n=this;return Ch.or([function(){return Ch.resolve(n.jr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zr(e,t)}])}}],[{key:"Jr",value:function(t){return new e(t)}}]),e}(),jg=function(){function e(t){Ft(this,e),this.serializer=t}return jt(e,[{key:"B",value:function(e,t,n,r){var i=this,a=new Ah("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qh,{unique:!0}),e.createObjectStore("documentMutations")}(e),Vg(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Ch.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Vg(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ch.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").G().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qh,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Ch.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.ei(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.ti(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.ni(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ri(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ii(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:cd});t.createIndex("collectionPathOverlayIndex",ld,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",fd,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Xh});t.createIndex("documentKeyIndex",Zh),t.createIndex("collectionGroupIndex",ed)}(e)})).next((function(){return i.si(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.oi(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ad}).createIndex("sequenceNumberIndex",od,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ud}).createIndex("documentKeyIndex",sd,{unique:!1})}(e)}))),o}},{key:"ti",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=Zy(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"ei",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next((function(n){return Ch.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",i).next((function(r){return Ch.forEach(r,(function(r){Kf(r.userId===n.userId);var i=cy(t.serializer,r);return Xy(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"ni",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new fh(n),o=function(e){return[0,Kh(e)]}(a);r.push(t.get(o).next((function(n){return n?Ch.resolve():function(n){return t.put({targetId:0,path:Kh(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Ch.waitFor(r)}))}))}},{key:"ri",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:id});var n=t.store("collectionParents"),r=new By,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Kh(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new fh(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=Dt(e,3),r=(n[0],n[1]),a=(n[2],Hh(r));return i(a.popLast())}))}))}},{key:"ii",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=ly(r),a=fy(t.serializer,i);return n.put(a)}))}},{key:"si",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new ph(fh.fromString(e.document.name).popFirst(5)):e.noDocument?ph.fromSegments(e.noDocument.path):e.unknownDocument?ph.fromSegments(e.unknownDocument.path):qf()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return Ch.waitFor(r)}))}},{key:"oi",value:function(e,t){var n=this,r=t.store("mutations"),i=kg(this.serializer),a=new Mg(Ug.Jr,this.serializer.ht);return r.G().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:gv();cy(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Ch.forEach(r,(function(e,r){var o=new Lf(r),u=ky.Pt(n.serializer,o),s=a.getIndexManager(o),c=eg.Pt(o,n.serializer,s,a.referenceDelegate);return new Tg(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new yd(t,Vh.ae),e).next()}))}))}}]),e}();function Vg(e){e.createObjectStore("targetDocuments",{keyPath:nd}).createIndex("documentTargetsIndex",rd,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",td,{unique:!0}),e.createObjectStore("targetGlobal")}var zg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Bg=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Ft(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this._i=a,this.window=o,this.document=u,this.ai=c,this.ui=l,this.ci=f,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.li=null,this.inForeground=!1,this.hi=null,this.Pi=null,this.Ii=Number.NEGATIVE_INFINITY,this.di=function(e){return Promise.resolve()},!e.C())throw new Hf(Wf.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vg(this,i),this.Ti=n+"main",this.serializer=new iy(s),this.Ei=new Nh(this.Ti,this.ci,new jg(this.serializer)),this.Kr=new og(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kg(this.serializer),this.Ur=new my,this.window&&this.window.localStorage?this.Ai=this.window.localStorage:(this.Ai=null,!1===l&&Vf("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return jt(e,[{key:"start",value:function(){var e=this;return this.Ri().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Hf(Wf.FAILED_PRECONDITION,zg);return e.Vi(),e.mi(),e.fi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Kr.getHighestSequenceNumber(t)}))})).then((function(t){e.qr=new Vh(t,e.ai)})).then((function(){e.Qr=!0})).catch((function(t){return e.Ei&&e.Ei.close(),Promise.reject(t)}))}},{key:"gi",value:function(e){var t=this;return this.di=function(){var n=hr(lr().mark((function n(r){return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ei.k(function(){var t=hr(lr().mark((function t(n){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this._i.enqueueAndForget(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ri();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Kg(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.pi(t).next((function(t){t||(e.isPrimary=!1,e._i.enqueueRetryable((function(){return e.di(!1)})))}))})).next((function(){return e.yi(t)})).next((function(n){return e.isPrimary&&!n?e.wi(t).next((function(){return!1})):!!n&&e.Si(t).next((function(){return!0}))}))})).catch((function(t){if(Rh(t))return jf("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return jf("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e._i.enqueueRetryable((function(){return e.di(t)})),e.isPrimary=t}))}},{key:"pi",value:function(e){var t=this;return qg(e).get("owner").next((function(e){return Ch.resolve(t.bi(e))}))}},{key:"Di",value:function(e){return Kg(e).delete(this.clientId)}},{key:"Ci",value:function(){var e=hr(lr().mark((function e(){var t,n,r,i,a=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.vi(this.Ii,18e5)){e.next=6;break}return this.Ii=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=gd(e,"clientMetadata");return t.G().next((function(e){var n=a.Fi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Ch.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Ai){n=$t(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Ai.removeItem(this.Mi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fi",value:function(){var e=this;this.Pi=this._i.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ri().then((function(){return e.Ci()})).then((function(){return e.fi()}))}))}},{key:"bi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"yi",value:function(e){var t=this;return this.ui?Ch.resolve(!0):qg(e).get("owner").next((function(n){if(null!==n&&t.vi(n.leaseTimestampMs,5e3)&&!t.xi(n.ownerId)){if(t.bi(n)&&t.networkEnabled)return!0;if(!t.bi(n)){if(!n.allowTabSynchronization)throw new Hf(Wf.FAILED_PRECONDITION,zg);return!1}}return!(!t.networkEnabled||!t.inForeground)||Kg(e).G().next((function(e){return void 0===t.Fi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&jf("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=hr(lr().mark((function e(){var t=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Qr=!1,this.Oi(),this.Pi&&(this.Pi.cancel(),this.Pi=null),this.Ni(),this.Bi(),e.next=7,this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new yd(e,Vh.ae);return t.wi(n).next((function(){return t.Di(n)}))}));case 7:this.Ei.close(),this.Li();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fi",value:function(e,t){var n=this;return e.filter((function(e){return n.vi(e.updateTimeMs,t)&&!n.xi(e.clientId)}))}},{key:"ki",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Kg(t).G().next((function(t){return e.Fi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Qr}},{key:"getMutationQueue",value:function(e,t){return eg.Pt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Ky(e,this.serializer.ht.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return ky.Pt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Ur}},{key:"runTransaction",value:function(e,t,n){var r=this;jf("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?md:14===e?vd:13===e?pd:12===e?dd:11===e?hd:void qf()}(this.ci);return this.Ei.runTransaction(e,a,o,(function(a){return i=new yd(a,r.qr?r.qr.next():Vh.ae),"readwrite-primary"===t?r.pi(i).next((function(e){return!!e||r.yi(i)})).next((function(t){if(!t)throw Vf("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r._i.enqueueRetryable((function(){return r.di(!1)})),new Hf(Wf.FAILED_PRECONDITION,Sh);return n(i)})).next((function(e){return r.Si(i).next((function(){return e}))})):r.qi(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"qi",value:function(e){var t=this;return qg(e).get("owner").next((function(e){if(null!==e&&t.vi(e.leaseTimestampMs,5e3)&&!t.xi(e.ownerId)&&!t.bi(e)&&!(t.ui||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Hf(Wf.FAILED_PRECONDITION,zg)}))}},{key:"Si",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qg(e).put("owner",t)}},{key:"wi",value:function(e){var t=this,n=qg(e);return n.get("owner").next((function(e){return t.bi(e)?(jf("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ch.resolve()}))}},{key:"vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Vf("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Vi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.hi=function(){e._i.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ri()}))},this.document.addEventListener("visibilitychange",this.hi),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.hi&&(this.document.removeEventListener("visibilitychange",this.hi),this.hi=null)}},{key:"mi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.li=function(){t.Oi();var e=/(?:Version|Mobile)\/1[456]/;!ka()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t._i.enterRestrictedMode(!0),t._i.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.li))}},{key:"Bi",value:function(){this.li&&(this.window.removeEventListener("pagehide",this.li),this.li=null)}},{key:"xi",value:function(e){var t;try{var n=null!==(null===(t=this.Ai)||void 0===t?void 0:t.getItem(this.Mi(e)));return jf("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Vf("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Oi",value:function(){if(this.Ai)try{this.Ai.setItem(this.Mi(this.clientId),String(Date.now()))}catch(e){Vf("Failed to set zombie client id.",e)}}},{key:"Li",value:function(){if(this.Ai)try{this.Ai.removeItem(this.Mi(this.clientId))}catch(e){}}},{key:"Mi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return Nh.C()}}]),e}();function qg(e){return gd(e,"owner")}function Kg(e){return gd(e,"clientMetadata")}function Gg(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Wg=function(){function e(t,n,r,i){Ft(this,e),this.targetId=t,this.fromCache=n,this.Qi=r,this.Ki=i}return jt(e,null,[{key:"$i",value:function(t,n){var r,i=gv(),a=gv(),o=$t(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Hg=function(){function e(){Ft(this,e),this._documentReadCount=0}return jt(e,[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}]),e}(),Qg=function(){function e(){Ft(this,e),this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}return jt(e,[{key:"initialize",value:function(e,t){this.ji=e,this.indexManager=t,this.Ui=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.Hi(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.Ji(e,t,r,n).next((function(e){a.result=e}))})).next((function(){if(!a.result){var n=new Hg;return i.Yi(e,t,n).next((function(r){if(a.result=r,i.Wi)return i.Zi(e,t,n,r.size)}))}})).next((function(){return a.result}))}},{key:"Zi",value:function(e,t,n,r){return n.documentReadCount<this.Gi?(Uf()<=Ba.DEBUG&&jf("QueryEngine","SDK will not create cache indexes for query:",nv(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),Ch.resolve()):(Uf()<=Ba.DEBUG&&jf("QueryEngine","Query:",nv(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.zi*r?(Uf()<=Ba.DEBUG&&jf("QueryEngine","The SDK decides to create cache indexes for query:",nv(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yp(t))):Ch.resolve())}},{key:"Hi",value:function(e,t){var n=this;if(Gp(t))return Ch.resolve(null);var r=Yp(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Zp(t,null,"F"),r=Yp(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=gv.apply(void 0,Mt(i));return n.ji.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Xi(t,i);return n.es(t,o,a,r.readTime)?n.Hi(e,Zp(t,null,"F")):n.ts(e,o,t,r)}))}))})))}))}},{key:"Ji",value:function(e,t,n,r){var i=this;return Gp(t)||r.isEqual(ch.min())?Ch.resolve(null):this.ji.getDocuments(e,n).next((function(a){var o=i.Xi(t,a);return i.es(t,o,n,r)?Ch.resolve(null):(Uf()<=Ba.DEBUG&&jf("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),nv(t)),i.ts(e,o,t,bh(r,-1)).next((function(e){return e})))}))}},{key:"Xi",value:function(e,t){var n=new Ed(av(e));return t.forEach((function(t,r){rv(e,r)&&(n=n.add(r))})),n}},{key:"es",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Yi",value:function(e,t,n){return Uf()<=Ba.DEBUG&&jf("QueryEngine","Using full collection scan to execute query:",nv(t)),this.ji.getDocumentsMatchingQuery(e,t,_h.min(),n)}},{key:"ts",value:function(e,t,n,r){return this.ji.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),$g=function(){function e(t,n,r,i){Ft(this,e),this.persistence=t,this.ns=n,this.serializer=i,this.rs=new _d(ah),this.ss=new uv((function(e){return Mp(e)}),Fp),this.os=new Map,this._s=t.getRemoteDocumentCache(),this.Kr=t.getTargetCache(),this.Ur=t.getBundleCache(),this.us(r)}return jt(e,[{key:"us",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tg(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.rs)}))}}]),e}();function Yg(e,t,n,r){return new $g(e,t,n,r)}function Jg(e,t){return Xg.apply(this,arguments)}function Xg(){return Xg=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gf(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.us(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=gv(),s=$t(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=$t(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=$t(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=$t(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{cs:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Xg.apply(this,arguments)}function Zg(e,t){var n=Gf(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n._s.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Ch.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Kf(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=gv(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function ek(e){var t=Gf(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Kr.getLastRemoteSnapshotVersion(e)}))}function tk(e,t){var n=Gf(e),r=t.snapshotVersion,i=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n._s.newChangeBuffer({trackRemovals:!0});i=n.rs;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Kr.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Kr.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Nd.EMPTY_BYTE_STRING,ch.min()).withLastLimboFreeSnapshotVersion(ch.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Kr.updateTargetData(e,c))}}));var u=cv(),s=gv();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(nk(e,a,t.documentUpdates).next((function(e){u=e.ls,s=e.hs}))),!r.isEqual(ch.min())){var c=n.Kr.getLastRemoteSnapshotVersion(e).next((function(t){return n.Kr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Ch.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.rs=i,e}))}function nk(e,t,n){var r=gv(),i=gv();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=cv();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(ch.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):jf("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{ls:r,hs:i}}))}function rk(e,t){var n=Gf(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function ik(e,t){var n=Gf(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Kr.getTargetData(e,t).next((function(i){return i?(r=i,Ch.resolve(r)):n.Kr.allocateTargetId(e).next((function(i){return r=new ry(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Kr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.rs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.rs=n.rs.insert(e.targetId,e),n.ss.set(t,e.targetId)),e}))}function ak(e,t,n){return ok.apply(this,arguments)}function ok(){return ok=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Gf(t),a=i.rs.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Rh(e.t1)){e.next=12;break}throw e.t1;case 12:jf("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.rs=i.rs.remove(n),i.ss.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),ok.apply(this,arguments)}function uk(e,t,n){var r=Gf(e),i=ch.min(),a=gv();return r.persistence.runTransaction("Execute query","readwrite",(function(e){return function(e,t,n){var r=Gf(e),i=r.ss.get(n);return void 0!==i?Ch.resolve(r.rs.get(i)):r.Kr.getTargetData(t,n)}(r,e,Yp(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ns.getDocumentsMatchingQuery(e,t,n?i:ch.min(),n?a:gv())})).next((function(e){return lk(r,iv(t),e),{documents:e,Ps:a}}))}))}function sk(e,t){var n=Gf(e),r=Gf(n.Kr),i=n.rs.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function ck(e,t){var n=Gf(e),r=n.os.get(t)||ch.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n._s.getAllFromCollectionGroup(e,t,bh(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return lk(n,t,e),e}))}function lk(e,t,n){var r=e.os.get(t)||ch.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.os.set(t,r)}function fk(e,t,n,r){return hk.apply(this,arguments)}function hk(){return hk=hr(lr().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Gf(t),o=gv(),u=cv(),s=$t(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Is(l.metadata.name),l.document&&(o=o.add(f)),(h=n.ds(l)).setReadTime(n.Ts(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a._s.newChangeBuffer({trackRemovals:!0}),e.next=7,ik(a,function(e){return Yp(Kp(fh.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return nk(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Kr.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Kr.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.ls,t.hs)})).next((function(){return t.ls}))}))})));case 9:case"end":return e.stop()}}),e)}))),hk.apply(this,arguments)}function dk(e,t){return pk.apply(this,arguments)}function pk(){return pk=hr(lr().mark((function e(t,n){var r,i,a,o=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:gv(),e.next=3,ik(t,Yp(hy(n.bundledQuery)));case 3:return i=e.sent,a=Gf(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Pm(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ur.saveNamedQuery(e,n);var o=i.withResumeToken(Nd.EMPTY_BYTE_STRING,t);return a.rs=a.rs.insert(o.targetId,o),a.Kr.updateTargetData(e,o).next((function(){return a.Kr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Kr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ur.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),pk.apply(this,arguments)}function vk(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function mk(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function yk(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var gk=function(){function e(t,n,r,i){Ft(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return jt(e,[{key:"As",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Hf(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Vf("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),kk=function(){function e(t,n,r){Ft(this,e),this.targetId=t,this.state=n,this.error=r}return jt(e,[{key:"As",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Hf(i.error.code,i.error.message))),a?new e(t,i.state,r):(Vf("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),bk=function(){function e(t,n){Ft(this,e),this.clientId=t,this.activeTargetIds=n}return jt(e,null,[{key:"Es",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=bv(),o=0;i&&o<r.activeTargetIds.length;++o)i=qh(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Vf("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),wk=function(){function e(t,n){Ft(this,e),this.clientId=t,this.onlineState=n}return jt(e,null,[{key:"Es",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Vf("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),_k=function(){function e(){Ft(this,e),this.activeTargetIds=bv()}return jt(e,[{key:"Rs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Vs",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"As",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),xk=function(){function e(t,n,r,i,a){Ft(this,e),this.window=t,this._i=n,this.persistenceKey=r,this.fs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.gs=this.ps.bind(this),this.ys=new _d(ah),this.started=!1,this.ws=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ss=vk(this.persistenceKey,this.fs),this.bs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ys=this.ys.insert(this.fs,new _k),this.Ds=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Cs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.vs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Fs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ms=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.gs)}return jt(e,[{key:"start",value:function(){var e=hr(lr().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.ki();case 2:t=e.sent,n=$t(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.fs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(vk(this.persistenceKey,i)))&&(o=bk.Es(i,a))&&(this.ys=this.ys.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.xs(),(u=this.storage.getItem(this.Fs))&&(s=this.Os(u))&&this.Ns(s),c=$t(this.ws);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ps(f)}catch(d){c.e(d)}finally{c.f()}this.ws=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.bs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Bs(this.ys)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ys.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ls(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ls(e,t,n),this.ks(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(yk(this.persistenceKey,e));if(n){var r=kk.Es(e,n);r&&(t=r.state)}}return this.qs.Rs(e),this.xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.qs.Vs(e),this.xs()}},{key:"isLocalQueryTarget",value:function(e){return this.qs.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(yk(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Qs(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.ks(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Ks(e)}},{key:"notifyBundleLoaded",value:function(e){this.$s(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.gs),this.removeItem(this.Ss),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return jf("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){jf("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){jf("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ps",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(jf("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ss)return void Vf("Received WebStorage notification for local change. Another client might have garbage-collected our state");this._i.enqueueRetryable(hr(lr().mark((function e(){var r,i,a,o,u,s,c;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Ds.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Us(n.key),e.abrupt("return",t.Ws(r,null));case 6:if(!(i=t.Gs(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Ws(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Cs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.zs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.js(a));case 16:e.next=41;break;case 18:if(!t.vs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Hs(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Js(o));case 23:e.next=41;break;case 25:if(n.key!==t.Fs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Os(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ns(u));case 30:e.next=41;break;case 32:if(n.key!==t.bs){e.next=37;break}s=function(e){var t=Vh.ae;if(null!=e)try{var n=JSON.parse(e);Kf("number"==typeof n),t=n}catch(e){Vf("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Vh.ae&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Ms){e.next=41;break}return c=t.Ys(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Zs(e)})));case 41:e.next=44;break;case 43:t.ws.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"qs",get:function(){return this.ys.get(this.fs)}},{key:"xs",value:function(){this.setItem(this.Ss,this.qs.As())}},{key:"Ls",value:function(e,t,n){var r=new gk(this.currentUser,e,t,n),i=mk(this.persistenceKey,this.currentUser,e);this.setItem(i,r.As())}},{key:"ks",value:function(e){var t=mk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Ks",value:function(e){var t={clientId:this.fs,onlineState:e};this.storage.setItem(this.Fs,JSON.stringify(t))}},{key:"Qs",value:function(e,t,n){var r=yk(this.persistenceKey,e),i=new kk(e,t,n);this.setItem(r,i.As())}},{key:"$s",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Ms,t)}},{key:"Us",value:function(e){var t=this.Ds.exec(e);return t?t[1]:null}},{key:"Gs",value:function(e,t){var n=this.Us(e);return bk.Es(n,t)}},{key:"zs",value:function(e,t){var n=this.Cs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return gk.Es(new Lf(i),r,t)}},{key:"Hs",value:function(e,t){var n=this.vs.exec(e),r=Number(n[1]);return kk.Es(r,t)}},{key:"Os",value:function(e){return wk.Es(e)}},{key:"Ys",value:function(e){return JSON.parse(e)}},{key:"js",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Xs(t.batchId,t.state,t.error));case 2:jf("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Js",value:function(e){return this.syncEngine.eo(e.targetId,e.state,e.error)}},{key:"Ws",value:function(e,t){var n=this,r=t?this.ys.insert(e,t):this.ys.remove(e),i=this.Bs(this.ys),a=this.Bs(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.no(o,u).then((function(){n.ys=r}))}},{key:"Ns",value:function(e){this.ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Bs",value:function(e){var t=bv();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Sk=function(){function e(){Ft(this,e),this.ro=new _k,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return jt(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.ro.Rs(e),this.io[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.io[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.ro.Vs(e)}},{key:"isLocalQueryTarget",value:function(e){return this.ro.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.io[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.ro.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.ro.activeTargetIds.has(e)}},{key:"start",value:function(){return this.ro=new _k,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Ek=function(){function e(){Ft(this,e)}return jt(e,[{key:"so",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Ik=function(){function e(){var t=this;Ft(this,e),this.oo=function(){return t._o()},this.ao=function(){return t.uo()},this.co=[],this.lo()}return jt(e,[{key:"so",value:function(e){this.co.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}},{key:"lo",value:function(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}},{key:"_o",value:function(){jf("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=$t(this.co);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"uo",value:function(){jf("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=$t(this.co);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Tk=null;function Ck(){return null===Tk?Tk=268435456+Math.round(2147483648*Math.random()):Tk++,"0x"+Tk.toString(16)}var Ak={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Nk=function(){function e(t){Ft(this,e),this.ho=t.ho,this.Po=t.Po}return jt(e,[{key:"Io",value:function(e){this.To=e}},{key:"Eo",value:function(e){this.Ao=e}},{key:"onMessage",value:function(e){this.Ro=e}},{key:"close",value:function(){this.Po()}},{key:"send",value:function(e){this.ho(e)}},{key:"Vo",value:function(){this.To()}},{key:"mo",value:function(e){this.Ao(e)}},{key:"fo",value:function(e){this.Ro(e)}}]),e}(),Pk="WebChannelConnection",Ok=function(e){zt(n,e);var t=Gt(n);function n(e){var r;return Ft(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return jt(n,[{key:"vo",value:function(e,t,n,r){var i=Ck();return new Promise((function(a,o){var u=new Pf;u.setWithCredentials(!0),u.listenOnce(Tf.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case If.NO_ERROR:var t=u.getResponseJson();jf(Pk,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case If.TIMEOUT:jf(Pk,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Hf(Wf.DEADLINE_EXCEEDED,"Request time out"));break;case If.HTTP_ERROR:var n=u.getStatus();if(jf(Pk,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Wf).indexOf(t)>=0?t:Wf.UNKNOWN}(s.status);o(new Hf(c,s.message))}else o(new Hf(Wf.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Hf(Wf.UNAVAILABLE,"Connection failed."));break;default:qf()}}finally{jf(Pk,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);jf(Pk,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Mo",value:function(e,t,n){var r=Ck(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Sf(),o=Ef(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Co(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");jf(Pk,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new Nk({ho:function(t){h?jf(Pk,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(jf(Pk,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),jf(Pk,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},Po:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Nf.EventType.OPEN,(function(){h||jf(Pk,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Nf.EventType.CLOSE,(function(){h||(h=!0,jf(Pk,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.mo())})),p(l,Nf.EventType.ERROR,(function(t){h||(h=!0,zf(Pk,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.mo(new Hf(Wf.UNAVAILABLE,"The operation could not be completed")))})),p(l,Nf.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];Kf(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){jf(Pk,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Jv[e];if(void 0!==t)return om(t)}(u),c=o.message;void 0===s&&(s=Wf.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.mo(new Hf(s,c)),l.close()}else jf(Pk,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.fo(i)}})),p(o,Cf.STAT_EVENT,(function(t){t.stat===Af.PROXY?jf(Pk,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Af.NOPROXY&&jf(Pk,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.Vo()}),0),d}}]),n}(function(){function e(t){Ft(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo="projects/".concat(r,"/databases/").concat(i),this.wo="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return jt(e,[{key:"So",get:function(){return!1}},{key:"bo",value:function(e,t,n,r,i){var a=Ck(),o=this.Do(e,t);jf("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(u,r,i),this.vo(e,o,u,n).then((function(t){return jf("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw zf("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Fo",value:function(e,t,n,r,i,a){return this.bo(e,t,n,r,i)}},{key:"Co",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Do",value:function(e,t){var n=Ak[e];return"".concat(this.po,"/v1/").concat(t,":").concat(n)}}]),e}());function Rk(){return"undefined"!=typeof window?window:null}function Dk(){return"undefined"!=typeof document?document:null}function Lk(e){return new Im(e,!0)}var Mk=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Ft(this,e),this._i=t,this.timerId=n,this.xo=r,this.Oo=i,this.No=a,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}return jt(e,[{key:"reset",value:function(){this.Bo=0}},{key:"qo",value:function(){this.Bo=this.No}},{key:"Qo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,n-r);i>0&&jf("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Bo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,(function(){return t.ko=Date.now(),e()})),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}},{key:"$o",value:function(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}},{key:"cancel",value:function(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"Ko",value:function(){return(Math.random()-.5)*this.Bo}}]),e}(),Fk=function(){function e(t,n,r,i,a,o,u,s){Ft(this,e),this._i=t,this.Uo=r,this.Wo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new Mk(t,n)}return jt(e,[{key:"Jo",value:function(){return 1===this.state||5===this.state||this.Yo()}},{key:"Yo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Zo()}},{key:"stop",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Jo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Xo",value:function(){this.state=0,this.Ho.reset()}},{key:"e_",value:function(){var e=this;this.Yo()&&null===this.zo&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,(function(){return e.t_()})))}},{key:"n_",value:function(e){this.r_(),this.stream.send(e)}},{key:"t_",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Yo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"r_",value:function(){this.zo&&(this.zo.cancel(),this.zo=null)}},{key:"i_",value:function(){this.jo&&(this.jo.cancel(),this.jo=null)}},{key:"close",value:function(){var e=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.r_(),this.i_(),this.Ho.cancel(),this.Go++,4!==t?this.Ho.reset():n&&n.code===Wf.RESOURCE_EXHAUSTED?(Vf(n.toString()),Vf("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):n&&n.code===Wf.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.s_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"s_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=Dt(t,2),i=r[0],a=r[1];e.Go===n&&e.__(i,a)}),(function(n){t((function(){var t=new Hf(Wf.UNKNOWN,"Fetching auth token failed: "+n.message);return e.a_(t)}))}))}},{key:"__",value:function(e,t){var n=this,r=this.o_(this.Go);this.stream=this.u_(e,t),this.stream.Io((function(){r((function(){return n.state=2,n.jo=n._i.enqueueAfterDelay(n.Wo,1e4,(function(){return n.Yo()&&(n.state=3),Promise.resolve()})),n.listener.Io()}))})),this.stream.Eo((function(e){r((function(){return n.a_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Zo",value:function(){var e=this;this.state=5,this.Ho.Qo(hr(lr().mark((function t(){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"a_",value:function(e){return jf("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"o_",value:function(e){var t=this;return function(n){t._i.enqueueAndForget((function(){return t.Go===e?n():(jf("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Uk=function(e){zt(n,e);var t=Gt(n);function n(e,r,i,a,o,u){var s;return Ft(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return jt(n,[{key:"u_",value:function(e,t){return this.connection.Mo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Ho.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:qf()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Kf(void 0===t||"string"==typeof t),Nd.fromBase64String(t||"")):(Kf(void 0===t||t instanceof Uint8Array),Nd.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Wf.UNKNOWN:om(e.code);return new Hf(t,e.message||"")}(o);n=new gm(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Lm(e,s.document.name),l=Pm(s.document.updateTime),f=s.document.createTime?Pm(s.document.createTime):ch.min(),h=new up({mapValue:{fields:s.document.fields}}),d=cp.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new mm(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Lm(e,m.document),g=m.readTime?Pm(m.readTime):ch.min(),k=cp.newNoDocument(y,g),b=m.removedTargetIds||[];n=new mm([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=Lm(e,w.document),x=w.removedTargetIds||[];n=new mm([],x,_,null)}else{if(!("filter"in t))return qf();t.filter;var S=t.filter;S.targetId;var E=S.count,I=void 0===E?0:E,T=S.unchangedNames,C=new im(I,T),A=S.targetId;n=new ym(A,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ch.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ch.min():t.readTime?Pm(t.readTime):ch.min()}(e);return this.listener.c_(t,n)}},{key:"l_",value:function(e){var t={};t.database=Um(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Up(r)?{documents:Gm(e,r)}:{query:Wm(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Am(e,t.resumeToken);var i=Tm(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(ch.min())>0){n.readTime=Cm(e,t.snapshotVersion.toTimestamp());var a=Tm(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qf()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.n_(t)}},{key:"h_",value:function(e){var t={};t.database=Um(this.serializer),t.removeTarget=e,this.n_(t)}}]),n}(Fk),jk=function(e){zt(n,e);var t=Gt(n);function n(e,r,i,a,o,u){var s;return Ft(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.P_=!1,s}return jt(n,[{key:"I_",get:function(){return this.P_}},{key:"start",value:function(){this.P_=!1,this.lastStreamToken=void 0,hu(Bt(n.prototype),"start",this).call(this)}},{key:"s_",value:function(){this.P_&&this.d_([])}},{key:"u_",value:function(e,t){return this.connection.Mo("Write",e,t)}},{key:"onMessage",value:function(e){if(Kf(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();var t=function(e,t){return e&&e.length>0?(Kf(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Pm(e.updateTime):Pm(t);return n.isEqual(ch.min())&&(n=Pm(t)),new Fv(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Pm(e.commitTime);return this.listener.T_(n,t)}return Kf(!e.writeResults||0===e.writeResults.length),this.P_=!0,this.listener.E_()}},{key:"A_",value:function(){var e={};e.database=Um(this.serializer),this.n_(e)}},{key:"d_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return qm(t.serializer,e)}))};this.n_(n)}}]),n}(Fk),Vk=function(e){zt(n,e);var t=Gt(n);function n(e,r,i,a){var o;return Ft(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.R_=!1,o}return jt(n,[{key:"V_",value:function(){if(this.R_)throw new Hf(Wf.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"bo",value:function(e,t,n){var r=this;return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=Dt(i,2),o=a[0],u=a[1];return r.connection.bo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Wf.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Hf(Wf.UNKNOWN,e.toString())}))}},{key:"Fo",value:function(e,t,n,r){var i=this;return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=Dt(a,2),u=o[0],s=o[1];return i.connection.Fo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Wf.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Hf(Wf.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.R_=!0}}]),n}(jt((function e(){Ft(this,e)})));var zk=function(){function e(t,n){Ft(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}return jt(e,[{key:"y_",value:function(){var e=this;0===this.f_&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.g_=null,e.S_("Backend didn't respond within 10 seconds."),e.w_("Offline"),Promise.resolve()})))}},{key:"b_",value:function(e){"Online"===this.state?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.w_("Offline")))}},{key:"set",value:function(e){this.D_(),this.f_=0,"Online"===e&&(this.p_=!1),this.w_(e)}},{key:"w_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"S_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.p_?(Vf(t),this.p_=!1):jf("OnlineStateTracker",t)}},{key:"D_",value:function(){null!==this.g_&&(this.g_.cancel(),this.g_=null)}}]),e}(),Bk=jt((function e(t,n,r,i,a){var o=this;Ft(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=a,this.x_.so((function(e){r.enqueueAndForget(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Zk(o),!e.t0){e.next=5;break}return jf("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Gf(t)).F_.add(4),e.next=4,Gk(n);case 4:return n.O_.set("Unknown"),n.F_.delete(4),e.next=8,qk(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.O_=new zk(r,i)}));function qk(e){return Kk.apply(this,arguments)}function Kk(){return Kk=hr(lr().mark((function e(t){var n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Zk(t)){e.next=18;break}n=$t(t.M_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Kk.apply(this,arguments)}function Gk(e){return Wk.apply(this,arguments)}function Wk(){return Wk=hr(lr().mark((function e(t){var n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=$t(t.M_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Wk.apply(this,arguments)}function Hk(e,t){var n=Gf(e);n.v_.has(t.targetId)||(n.v_.set(t.targetId,t),Xk(n)?Jk(n):Cb(n).Yo()&&$k(n,t))}function Qk(e,t){var n=Gf(e),r=Cb(n);n.v_.delete(t),r.Yo()&&Yk(n,t),0===n.v_.size&&(r.Yo()?r.e_():Zk(n)&&n.O_.set("Unknown"))}function $k(e,t){if(e.N_.Le(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ch.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Cb(e).l_(t)}function Yk(e,t){e.N_.Le(t),Cb(e).h_(t)}function Jk(e){e.N_=new bm({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.v_.get(t)||null},st:function(){return e.datastore.serializer.databaseId}}),Cb(e).start(),e.O_.y_()}function Xk(e){return Zk(e)&&!Cb(e).Jo()&&e.v_.size>0}function Zk(e){return 0===Gf(e).F_.size}function eb(e){e.N_=void 0}function tb(e){return nb.apply(this,arguments)}function nb(){return nb=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.v_.forEach((function(e,n){$k(t,e)}));case 1:case"end":return e.stop()}}),e)}))),nb.apply(this,arguments)}function rb(e,t){return ib.apply(this,arguments)}function ib(){return ib=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:eb(t),Xk(t)?(t.O_.b_(n),Jk(t)):t.O_.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),ib.apply(this,arguments)}function ab(e,t,n){return ob.apply(this,arguments)}function ob(){return ob=hr(lr().mark((function e(t,n,r){var i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.O_.set("Online"),!(n instanceof gm&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=hr(lr().mark((function e(t,n){var r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=$t(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.v_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.v_.delete(o),t.N_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),jf("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,ub(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof mm?t.N_.Ge(n):n instanceof ym?t.N_.Xe(n):t.N_.He(n),r.isEqual(ch.min())){e.next=29;break}return e.prev=14,e.next=17,ek(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.N_._t(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.v_.get(r);i&&e.v_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.v_.get(t);if(r){e.v_.set(t,r.withResumeToken(Nd.EMPTY_BYTE_STRING,r.snapshotVersion)),Yk(e,t);var i=new ry(r.target,t,n,r.sequenceNumber);$k(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),jf("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,ub(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),ob.apply(this,arguments)}function ub(e,t,n){return sb.apply(this,arguments)}function sb(){return sb=hr(lr().mark((function e(t,n,r){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Rh(n)){e.next=2;break}throw n;case 2:return t.F_.add(1),e.next=5,Gk(t);case 5:t.O_.set("Offline"),r||(r=function(){return ek(t.localStore)}),t.asyncQueue.enqueueRetryable(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jf("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.F_.delete(1),e.next=6,qk(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),sb.apply(this,arguments)}function cb(e,t){return t().catch((function(n){return ub(e,n,t)}))}function lb(e){return fb.apply(this,arguments)}function fb(){return fb=hr(lr().mark((function e(t){var n,r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Gf(t),r=Ab(n),i=n.C_.length>0?n.C_[n.C_.length-1].batchId:-1;case 2:if(!hb(n)){e.next=19;break}return e.prev=3,e.next=6,rk(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.C_.length&&r.e_(),e.abrupt("break",19);case 10:i=a.batchId,db(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,ub(n,e.t0);case 17:e.next=2;break;case 19:pb(n)&&vb(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),fb.apply(this,arguments)}function hb(e){return Zk(e)&&e.C_.length<10}function db(e,t){e.C_.push(t);var n=Ab(e);n.Yo()&&n.I_&&n.d_(t.mutations)}function pb(e){return Zk(e)&&!Ab(e).Jo()&&e.C_.length>0}function vb(e){Ab(e).start()}function mb(e){return yb.apply(this,arguments)}function yb(){return yb=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ab(t).A_();case 1:case"end":return e.stop()}}),e)}))),yb.apply(this,arguments)}function gb(e){return kb.apply(this,arguments)}function kb(){return kb=hr(lr().mark((function e(t){var n,r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ab(t),r=$t(t.C_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.d_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),kb.apply(this,arguments)}function bb(e,t,n){return wb.apply(this,arguments)}function wb(){return wb=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.C_.shift(),a=nm.from(i,n,r),e.next=3,cb(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,lb(t);case 5:case"end":return e.stop()}}),e)}))),wb.apply(this,arguments)}function _b(e,t){return xb.apply(this,arguments)}function xb(){return xb=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Ab(t).I_,!e.t0){e.next=4;break}return e.next=4,function(){var e=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return am(e)&&e!==Wf.ABORTED}(n.code)){e.next=7;break}return r=t.C_.shift(),Ab(t).Xo(),e.next=5,cb(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,lb(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:pb(t)&&vb(t);case 5:case"end":return e.stop()}}),e)}))),xb.apply(this,arguments)}function Sb(e,t){return Eb.apply(this,arguments)}function Eb(){return Eb=hr(lr().mark((function e(t,n){var r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Gf(t)).asyncQueue.verifyOperationInProgress(),jf("RemoteStore","RemoteStore received new credentials"),i=Zk(r),r.F_.add(3),e.next=6,Gk(r);case 6:return i&&r.O_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.F_.delete(3),e.next=12,qk(r);case 12:case"end":return e.stop()}}),e)}))),Eb.apply(this,arguments)}function Ib(e,t){return Tb.apply(this,arguments)}function Tb(){return Tb=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gf(t),!n){e.next=7;break}return r.F_.delete(2),e.next=5,qk(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.F_.add(2),e.next=12,Gk(r);case 12:r.O_.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Tb.apply(this,arguments)}function Cb(e){return e.B_||(e.B_=function(e,t,n){var r=Gf(e);return r.V_(),new Uk(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Io:tb.bind(null,e),Eo:rb.bind(null,e),c_:ab.bind(null,e)}),e.M_.push(function(){var t=hr(lr().mark((function t(n){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.B_.Xo(),Xk(e)?Jk(e):e.O_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.B_.stop();case 6:eb(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.B_}function Ab(e){return e.L_||(e.L_=function(e,t,n){var r=Gf(e);return r.V_(),new jk(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Io:mb.bind(null,e),Eo:_b.bind(null,e),E_:gb.bind(null,e),T_:bb.bind(null,e)}),e.M_.push(function(){var t=hr(lr().mark((function t(n){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.L_.Xo(),t.next=4,lb(e);case 4:t.next=9;break;case 6:return t.next=8,e.L_.stop();case 8:e.C_.length>0&&(jf("RemoteStore","Stopping write stream with ".concat(e.C_.length," pending writes")),e.C_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.L_}var Nb=function(){function e(t,n,r,i,a){Ft(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return jt(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Hf(Wf.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Pb(e,t){if(Vf("AsyncQueue","".concat(t,": ").concat(e)),Rh(e))return new Hf(Wf.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Ob=function(){function e(t){Ft(this,e),this.comparator=t?function(e,n){return t(e,n)||ph.comparator(e.key,n.key)}:function(e,t){return ph.comparator(e.key,t.key)},this.keyedMap=fv(),this.sortedSet=new _d(this.comparator)}return jt(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Rb=function(){function e(){Ft(this,e),this.k_=new _d(ph.comparator)}return jt(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.k_.get(t);n?0!==e.type&&3===n.type?this.k_=this.k_.insert(t,e):3===e.type&&1!==n.type?this.k_=this.k_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.k_=this.k_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.k_=this.k_.remove(t):1===e.type&&2===n.type?this.k_=this.k_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):qf():this.k_=this.k_.insert(t,e)}},{key:"q_",value:function(){var e=[];return this.k_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Db=function(){function e(t,n,r,i,a,o,u,s,c){Ft(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return jt(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ev(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Ob.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Lb=jt((function e(){Ft(this,e),this.Q_=void 0,this.listeners=[]})),Mb=jt((function e(){Ft(this,e),this.queries=new uv((function(e){return tv(e)}),ev),this.onlineState="Unknown",this.K_=new Set}));function Fb(e,t){return Ub.apply(this,arguments)}function Ub(){return Ub=hr(lr().mark((function e(t,n){var r,i,a,o,u;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gf(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Lb),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Q_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Pb(e.t0,"Initialization of query '".concat(nv(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.U_(r.onlineState),o.Q_&&n.W_(o.Q_)&&qb(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ub.apply(this,arguments)}function jb(e,t){return Vb.apply(this,arguments)}function Vb(){return Vb=hr(lr().mark((function e(t,n){var r,i,a,o,u;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gf(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Vb.apply(this,arguments)}function zb(e,t){var n,r=Gf(e),i=!1,a=$t(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=$t(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.W_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Q_=o}}}catch(f){a.e(f)}finally{a.f()}i&&qb(r)}function Bb(e,t,n){var r=Gf(e),i=r.queries.get(t);if(i){var a,o=$t(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function qb(e){e.K_.forEach((function(e){e.next()}))}var Kb=function(){function e(t,n,r){Ft(this,e),this.query=t,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}return jt(e,[{key:"W_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=$t(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Db(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.z_?this.H_(e)&&(this.G_.next(e),a=!0):this.J_(e,this.onlineState)&&(this.Y_(e),a=!0),this.j_=e,a}},{key:"onError",value:function(e){this.G_.error(e)}},{key:"U_",value:function(e){this.onlineState=e;var t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}},{key:"J_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"H_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Y_",value:function(e){e=Db.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}]),e}(),Gb=function(){function e(t,n){Ft(this,e),this.X_=t,this.byteLength=n}return jt(e,[{key:"ea",value:function(){return"metadata"in this.X_}}]),e}(),Wb=function(){function e(t){Ft(this,e),this.serializer=t}return jt(e,[{key:"Is",value:function(e){return Lm(this.serializer,e)}},{key:"ds",value:function(e){return e.metadata.exists?zm(this.serializer,e.document,!1):cp.newNoDocument(this.Is(e.metadata.name),this.Ts(e.metadata.readTime))}},{key:"Ts",value:function(e){return Pm(e)}}]),e}(),Hb=function(){function e(t,n,r){Ft(this,e),this.ta=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Qb(t)}return jt(e,[{key:"na",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;var n=fh.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ra",value:function(e){var t,n=new Map,r=new Wb(this.serializer),i=$t(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Is(a.metadata.name),s=$t(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||gv()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=hr(lr().mark((function e(){var t,n,r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fk(this.localStore,new Wb(this.serializer),this.documents,this.ta.id);case 2:t=e.sent,n=this.ra(this.documents),r=$t(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,dk(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Qb(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var $b=jt((function e(t){Ft(this,e),this.key=t})),Yb=jt((function e(t){Ft(this,e),this.key=t})),Jb=function(){function e(t,n){Ft(this,e),this.query=t,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=gv(),this.mutatedKeys=gv(),this.ua=av(t),this.ca=new Ob(this.ua)}return jt(e,[{key:"la",get:function(){return this.oa}},{key:"ha",value:function(e,t){var n=this,r=t?t.Pa:new Rb,i=t?t.ca:this.ca,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=rv(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Ia(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.ua(f,s)>0||c&&n.ua(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ca:o,Pa:r,es:u,mutatedKeys:a}}},{key:"Ia",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;var a=e.Pa.q_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qf()}};return n(e)-n(t)}(e.type,t.type)||r.ua(e.doc,t.doc)})),this.da(n);var o=t?this.Ta():[],u=0===this.aa.size&&this.current?1:0,s=u!==this._a;return this._a=u,0!==a.length||s?{snapshot:new Db(this.query,e.ca,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}},{key:"U_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Rb,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}},{key:"Aa",value:function(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}},{key:"da",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.oa=t.oa.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.oa=t.oa.delete(e)})),this.current=e.current)}},{key:"Ta",value:function(){var e=this;if(!this.current)return[];var t=this.aa;this.aa=gv(),this.ca.forEach((function(t){e.Aa(t.key)&&(e.aa=e.aa.add(t.key))}));var n=[];return t.forEach((function(t){e.aa.has(t)||n.push(new Yb(t))})),this.aa.forEach((function(e){t.has(e)||n.push(new $b(e))})),n}},{key:"Ra",value:function(e){this.oa=e.Ps,this.aa=gv();var t=this.ha(e.documents);return this.applyChanges(t,!0)}},{key:"Va",value:function(){return Db.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}]),e}(),Xb=jt((function e(t,n,r){Ft(this,e),this.query=t,this.targetId=n,this.view=r})),Zb=jt((function e(t){Ft(this,e),this.key=t,this.ma=!1})),ew=function(){function e(t,n,r,i,a,o){Ft(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new uv((function(e){return tv(e)}),ev),this.pa=new Map,this.ya=new Set,this.wa=new _d(ph.comparator),this.Sa=new Map,this.ba=new Ng,this.Da={},this.Ca=new Map,this.va=ag.Ln(),this.onlineState="Unknown",this.Fa=void 0}return jt(e,[{key:"isPrimaryClient",get:function(){return!0===this.Fa}}]),e}();function tw(e,t){return nw.apply(this,arguments)}function nw(){return nw=hr(lr().mark((function e(t,n){var r,i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Qw(t),!(o=r.ga.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Va(),e.next=15;break;case 6:return e.next=8,ik(r.localStore,Yp(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,rw(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&Hk(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),nw.apply(this,arguments)}function rw(e,t,n,r,i){return iw.apply(this,arguments)}function iw(){return iw=hr(lr().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Ma=function(e,n,r){return function(){var e=hr(lr().mark((function e(t,n,r,i){var a,o,u;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ha(r),e.t0=a.es,!e.t0){e.next=6;break}return e.next=5,uk(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ha(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Sw(t,n.targetId,u.Ea),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,uk(t.localStore,n,!0);case 3:return o=e.sent,u=new Jb(n,o.Ps),s=u.ha(o.documents),c=vm.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),Sw(t,r,l.Ea),f=new Xb(n,r,u),e.abrupt("return",(t.ga.set(n,f),t.pa.has(r)?t.pa.get(r).push(n):t.pa.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),iw.apply(this,arguments)}function aw(e,t){return ow.apply(this,arguments)}function ow(){return ow=hr(lr().mark((function e(t,n){var r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Gf(t),i=r.ga.get(n),!((a=r.pa.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.pa.set(i.targetId,a.filter((function(e){return!ev(e,n)}))),void r.ga.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,ak(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Qk(r.remoteStore,i.targetId),_w(r,i.targetId)})).catch(Ih);case 9:e.next=14;break;case 11:return _w(r,i.targetId),e.next=14,ak(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),ow.apply(this,arguments)}function uw(e,t,n){return sw.apply(this,arguments)}function sw(){return sw=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$w(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Gf(e),a=sh.now(),o=t.reduce((function(e,t){return e.add(t.key)}),gv());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=cv(),s=gv();return i._s.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=$t(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Kv(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Hv(c.key,l,sp(l.value.mapValue),Uv.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:hv(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Da[e.currentUser.toKey()];r||(r=new _d(ah)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Tw(i,a.changes);case 9:return e.next=11,lb(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Pb(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),sw.apply(this,arguments)}function cw(e,t){return lw.apply(this,arguments)}function lw(){return lw=hr(lr().mark((function e(t,n){var r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gf(t),e.prev=1,e.next=4,tk(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Sa.get(t);n&&(Kf(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ma=!0:e.modifiedDocuments.size>0?Kf(n.ma):e.removedDocuments.size>0&&(Kf(n.ma),n.ma=!1))})),e.next=8,Tw(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Ih(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),lw.apply(this,arguments)}function fw(e,t,n){var r=Gf(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ga.forEach((function(e,n){var r=n.view.U_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Gf(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=$t(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.U_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&qb(n)}(r.eventManager,t),i.length&&r.fa.c_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function hw(e,t,n){return dw.apply(this,arguments)}function dw(){return dw=hr(lr().mark((function e(t,n,r){var i,a,o,u,s,c;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Gf(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Sa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new _d(ph.comparator)).insert(o,cp.newNoDocument(o,ch.min())),s=gv().add(o),c=new pm(ch.min(),new Map,new _d(ah),u,s),e.next=9,cw(i,c);case 9:i.wa=i.wa.remove(o),i.Sa.delete(n),Iw(i),e.next=16;break;case 14:return e.next=16,ak(i.localStore,n,!1).then((function(){return _w(i,n,r)})).catch(Ih);case 16:case"end":return e.stop()}}),e)}))),dw.apply(this,arguments)}function pw(e,t){return vw.apply(this,arguments)}function vw(){return vw=hr(lr().mark((function e(t,n){var r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gf(t),i=n.batch.batchId,e.prev=1,e.next=4,Zg(r.localStore,n);case 4:return a=e.sent,ww(r,i,null),bw(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Tw(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ih(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),vw.apply(this,arguments)}function mw(e,t,n){return yw.apply(this,arguments)}function yw(){return yw=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gf(t),e.prev=1,e.next=4,function(e,t){var n=Gf(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Kf(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,ww(i,n,r),bw(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Tw(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ih(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),yw.apply(this,arguments)}function gw(e,t){return kw.apply(this,arguments)}function kw(){return kw=hr(lr().mark((function e(t,n){var r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zk((r=Gf(t)).remoteStore)||jf("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Gf(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ca.get(i)||[]).push(n),r.Ca.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Pb(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),kw.apply(this,arguments)}function bw(e,t){(e.Ca.get(t)||[]).forEach((function(e){e.resolve()})),e.Ca.delete(t)}function ww(e,t,n){var r=Gf(e),i=r.Da[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function _w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=$t(e.pa.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ga.delete(a),n&&e.fa.xa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.pa.delete(t),e.isPrimaryClient&&e.ba.mr(t).forEach((function(t){e.ba.containsKey(t)||xw(e,t)}))}function xw(e,t){e.ya.delete(t.path.canonicalString());var n=e.wa.get(t);null!==n&&(Qk(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Iw(e))}function Sw(e,t,n){var r,i=$t(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof $b?(e.ba.addReference(a.key,t),Ew(e,a)):a instanceof Yb?(jf("SyncEngine","Document no longer in limbo: "+a.key),e.ba.removeReference(a.key,t),e.ba.containsKey(a.key)||xw(e,a.key)):qf()}}catch(o){i.e(o)}finally{i.f()}}function Ew(e,t){var n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(jf("SyncEngine","New document in limbo: "+n),e.ya.add(r),Iw(e))}function Iw(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){var t=e.ya.values().next().value;e.ya.delete(t);var n=new ph(fh.fromString(t)),r=e.va.next();e.Sa.set(r,new Zb(n)),e.wa=e.wa.insert(n,r),Hk(e.remoteStore,new ry(Yp(Kp(n.path)),r,"TargetPurposeLimboResolution",Vh.ae))}}function Tw(e,t,n){return Cw.apply(this,arguments)}function Cw(){return Cw=hr(lr().mark((function e(t,n,r){var i,a,o,u;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Gf(t),a=[],o=[],u=[],e.t0=i.ga.isEmpty(),e.t0){e.next=9;break}return i.ga.forEach((function(e,t){u.push(i.Ma(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Wg.$i(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.fa.c_(a),e.next=9,function(){var e=hr(lr().mark((function e(t,n){var r,i,a,o,u,s,c,l;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gf(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ch.forEach(n,(function(t){return Ch.forEach(t.Qi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Ch.forEach(t.Ki,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Rh(e.t0)){e.next=10;break}throw e.t0;case 10:jf("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=$t(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.rs.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.rs=r.rs.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}function Aw(e,t){return Nw.apply(this,arguments)}function Nw(){return Nw=hr(lr().mark((function e(t,n){var r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Gf(t)).currentUser.isEqual(n)){e.next=11;break}return jf("SyncEngine","User change. New user:",n.toKey()),e.next=5,Jg(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ca.forEach((function(e){e.forEach((function(e){e.reject(new Hf(Wf.CANCELLED,t))}))})),e.Ca.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Tw(r,i.cs);case 11:case"end":return e.stop()}}),e)}))),Nw.apply(this,arguments)}function Pw(e,t){var n=Gf(e),r=n.Sa.get(t);if(r&&r.ma)return gv().add(r.key);var i=gv(),a=n.pa.get(t);if(!a)return i;var o,u=$t(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ga.get(s);i=i.unionWith(c.view.la)}}catch(l){u.e(l)}finally{u.f()}return i}function Ow(e,t){return Rw.apply(this,arguments)}function Rw(){return Rw=hr(lr().mark((function e(t,n){var r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gf(t),e.next=3,uk(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ra(i),e.abrupt("return",(r.isPrimaryClient&&Sw(r,n.targetId,a.Ea),a));case 6:case"end":return e.stop()}}),e)}))),Rw.apply(this,arguments)}function Dw(e,t){return Lw.apply(this,arguments)}function Lw(){return Lw=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gf(t),e.abrupt("return",ck(r.localStore,n).then((function(e){return Tw(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Lw.apply(this,arguments)}function Mw(e,t,n,r){return Fw.apply(this,arguments)}function Fw(){return Fw=hr(lr().mark((function e(t,n,r,i){var a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Gf(t),e.next=3,function(e,t){var n=Gf(e),r=Gf(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Fn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Ch.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,lb(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(ww(a,n,i||null),bw(a,n),function(e,t){Gf(Gf(e).mutationQueue).xn(t)}(a.localStore,n)):qf();case 11:return e.next=13,Tw(a,o);case 13:e.next=16;break;case 15:jf("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Fw.apply(this,arguments)}function Uw(e,t){return jw.apply(this,arguments)}function jw(){return jw=hr(lr().mark((function e(t,n){var r,i,a,o,u,s,c,l;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qw(r=Gf(t)),$w(r),!0!==n||!0===r.Fa){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Vw(r,i.toArray());case 5:return a=e.sent,r.Fa=!0,e.next=9,Ib(r.remoteStore,!0);case 9:o=$t(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Hk(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Fa){e.next=25;break}return c=[],l=Promise.resolve(),r.pa.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return _w(r,t),ak(r.localStore,t,!0)})),Qk(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Vw(r,c);case 21:return function(e){var t=Gf(e);t.Sa.forEach((function(e,n){Qk(t.remoteStore,n)})),t.ba.gr(),t.Sa=new Map,t.wa=new _d(ph.comparator)}(r),r.Fa=!1,e.next=25,Ib(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),jw.apply(this,arguments)}function Vw(e,t,n){return zw.apply(this,arguments)}function zw(){return zw=hr(lr().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Gf(t),a=[],o=[],u=$t(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.pa.get(c))||0===f.length){e.next=34;break}return e.next=11,ik(i.localStore,Yp(f[0]));case 11:l=e.sent,h=$t(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ga.get(p),e.next=20,Ow(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,sk(i.localStore,c);case 36:return y=e.sent,e.next=39,ik(i.localStore,y);case 39:return l=e.sent,e.next=42,rw(i,Bw(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.fa.c_(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),zw.apply(this,arguments)}function Bw(e){return qp(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function qw(e){return function(e){return Gf(Gf(e).persistence).ki()}(Gf(e).localStore)}function Kw(e,t,n,r){return Gw.apply(this,arguments)}function Gw(){return Gw=hr(lr().mark((function e(t,n,r,i){var a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Gf(t)).Fa){e.next=3;break}return e.abrupt("return",void jf("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.pa.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,ck(a.localStore,iv(o[0]));case 10:return u=e.sent,s=pm.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Nd.EMPTY_BYTE_STRING),e.next=14,Tw(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,ak(a.localStore,n,!0);case 17:return _w(a,n,i),e.abrupt("break",20);case 19:qf();case 20:case"end":return e.stop()}}),e)}))),Gw.apply(this,arguments)}function Ww(e,t,n){return Hw.apply(this,arguments)}function Hw(){return Hw=hr(lr().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Qw(t)).Fa){e.next=45;break}a=$t(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.pa.has(u)){e.next=10;break}return jf("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,sk(i.localStore,u);case 12:return s=e.sent,e.next=15,ik(i.localStore,s);case 15:return c=e.sent,e.next=18,rw(i,Bw(s),c.targetId,!1,c.resumeToken);case 18:Hk(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=$t(r),e.prev=30,h=lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.pa.has(t),!e.t0){e.next=5;break}return e.next=5,ak(i.localStore,t,!1).then((function(){Qk(i.remoteStore,t),_w(i,t)})).catch(Ih);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Hw.apply(this,arguments)}function Qw(e){var t=Gf(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=cw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hw.bind(null,t),t.fa.c_=zb.bind(null,t.eventManager),t.fa.xa=Bb.bind(null,t.eventManager),t}function $w(e){var t=Gf(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=mw.bind(null,t),t}function Yw(e,t,n){var r=Gf(e);(function(){var e=hr(lr().mark((function e(t,n,r){var i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Gf(e),r=Pm(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ur.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Qb(i)),a=new Hb(i,t.localStore,n.serializer),e.next=15,n.Oa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.na(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.Oa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Tw(t,s.sa,void 0);case 31:return e.next=33,function(e,t){var n=Gf(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ur.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.ia));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(zf("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Jw=function(){function e(){Ft(this,e),this.synchronizeTabs=!1}return jt(e,[{key:"initialize",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Lk(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Yg(this.persistence,new Qg,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Mg(Ug.Jr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Sk}},{key:"terminate",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Xw=function(e){zt(n,e);var t=Gt(n);function n(e,r,i){var a;return Ft(this,n),(a=t.call(this)).Na=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return jt(n,[{key:"initialize",value:function(){var e=hr(lr().mark((function e(t){var r=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hu(Bt(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Na.initialize(this,t);case 4:return e.next=6,$w(this.Na.syncEngine);case 6:return e.next=8,lb(this.Na.remoteStore);case 8:return e.next=10,this.persistence.gi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Yg(this.persistence,new Qg,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new hg(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new jh(t,this.persistence);return new Uh(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Gg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Jy.withCacheSize(this.cacheSizeBytes):Jy.DEFAULT;return new Bg(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Rk(),Dk(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Sk}}]),n}(Jw),Zw=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this,e,r,!1)).Na=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return jt(n,[{key:"initialize",value:function(){var e=hr(lr().mark((function e(t){var r,i=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hu(Bt(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Na.syncEngine,e.t0=this.sharedClientState instanceof xk,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Xs:Mw.bind(null,r),eo:Kw.bind(null,r),no:Ww.bind(null,r),ki:qw.bind(null,r),Zs:Dw.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.gi(function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uw(i.Na.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=Rk();if(!xk.C(t))throw new Hf(Wf.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Gg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xk(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Xw),e_=function(){function e(){Ft(this,e)}return jt(e,[{key:"initialize",value:function(){var e=hr(lr().mark((function e(t,n){var r=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return fw(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Aw.bind(null,this.syncEngine),e.next=12,Ib(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Mb}},{key:"createDatastore",value:function(e){var t=Lk(e.databaseInfo.databaseId),n=function(e){return new Ok(e)}(e.databaseInfo);return function(e,t,n,r){return new Vk(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new Bk(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return fw(t.syncEngine,e,0)}),Ik.C()?new Ik:new Ek)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new ew(e,t,n,r,i,a);return o&&(u.Fa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gf(t),jf("RemoteStore","RemoteStore shutting down."),n.F_.add(5),e.next=5,Gk(n);case 5:n.x_.shutdown(),n.O_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function t_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return hr(lr().mark((function r(){var i;return lr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var n_=function(){function e(t){Ft(this,e),this.observer=t,this.muted=!1}return jt(e,[{key:"next",value:function(e){this.observer.next&&this.Ba(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ba(this.observer.error,e):Vf("Uncaught Error in snapshot listener:",e.toString())}},{key:"La",value:function(){this.muted=!0}},{key:"Ba",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),r_=function(){function e(t,n){var r=this;Ft(this,e),this.ka=t,this.serializer=n,this.metadata=new Qf,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((function(e){e&&e.ea()?r.metadata.resolve(e.X_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(function(e){return r.metadata.reject(e)}))}return jt(e,[{key:"close",value:function(){return this.ka.cancel()}},{key:"getMetadata",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oa",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Qa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qa",value:function(){var e=hr(lr().mark((function e(){var t,n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ka();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.qa.decode(t),r=Number(n),isNaN(r)&&this.$a("length string (".concat(n,") is not valid number")),e.next=9,this.Ua(r);case 9:return i=e.sent,e.abrupt("return",new Gb(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ka",value:function(){var e=hr(lr().mark((function e(){var t,n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Wa()<0)){e.next=7;break}return e.next=3,this.Ga();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Wa())<0&&this.$a("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ua",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ga();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.$a("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.qa.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"$a",value:function(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ga",value:function(){var e=hr(lr().mark((function e(){var t,n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ka.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),i_=function(){function e(t){Ft(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return jt(e,[{key:"lookup",value:function(){var e=hr(lr().mark((function e(t){var n,r=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Hf(Wf.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=hr(lr().mark((function e(t,n){var r,i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gf(t),i=Um(r.serializer)+"/documents",a={documents:n.map((function(e){return Dm(r.serializer,e)}))},e.next=5,r.Fo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Bm(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Kf(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Zv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=hr(lr().mark((function e(){var t,n=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=ph.fromPath(t);n.mutations.push(new em(r,n.precondition(r)))})),e.next=7,function(){var e=hr(lr().mark((function e(t,n){var r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gf(t),i=Um(r.serializer)+"/documents",a={writes:n.map((function(e){return qm(r.serializer,e)}))},e.next=3,r.bo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw qf();t=ch.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Hf(Wf.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ch.min())?Uv.exists(!1):Uv.updateTime(t):Uv.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ch.min()))throw new Hf(Wf.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Uv.updateTime(t)}return Uv.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),a_=function(){function e(t,n,r,i,a){Ft(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.za=r.maxAttempts,this.Ho=new Mk(this.asyncQueue,"transaction_retry")}return jt(e,[{key:"run",value:function(){this.za-=1,this.ja()}},{key:"ja",value:function(){var e=this;this.Ho.Qo(hr(lr().mark((function t(){var n,r;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new i_(e.datastore),(r=e.Ha(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ja(t)}))}))})).catch((function(t){e.Ja(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ha",value:function(e){try{var t=this.updateFunction(e);return!zh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ja",value:function(e){var t=this;this.za>0&&this.Ya(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((function(){return t.ja(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Ya",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!am(t)}return!1}}]),e}(),o_=function(){function e(t,n,r,i){var a=this;Ft(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Lf.UNAUTHENTICATED,this.clientId=ih.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jf("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return jf("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return jt(e,[{key:"getConfiguration",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Hf(Wf.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Qf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(hr(lr().mark((function n(){var r;return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Pb(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function u_(e,t){return s_.apply(this,arguments)}function s_(){return s_=hr(lr().mark((function e(t,n){var r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),jf("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Jg(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),s_.apply(this,arguments)}function c_(e,t){return l_.apply(this,arguments)}function l_(){return l_=hr(lr().mark((function e(t,n){var r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,h_(t);case 3:return r=e.sent,jf("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Sb(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Sb(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),l_.apply(this,arguments)}function f_(e){return"FirebaseError"===e.name?e.code===Wf.FAILED_PRECONDITION||e.code===Wf.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function h_(e){return d_.apply(this,arguments)}function d_(){return d_=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return jf("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,u_(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),f_(n=e.t0)){e.next=13;break}throw n;case 13:return zf("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,u_(t,new Jw);case 16:e.next=21;break;case 18:return jf("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,u_(t,new Jw);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),d_.apply(this,arguments)}function p_(e){return v_.apply(this,arguments)}function v_(){return v_=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return jf("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,c_(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return jf("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,c_(t,new e_);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),v_.apply(this,arguments)}function m_(e){return h_(e).then((function(e){return e.persistence}))}function y_(e){return h_(e).then((function(e){return e.localStore}))}function g_(e){return p_(e).then((function(e){return e.remoteStore}))}function k_(e){return p_(e).then((function(e){return e.syncEngine}))}function b_(e){return p_(e).then((function(e){return e.datastore}))}function w_(e){return __.apply(this,arguments)}function __(){return __=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p_(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=tw.bind(null,n.syncEngine),r.onUnlisten=aw.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),__.apply(this,arguments)}function x_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Qf;return e.asyncQueue.enqueueAndForget(hr(lr().mark((function i(){return lr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new n_({next:function(a){t.enqueueAndForget((function(){return jb(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Hf(Wf.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Hf(Wf.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Kb(Kp(n.path),a,{includeMetadataChanges:!0,Z_:!0});return Fb(e,o)},i.next=3,w_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function S_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Qf;return e.asyncQueue.enqueueAndForget(hr(lr().mark((function i(){return lr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new n_({next:function(n){t.enqueueAndForget((function(){return jb(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Hf(Wf.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Kb(n,a,{includeMetadataChanges:!0,Z_:!0});return Fb(e,o)},i.next=3,w_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function E_(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var I_=new Map;function T_(e,t,n){if(!n)throw new Hf(Wf.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function C_(e,t,n,r){if(!0===t&&!0===r)throw new Hf(Wf.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function A_(e){if(!ph.isDocumentKey(e))throw new Hf(Wf.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function N_(e){if(ph.isDocumentKey(e))throw new Hf(Wf.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function P_(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":qf()}function O_(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Hf(Wf.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=P_(e);throw new Hf(Wf.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function R_(e,t){if(t<=0)throw new Hf(Wf.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var D_=function(){function e(t){var n,r;if(Ft(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Hf(Wf.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Hf(Wf.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}C_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=E_(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Hf(Wf.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Hf(Wf.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Hf(Wf.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return jt(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),L_=function(){function e(t,n,r,i){Ft(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new D_({}),this._settingsFrozen=!1}return jt(e,[{key:"app",get:function(){if(!this._app)throw new Hf(Wf.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Hf(Wf.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new D_(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Yf;switch(e.type){case"firstParty":return new eh(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Hf(Wf.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=I_.get(e);t&&(jf("ComponentProvider","Removing Datastore"),I_.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function M_(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=O_(e,L_))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&zf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=Lf.MOCK_USER;else{u=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[fa(JSON.stringify({alg:"none",type:"JWT"})),fa(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Hf(Wf.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Lf(c)}e._authCredentials=new Jf(new $f(u,s))}}var F_=function(){function e(t,n,r){Ft(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return jt(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),U_=function(){function e(t,n,r){Ft(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return jt(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new j_(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),j_=function(e){zt(n,e);var t=Gt(n);function n(e,r,i){var a;return Ft(this,n),(a=t.call(this,e,r,Kp(i)))._path=i,a.type="collection",a}return jt(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new U_(this.firestore,null,new ph(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(F_);function V_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Fa(e),T_("collection","path",t),e instanceof L_){var a=fh.fromString.apply(fh,[t].concat(r));return N_(a),new j_(e,null,a)}if(!(e instanceof U_||e instanceof j_))throw new Hf(Wf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(fh.fromString.apply(fh,[t].concat(r)));return N_(o),new j_(e.firestore,null,o)}function z_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Fa(e),1===arguments.length&&(t=ih.V()),T_("doc","path",t),e instanceof L_){var a=fh.fromString.apply(fh,[t].concat(r));return A_(a),new U_(e,null,new ph(a))}if(!(e instanceof U_||e instanceof j_))throw new Hf(Wf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(fh.fromString.apply(fh,[t].concat(r)));return A_(o),new U_(e.firestore,e instanceof j_?e.converter:null,new ph(o))}function B_(e,t){return e=Fa(e),t=Fa(t),(e instanceof U_||e instanceof j_)&&(t instanceof U_||t instanceof j_)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function q_(e,t){return e=Fa(e),t=Fa(t),e instanceof F_&&t instanceof F_&&e.firestore===t.firestore&&ev(e._query,t._query)&&e.converter===t.converter}var K_=function(){function e(){var t=this;Ft(this,e),this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new Mk(this,"async_queue_retry"),this.ou=function(){var e=Dk();e&&jf("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Ho.$o()};var n=Dk();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.ou)}return jt(e,[{key:"isShuttingDown",get:function(){return this.eu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this._u(),this.au(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.eu){this.eu=!0,this.iu=e||!1;var t=Dk();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ou)}}},{key:"enqueue",value:function(e){var t=this;if(this._u(),this.eu)return new Promise((function(){}));var n=new Qf;return this.au((function(){return t.eu&&t.iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Xa.push(e),t.uu()}))}},{key:"uu",value:function(){var e=hr(lr().mark((function e(){var t=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Xa.length){e.next=14;break}return e.prev=1,e.next=4,this.Xa[0]();case 4:this.Xa.shift(),this.Ho.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Rh(e.t0)){e.next=12;break}throw e.t0;case 12:jf("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Xa.length>0&&this.Ho.Qo((function(){return t.uu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"au",value:function(e){var t=this,n=this.Za.then((function(){return t.ru=!0,e().catch((function(e){t.nu=e,t.ru=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Vf("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.ru=!1,e}))}));return this.Za=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this._u(),this.su.indexOf(e)>-1&&(t=0);var i=Nb.createAndSchedule(this,e,t,n,(function(e){return r.cu(e)}));return this.tu.push(i),i}},{key:"_u",value:function(){this.nu&&qf()}},{key:"verifyOperationInProgress",value:function(){}},{key:"lu",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Za,e.next=3,t;case 3:if(t!==this.Za){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hu",value:function(e){var t,n=$t(this.tu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Pu",value:function(e){var t=this;return this.lu().then((function(){t.tu.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=$t(t.tu);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.lu()}))}},{key:"Iu",value:function(e){this.su.push(e)}},{key:"cu",value:function(e){var t=this.tu.indexOf(e);this.tu.splice(t,1)}}]),e}();function G_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=$t(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var W_=function(){function e(){Ft(this,e),this._progressObserver={},this._taskCompletionResolver=new Qf,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return jt(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),H_=function(e){zt(n,e);var t=Gt(n);function n(e,r,i,a){var o;return Ft(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new K_,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return jt(n,[{key:"_terminate",value:function(){return this._firestoreClient||$_(this),this._firestoreClient.terminate()}}]),n}(L_);function Q_(e){return e._firestoreClient||$_(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function $_(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Ud(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,E_(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new o_(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Y_(e,t,n){var r=new Qf;return e.asyncQueue.enqueue(hr(lr().mark((function i(){var a;return lr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,u_(e,n);case 3:return i.next=5,c_(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),f_(a=i.t0)){i.next=13;break}throw a;case 13:zf("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function J_(e){return function(e){var t=new Qf;return e.asyncQueue.enqueueAndForget(hr(lr().mark((function n(){return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=gw,n.next=3,k_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Q_(e=O_(e,H_)))}function X_(e){return function(e){return e.asyncQueue.enqueue(hr(lr().mark((function t(){var n,r;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m_(e);case 2:return n=t.sent,t.next=5,g_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Gf(e);return t.F_.delete(0),qk(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Q_(e=O_(e,H_)))}function Z_(e){return function(e){return e.asyncQueue.enqueue(hr(lr().mark((function t(){var n,r;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m_(e);case 2:return n=t.sent,t.next=5,g_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Gf(t)).F_.add(0),e.next=4,Gk(n);case 4:n.O_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Q_(e=O_(e,H_)))}function ex(e,t){var n=Q_(e=O_(e,H_)),r=new W_;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new r_(e,t)}(function(e,t){if(e instanceof Uint8Array)return t_(e,t);if(e instanceof ArrayBuffer)return t_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?sm().encode(e):e),t)}(n,Lk(t));e.asyncQueue.enqueueAndForget(hr(lr().mark((function t(){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Yw,t.next=3,k_(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function tx(e,t){return function(e,t){return e.asyncQueue.enqueue(hr(lr().mark((function n(){return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Gf(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ur.getNamedQuery(e,t)}))},n.next=3,y_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Q_(e=O_(e,H_)),t).then((function(t){return t?new F_(e,null,t.query):null}))}function nx(e){if(e._initialized||e._terminated)throw new Hf(Wf.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var rx=function(){function e(t){Ft(this,e),this._byteString=t}return jt(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Nd.fromBase64String(t))}catch(t){throw new Hf(Wf.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Nd.fromUint8Array(t))}}]),e}(),ix=function(){function e(){Ft(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dh(n)}return jt(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var ax=jt((function e(t){Ft(this,e),this._methodName=t})),ox=function(){function e(t,n){if(Ft(this,e),!isFinite(t)||t<-90||t>90)throw new Hf(Wf.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Hf(Wf.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return jt(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return ah(this._lat,e._lat)||ah(this._long,e._long)}}]),e}(),ux=/^__.*__$/,sx=function(){function e(t,n,r){Ft(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return jt(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Hv(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wv(e,this.data,t,this.fieldTransforms)}}]),e}(),cx=function(){function e(t,n,r){Ft(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return jt(e,[{key:"toMutation",value:function(e,t){return new Hv(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function lx(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qf()}}var fx=function(){function e(t,n,r,i,a,o){Ft(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.du(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return jt(e,[{key:"path",get:function(){return this.settings.path}},{key:"Tu",get:function(){return this.settings.Tu}},{key:"Eu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Au",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Ru:!1});return r.Vu(e),r}},{key:"mu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Ru:!1});return r.du(),r}},{key:"fu",value:function(e){return this.Eu({path:void 0,Ru:!0})}},{key:"gu",value:function(e){return Px(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"du",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}},{key:"Vu",value:function(e){if(0===e.length)throw this.gu("Document fields must not be empty");if(lx(this.Tu)&&ux.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}]),e}(),hx=function(){function e(t,n,r){Ft(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Lk(t)}return jt(e,[{key:"wu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new fx({Tu:e,methodName:t,yu:n,path:dh.emptyPath(),Ru:!1,pu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function dx(e){var t=e._freezeSettings(),n=Lk(e._databaseId);return new hx(e._databaseId,!!t.ignoreUndefinedProperties,n)}function px(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.wu(a.merge||a.mergeFields?2:0,t,n,i);Tx("Data must be an object, but it was:",o,r);var u,s,c=Ex(r,o);if(a.merge)u=new Cd(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=$t(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Cx(t,l.value,n);if(!o.contains(d))throw new Hf(Wf.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Ox(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Cd(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new sx(new up(c),u,s)}var vx=function(e){zt(n,e);var t=Gt(n);function n(){return Ft(this,n),t.apply(this,arguments)}return jt(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Tu)throw 1===e.Tu?e.gu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.gu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ax);function mx(e,t,n){return new fx({Tu:3,yu:t.settings.yu,methodName:e._methodName,Ru:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var yx=function(e){zt(n,e);var t=Gt(n);function n(){return Ft(this,n),t.apply(this,arguments)}return jt(n,[{key:"_toFieldTransform",value:function(e){return new Mv(e.path,new Cv)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ax),gx=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this,e)).Su=r,i}return jt(n,[{key:"_toFieldTransform",value:function(e){var t=mx(this,e,!0),n=this.Su.map((function(e){return Sx(e,t)})),r=new Av(n);return new Mv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ax),kx=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this,e)).Su=r,i}return jt(n,[{key:"_toFieldTransform",value:function(e){var t=mx(this,e,!0),n=this.Su.map((function(e){return Sx(e,t)})),r=new Pv(n);return new Mv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ax),bx=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this,e)).bu=r,i}return jt(n,[{key:"_toFieldTransform",value:function(e){var t=new Rv(e.serializer,xv(e.serializer,this.bu));return new Mv(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ax);function wx(e,t,n,r){var i=e.wu(1,t,n);Tx("Data must be an object, but it was:",i,r);var a=[],o=up.empty();bd(r,(function(e,r){var u=Nx(t,e,n);r=Fa(r);var s=i.mu(u);if(r instanceof vx)a.push(u);else{var c=Sx(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Cd(a);return new cx(o,u,i.fieldTransforms)}function _x(e,t,n,r,i,a){var o=e.wu(1,t,n),u=[Cx(t,r,n)],s=[i];if(a.length%2!=0)throw new Hf(Wf.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Cx(t,a[c])),s.push(a[c+1]);for(var l=[],f=up.empty(),h=u.length-1;h>=0;--h)if(!Ox(l,u[h])){var d=u[h],p=s[h];p=Fa(p);var v=o.mu(d);if(p instanceof vx)l.push(d);else{var m=Sx(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Cd(l);return new cx(f,y,o.fieldTransforms)}function xx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Sx(n,e.wu(r?4:3,t))}function Sx(e,t){if(Ix(e=Fa(e)))return Tx("Unsupported field value:",t,e),Ex(e,t);if(e instanceof ax)return function(e,t){if(!lx(t.Tu))throw t.gu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.gu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Ru&&4!==t.Tu)throw t.gu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=$t(e);try{for(a.s();!(n=a.n()).done;){var o=Sx(n.value,t.fu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Fa(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xv(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=sh.fromDate(e);return{timestampValue:Cm(t.serializer,n)}}if(e instanceof sh){var r=new sh(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Cm(t.serializer,r)}}if(e instanceof ox)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof rx)return{bytesValue:Am(t.serializer,e._byteString)};if(e instanceof U_){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.gu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Om(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.gu("Unsupported field value: ".concat(P_(e)))}(e,t)}function Ex(e,t){var n={};return wd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):bd(e,(function(e,r){var i=Sx(r,t.Au(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Ix(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof sh||e instanceof ox||e instanceof rx||e instanceof U_||e instanceof ax)}function Tx(e,t,n){if(!Ix(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=P_(n);throw"an object"===r?t.gu(e+" a custom object"):t.gu(e+" "+r)}}function Cx(e,t,n){if((t=Fa(t))instanceof ix)return t._internalPath;if("string"==typeof t)return Nx(e,t);throw Px("Field path arguments must be of type string or ",e,!1,void 0,n)}var Ax=new RegExp("[~\\*/\\[\\]]");function Nx(e,t,n){if(t.search(Ax)>=0)throw Px("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Wt(ix,Mt(t.split(".")))._internalPath}catch(R){throw Px("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Px(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Hf(Wf.INVALID_ARGUMENT,u+e+s)}function Ox(e,t){return e.some((function(e){return e.isEqual(t)}))}var Rx=function(){function e(t,n,r,i,a){Ft(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return jt(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new U_(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Dx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Lx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Dx=function(e){zt(n,e);var t=Gt(n);function n(){return Ft(this,n),t.apply(this,arguments)}return jt(n,[{key:"data",value:function(){return hu(Bt(n.prototype),"data",this).call(this)}}]),n}(Rx);function Lx(e,t){return"string"==typeof t?Nx(e,t):t instanceof ix?t._internalPath:t._delegate._internalPath}function Mx(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Hf(Wf.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Fx=jt((function e(){Ft(this,e)})),Ux=function(e){zt(n,e);var t=Gt(n);function n(){return Ft(this,n),t.apply(this,arguments)}return jt(n)}(Fx);function jx(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Fx&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof zx})).length,n=e.filter((function(e){return e instanceof Vx})).length;if(t>1||t>0&&n>0)throw new Hf(Wf.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=$t(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var Vx=function(e){zt(n,e);var t=Gt(n);function n(e,r,i){var a;return Ft(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return jt(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Zx(e._query,t),new F_(e.firestore,e.converter,Xp(e._query,t))}},{key:"_parse",value:function(e){var t=dx(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Xx(o,a);var s,c=[],l=$t(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Jx(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=Jx(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Xx(o,a),u=xx(n,t,o,"in"===a||"not-in"===a);return mp.create(i,a,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ux);var zx=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return jt(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:yp.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=$t(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Zx(r,a),r=Xp(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new F_(e.firestore,e.converter,Xp(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Fx);var Bx=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return jt(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new dp(t,n);return function(e,t){if(null===Wp(e)){var n=Hp(e);null!==n&&eS(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new F_(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Bp(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ux);var qx=function(e){zt(n,e);var t=Gt(n);function n(e,r,i){var a;return Ft(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return jt(n,[{key:"_apply",value:function(e){return new F_(e.firestore,e.converter,Zp(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ux);var Kx=function(e){zt(n,e);var t=Gt(n);function n(e,r,i){var a;return Ft(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return jt(n,[{key:"_apply",value:function(e){var t=Yx(e,this.type,this._docOrFields,this._inclusive);return new F_(e.firestore,e.converter,function(e,t){return new Bp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ux);function Gx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Kx._create("startAt",t,!0)}function Wx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Kx._create("startAfter",t,!1)}var Hx=function(e){zt(n,e);var t=Gt(n);function n(e,r,i){var a;return Ft(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return jt(n,[{key:"_apply",value:function(e){var t=Yx(e,this.type,this._docOrFields,this._inclusive);return new F_(e.firestore,e.converter,function(e,t){return new Bp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ux);function Qx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Hx._create("endBefore",t,!1)}function $x(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Hx._create("endAt",t,!0)}function Yx(e,t,n,r){if(n[0]=Fa(n[0]),n[0]instanceof Rx)return function(e,t,n,r,i){if(!r)throw new Hf(Wf.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=$t($p(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push($d(t,r.key));else{var c=r.data.field(s.field);if(Ld(c))throw new Hf(Wf.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new lp(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=dx(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Hf(Wf.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Qp(e)&&-1!==c.indexOf("/"))throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(fh.fromString(c));if(!ph.isDocumentKey(l))throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new ph(l);u.push($d(t,f))}else{var h=xx(n,r,c);u.push(h)}}return new lp(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Jx(e,t,n){if("string"==typeof(n=Fa(n))){if(""===n)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qp(t)&&-1!==n.indexOf("/"))throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(fh.fromString(n));if(!ph.isDocumentKey(r))throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return $d(e,new ph(r))}if(n instanceof U_)return $d(e,n._key);throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(P_(n),"."))}function Xx(e,t){if(!Array.isArray(e)||0===e.length)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Zx(e,t){if(t.isInequality()){var n=Hp(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Wp(e);null!==i&&eS(e,r,i)}var a=function(e,t){var n,r=$t(e);try{for(r.s();!(n=r.n()).done;){var i,a=$t(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Hf(Wf.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Hf(Wf.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function eS(e,t,n){if(!n.isEqual(t))throw new Hf(Wf.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var tS=function(){function e(){Ft(this,e)}return jt(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Bd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rd(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw qf()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return bd(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new ox(Rd(e.latitude),Rd(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Md(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fd(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Od(e);return new sh(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=fh.fromString(e);Kf(ny(n));var r=new jd(n.get(1),n.get(3)),i=new ph(n.popFirst(5));return r.isEqual(t)||Vf("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function nS(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var rS=function(e){zt(n,e);var t=Gt(n);function n(e){var r;return Ft(this,n),(r=t.call(this)).firestore=e,r}return jt(n,[{key:"convertBytes",value:function(e){return new rx(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new U_(this.firestore,null,t)}}]),n}(tS);var iS=function(){function e(t,n){Ft(this,e),this.hasPendingWrites=t,this.fromCache=n}return jt(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),aS=function(e){zt(n,e);var t=Gt(n);function n(e,r,i,a,o,u){var s;return Ft(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return jt(n,[{key:"exists",value:function(){return hu(Bt(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new oS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Lx("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Rx),oS=function(e){zt(n,e);var t=Gt(n);function n(){return Ft(this,n),t.apply(this,arguments)}return jt(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return hu(Bt(n.prototype),"data",this).call(this,e)}}]),n}(aS),uS=function(){function e(t,n,r,i){Ft(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new iS(i.hasPendingWrites,i.fromCache),this.query=r}return jt(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new oS(n._firestore,n._userDataWriter,r.key,r,new iS(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Hf(Wf.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new oS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new iS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new oS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new iS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:sS(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function sS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qf()}}function cS(e,t){return e instanceof aS&&t instanceof aS?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof uS&&t instanceof uS&&e._firestore===t._firestore&&q_(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var lS=function(e){zt(n,e);var t=Gt(n);function n(e){var r;return Ft(this,n),(r=t.call(this)).firestore=e,r}return jt(n,[{key:"convertBytes",value:function(e){return new rx(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new U_(this.firestore,null,t)}}]),n}(tS);function fS(e){e=O_(e,U_);var t=O_(e.firestore,H_),n=Q_(t),r=new lS(t);return function(e,t){var n=new Qf;return e.asyncQueue.enqueueAndForget(hr(lr().mark((function r(){return lr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Gf(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Hf(Wf.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Pb(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,y_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new aS(t,r,e._key,n,new iS(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function hS(e){e=O_(e,F_);var t=O_(e.firestore,H_),n=Q_(t),r=new lS(t);return Mx(e._query),S_(n,e._query).then((function(n){return new uS(t,r,e,n)}))}function dS(e){e=O_(e,F_);var t=O_(e.firestore,H_),n=Q_(t),r=new lS(t);return function(e,t){var n=new Qf;return e.asyncQueue.enqueueAndForget(hr(lr().mark((function r(){return lr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=hr(lr().mark((function e(t,n,r){var i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,uk(t,n,!0);case 3:i=e.sent,a=new Jb(n,i.Ps),o=a.ha(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Pb(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,y_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new uS(t,r,e,n)}))}function pS(e){e=O_(e,F_);var t=O_(e.firestore,H_),n=Q_(t),r=new lS(t);return S_(n,e._query,{source:"server"}).then((function(n){return new uS(t,r,e,n)}))}function vS(e,t,n){e=O_(e,U_);var r=O_(e.firestore,H_),i=nS(e.converter,t,n);return kS(r,[px(dx(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Uv.none())])}function mS(e,t,n){e=O_(e,U_);for(var r=O_(e.firestore,H_),i=dx(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return kS(r,[("string"==typeof(t=Fa(t))||t instanceof ix?_x(i,"updateDoc",e._key,t,n,o):wx(i,"updateDoc",e._key,t)).toMutation(e._key,Uv.exists(!0))])}function yS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Fa(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||G_(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(G_(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof U_)l=O_(e.firestore,H_),f=Kp(e._key.path),c={next:function(t){n[s]&&n[s](bS(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=O_(e,F_);l=O_(p.firestore,H_),f=p._query;var v=new lS(l);c={next:function(e){n[s]&&n[s](new uS(l,v,p,e))},error:n[s+1],complete:n[s+2]},Mx(e._query)}return function(e,t,n,r){var i=new n_(r),a=new Kb(t,i,n);return e.asyncQueue.enqueueAndForget(hr(lr().mark((function t(){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Fb,t.next=3,w_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.La(),e.asyncQueue.enqueueAndForget(hr(lr().mark((function t(){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=jb,t.next=3,w_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Q_(l),f,h,c)}function gS(e,t){return function(e,t){var n=new n_(t);return e.asyncQueue.enqueueAndForget(hr(lr().mark((function t(){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Gf(e).K_.add(t),t.next()},t.next=3,w_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.La(),e.asyncQueue.enqueueAndForget(hr(lr().mark((function t(){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Gf(e).K_.delete(t)},t.next=3,w_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Q_(e=O_(e,H_)),G_(t)?t:{next:t})}function kS(e,t){return function(e,t){var n=new Qf;return e.asyncQueue.enqueueAndForget(hr(lr().mark((function r(){return lr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=uw,r.next=3,k_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Q_(e),t)}function bS(e,t,n){var r=n.docs.get(t._key),i=new lS(e);return new aS(e,i,t._key,r,new iS(n.hasPendingWrites,n.fromCache),t.converter)}var wS={maxAttempts:5},_S=function(){function e(t,n){Ft(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=dx(t)}return jt(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=xS(e,this._firestore),i=nS(r.converter,t,n),a=px(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Uv.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=xS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Fa(t))||t instanceof ix?_x(this._dataReader,"WriteBatch.update",i._key,t,n,o):wx(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Uv.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=xS(e,this._firestore);return this._mutations=this._mutations.concat(new Zv(t._key,Uv.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Hf(Wf.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function xS(e,t){if((e=Fa(e)).firestore!==t)throw new Hf(Wf.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var SS=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this,e,r))._firestore=e,i}return jt(n,[{key:"get",value:function(e){var t=this,r=xS(e,this._firestore),i=new lS(this._firestore);return hu(Bt(n.prototype),"get",this).call(this,e).then((function(e){return new aS(t._firestore,i,r._key,e._document,new iS(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Ft(this,e),this._firestore=t,this._transaction=n,this._dataReader=dx(t)}return jt(e,[{key:"get",value:function(e){var t=this,n=xS(e,this._firestore),r=new rS(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return qf();var i=e[0];if(i.isFoundDocument())return new Rx(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Rx(t._firestore,r,n._key,null,n.converter);throw qf()}))}},{key:"set",value:function(e,t,n){var r=xS(e,this._firestore),i=nS(r.converter,t,n),a=px(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=xS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Fa(t))||t instanceof ix?_x(this._dataReader,"Transaction.update",i._key,t,n,o):wx(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=xS(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function ES(e,t,n){e=O_(e,H_);var r=Object.assign(Object.assign({},wS),n);return function(e){if(e.maxAttempts<1)throw new Hf(Wf.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Qf;return e.asyncQueue.enqueueAndForget(hr(lr().mark((function i(){var a;return lr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,b_(e);case 2:a=i.sent,new a_(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Q_(e),(function(n){return t(new SS(e,n))}),r)}function IS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gx("arrayUnion",t)}function TS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new kx("arrayRemove",t)}new WeakMap;!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Mf=e}(Ro),Io(new Ua("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new H_(new Xf(e.getProvider("auth-internal")),new nh(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Hf(Wf.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jd(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),jo(Df,"4.2.0",e),jo(Df,"4.2.0","esm2017")}();function CS(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Hf("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function AS(){if("undefined"===typeof Uint8Array)throw new Hf("unimplemented","Uint8Arrays are not available in this environment.")}function NS(){if("undefined"==typeof atob)throw new Hf("unimplemented","Blobs are unavailable in Firestore in this environment.")}var PS=function(){function e(t){Ft(this,e),this._delegate=t}return jt(e,[{key:"toBase64",value:function(){return NS(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return AS(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return NS(),new e(rx.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return AS(),new e(rx.fromUint8Array(t))}}]),e}();function OS(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=$t(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var RS=function(){function e(){Ft(this,e)}return jt(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){nx(e=O_(e,H_));var n=Q_(e);if(n._uninitializedComponentsProvider)throw new Hf(Wf.FAILED_PRECONDITION,"SDK cache is already specified.");zf("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new e_;return Y_(n,i,new Xw(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){nx(e=O_(e,H_));var t=Q_(e);if(t._uninitializedComponentsProvider)throw new Hf(Wf.FAILED_PRECONDITION,"SDK cache is already specified.");zf("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new e_;return Y_(t,r,new Zw(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Hf(Wf.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Qf;return e._queue.enqueueAndForgetEvenWhileRestricted(hr(lr().mark((function n(){return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nh.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Nh.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Gg(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),DS=function(){function e(t,n,r){var i=this;Ft(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof jd||(this._appCompat=t)}return jt(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||zf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};M_(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return X_(this._delegate)}},{key:"disableNetwork",value:function(){return Z_(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&C_("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return J_(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return gS(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Hf("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new QS(this,V_(this._delegate,e))}catch(t){throw VS(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new jS(this,z_(this._delegate,e))}catch(t){throw VS(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new GS(this,function(e,t){if(e=O_(e,L_),T_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Hf(Wf.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new F_(e,null,function(e){return new Bp(fh.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw VS(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return ES(this._delegate,(function(n){return e(new MS(t,n))}))}},{key:"batch",value:function(){var e=this;return Q_(this._delegate),new FS(new _S(this._delegate,(function(t){return kS(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return ex(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return tx(this._delegate,e).then((function(e){return e?new GS(t,e):null}))}}]),e}(),LS=function(e){zt(n,e);var t=Gt(n);function n(e){var r;return Ft(this,n),(r=t.call(this)).firestore=e,r}return jt(n,[{key:"convertBytes",value:function(e){return new PS(new rx(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return jS.forKey(t,this.firestore,null)}}]),n}(tS);var MS=function(){function e(t,n){Ft(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new LS(t)}return jt(e,[{key:"get",value:function(e){var t=this,n=$S(e);return this._delegate.get(n).then((function(e){return new qS(t._firestore,new aS(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=$S(e);return n?(CS("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=$S(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=$S(e);return this._delegate.delete(t),this}}]),e}(),FS=function(){function e(t){Ft(this,e),this._delegate=t}return jt(e,[{key:"set",value:function(e,t,n){var r=$S(e);return n?(CS("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=$S(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=$S(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),US=function(){function e(t,n,r){Ft(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return jt(e,[{key:"fromFirestore",value:function(e,t){var n=new oS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new KS(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new LS(t),n),i.set(n,a)),a}}]),e}();US.INSTANCES=new WeakMap;var jS=function(){function e(t,n){Ft(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new LS(t)}return jt(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new QS(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new QS(this.firestore,V_(this._delegate,e))}catch(t){throw VS(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Fa(e))instanceof U_&&B_(this._delegate,e)}},{key:"set",value:function(e,t){t=CS("DocumentReference.set",t);try{return t?vS(this._delegate,e,t):vS(this._delegate,e)}catch(n){throw VS(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?mS(this._delegate,e):mS.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw VS(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return kS(O_(e.firestore,H_),[new Zv(e._key,Uv.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=zS(n),a=BS(n,(function(t){return new qS(e.firestore,new aS(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return yS(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?fS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=O_(e,U_);var t=O_(e.firestore,H_);return x_(Q_(t),e._key,{source:"server"}).then((function(n){return bS(t,e,n)}))}(this._delegate):function(e){e=O_(e,U_);var t=O_(e.firestore,H_);return x_(Q_(t),e._key).then((function(n){return bS(t,e,n)}))}(this._delegate),t.then((function(e){return new qS(n.firestore,new aS(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(US.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Hf("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new U_(n._delegate,r,new ph(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new U_(n._delegate,r,t))}}]),e}();function VS(e,t,n){return e.message=e.message.replace(t,n),e}function zS(e){var t,n=$t(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!OS(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function BS(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=OS(e[0])?e[0]:OS(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var qS=function(){function e(t,n){Ft(this,e),this._firestore=t,this._delegate=n}return jt(e,[{key:"ref",get:function(){return new jS(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return cS(this._delegate,e._delegate)}}]),e}(),KS=function(e){zt(n,e);var t=Gt(n);function n(){return Ft(this,n),t.apply(this,arguments)}return jt(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||qf()}(void 0!==t),t}}]),n}(qS),GS=function(){function e(t,n){Ft(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new LS(t)}return jt(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,jx(this._delegate,function(e,t,n){var r=t,i=Lx("where",e);return Vx._create(i,r,n)}(t,n,r)))}catch(i){throw VS(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,jx(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Lx("orderBy",e);return Bx._create(n,t)}(t,n)))}catch(r){throw VS(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,jx(this._delegate,function(e){return R_("limit",e),qx._create("limit",e,"F")}(t)))}catch(n){throw VS(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,jx(this._delegate,function(e){return R_("limitToLast",e),qx._create("limitToLast",e,"L")}(t)))}catch(n){throw VS(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,jx(this._delegate,Gx.apply(void 0,arguments)))}catch(t){throw VS(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,jx(this._delegate,Wx.apply(void 0,arguments)))}catch(t){throw VS(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,jx(this._delegate,Qx.apply(void 0,arguments)))}catch(t){throw VS(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,jx(this._delegate,$x.apply(void 0,arguments)))}catch(t){throw VS(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return q_(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?dS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?pS(this._delegate):hS(this._delegate)).then((function(e){return new HS(t.firestore,new uS(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=zS(n),a=BS(n,(function(t){return new HS(e.firestore,new uS(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return yS(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(US.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),WS=function(){function e(t,n){Ft(this,e),this._firestore=t,this._delegate=n}return jt(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new KS(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),HS=function(){function e(t,n){Ft(this,e),this._firestore=t,this._delegate=n}return jt(e,[{key:"query",get:function(){return new GS(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new KS(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new WS(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new KS(n._firestore,r))}))}},{key:"isEqual",value:function(e){return cS(this._delegate,e._delegate)}}]),e}(),QS=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return jt(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new jS(this.firestore,e):null}},{key:"doc",value:function(e){try{return new jS(this.firestore,void 0===e?z_(this._delegate):z_(this._delegate,e))}catch(t){throw VS(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=O_(e.firestore,H_),r=z_(e),i=nS(e.converter,t);return kS(n,[px(dx(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Uv.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new jS(t.firestore,e)}))}},{key:"isEqual",value:function(e){return B_(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(US.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(GS);function $S(e){return O_(e,U_)}var YS=function(){function e(){Ft(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Wt(ix,n)}return jt(e,[{key:"isEqual",value:function(e){return(e=Fa(e))instanceof ix&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(dh.keyField().canonicalString())}}]),e}(),JS=function(){function e(t){Ft(this,e),this._delegate=t}return jt(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new yx("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new vx("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=IS.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=TS.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new bx("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),XS={Firestore:DS,GeoPoint:ox,Timestamp:sh,Blob:PS,Transaction:MS,WriteBatch:FS,DocumentReference:jS,DocumentSnapshot:qS,Query:GS,QueryDocumentSnapshot:KS,QuerySnapshot:HS,CollectionReference:QS,FieldPath:YS,FieldValue:JS,setLogLevel:function(e){!function(e){Ff.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ua("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},XS)))}(e,(function(e,t){return new DS(e,t,new RS)})),e.registerVersion("@firebase/firestore-compat","0.3.18")}(fu);function ZS(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var eE,tE={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},nE="EMAIL_SIGNIN",rE="PASSWORD_RESET",iE="RECOVER_EMAIL",aE="REVERT_SECOND_FACTOR_ADDITION",oE="VERIFY_AND_CHANGE_EMAIL",uE="VERIFY_EMAIL";function sE(e){return void 0!==e&&void 0!==e.getResponse}function cE(e){return void 0!==e&&void 0!==e.enterprise}var lE=jt((function e(t){if(Ft(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function fE(){return h({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var hE=function(){var e;return h(e={},"admin-restricted-operation","This operation is restricted to administrators only."),h(e,"argument-error",""),h(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),h(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),h(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),h(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),h(e,"cordova-not-ready","Cordova framework is not ready."),h(e,"cors-unsupported","This browser is not supported."),h(e,"credential-already-in-use","This credential is already associated with a different user account."),h(e,"custom-token-mismatch","The custom token corresponds to a different audience."),h(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),h(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),h(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),h(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),h(e,"email-already-in-use","The email address is already in use by another account."),h(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),h(e,"expired-action-code","The action code has expired."),h(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),h(e,"internal-error","An internal AuthError has occurred."),h(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),h(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),h(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),h(e,"invalid-auth-event","An internal AuthError has occurred."),h(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),h(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),h(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),h(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),h(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),h(e,"invalid-email","The email address is badly formatted."),h(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),h(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),h(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),h(e,"invalid-credential","The supplied auth credential is malformed or has expired."),h(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),h(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),h(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),h(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),h(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),h(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),h(e,"wrong-password","The password is invalid or the user does not have a password."),h(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),h(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),h(e,"invalid-provider-id","The specified provider ID is invalid."),h(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),h(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),h(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),h(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),h(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),h(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),h(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),h(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),h(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),h(e,"missing-continue-uri","A continue URL must be provided in the request."),h(e,"missing-iframe-start","An internal AuthError has occurred."),h(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),h(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),h(e,"missing-password","A non-empty password must be provided"),h(e,"missing-multi-factor-info","No second factor identifier is provided."),h(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),h(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),h(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),h(e,"app-deleted","This instance of FirebaseApp has been deleted."),h(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),h(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),h(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),h(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),h(e,"no-auth-event","An internal AuthError has occurred."),h(e,"no-such-provider","User was not linked to an account with the given provider."),h(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),h(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),h(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),h(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),h(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),h(e,"provider-already-linked","User can only be linked to one identity for the given provider."),h(e,"quota-exceeded","The project's quota for this operation has been exceeded."),h(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),h(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),h(e,"rejected-credential","The request contains malformed or mismatching credentials."),h(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),h(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),h(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),h(e,"timeout","The operation has timed out."),h(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),h(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),h(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),h(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),h(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),h(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),h(e,"unverified-email","The operation requires a verified email."),h(e,"user-cancelled","The user did not grant your application the permissions it requested."),h(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),h(e,"user-disabled","The user account has been disabled by an administrator."),h(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),h(e,"user-signed-out",""),h(e,"weak-password","The password must be 6 characters long or more."),h(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),h(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),h(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),h(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),h(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),h(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),h(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),h(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),h(e,"invalid-req-type","Invalid request parameters."),h(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),h(e,"unsupported-password-policy-schema-version","The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK."),h(e,"password-does-not-meet-requirements","The password does not meet the requirements."),e},dE=fE,pE=new Ea("auth","Firebase",fE()),vE=new $a("@firebase/auth");function mE(e){if(vE.logLevel<=Ba.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];vE.warn.apply(vE,["Auth (".concat(Ro,"): ").concat(e)].concat(n))}}function yE(e){if(vE.logLevel<=Ba.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];vE.error.apply(vE,["Auth (".concat(Ro,"): ").concat(e)].concat(n))}}function gE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw _E.apply(void 0,[e].concat(n))}function kE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _E.apply(void 0,[e].concat(n))}function bE(e,t,n){var r=Object.assign(Object.assign({},dE()),h({},t,n));return new Ea("auth","Firebase",r).create(t,{appName:e.name})}function wE(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&gE(e,"argument-error"),bE(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function _E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Mt(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Mt(o)))}return pE.create.apply(pE,[e].concat(n))}function xE(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw _E.apply(void 0,[t].concat(r))}}function SE(e){var t="INTERNAL ASSERTION FAILED: "+e;throw yE(t),new Error(t)}function EE(e,t){e||SE(t)}function IE(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function TE(){return"http:"===CE()||"https:"===CE()}function CE(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var AE=function(){function e(t,n){Ft(this,e),this.shortDelay=t,this.longDelay=n,EE(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ga())||wa()}return jt(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(TE()||ba()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function NE(e,t){EE(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var PE=function(){function e(){Ft(this,e)}return jt(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void SE("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void SE("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void SE("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),OE=(h(eE={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),h(eE,"MISSING_CUSTOM_TOKEN","internal-error"),h(eE,"INVALID_IDENTIFIER","invalid-email"),h(eE,"MISSING_CONTINUE_URI","internal-error"),h(eE,"INVALID_PASSWORD","wrong-password"),h(eE,"MISSING_PASSWORD","missing-password"),h(eE,"EMAIL_EXISTS","email-already-in-use"),h(eE,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),h(eE,"INVALID_IDP_RESPONSE","invalid-credential"),h(eE,"INVALID_PENDING_TOKEN","invalid-credential"),h(eE,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),h(eE,"MISSING_REQ_TYPE","internal-error"),h(eE,"EMAIL_NOT_FOUND","user-not-found"),h(eE,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),h(eE,"EXPIRED_OOB_CODE","expired-action-code"),h(eE,"INVALID_OOB_CODE","invalid-action-code"),h(eE,"MISSING_OOB_CODE","internal-error"),h(eE,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),h(eE,"INVALID_ID_TOKEN","invalid-user-token"),h(eE,"TOKEN_EXPIRED","user-token-expired"),h(eE,"USER_NOT_FOUND","user-token-expired"),h(eE,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),h(eE,"PASSWORD_DOES_NOT_MEET_REQUIREMENTS","password-does-not-meet-requirements"),h(eE,"INVALID_CODE","invalid-verification-code"),h(eE,"INVALID_SESSION_INFO","invalid-verification-id"),h(eE,"INVALID_TEMPORARY_PROOF","invalid-credential"),h(eE,"MISSING_SESSION_INFO","missing-verification-id"),h(eE,"SESSION_EXPIRED","code-expired"),h(eE,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),h(eE,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),h(eE,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),h(eE,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),h(eE,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),h(eE,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),h(eE,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),h(eE,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),h(eE,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),h(eE,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),h(eE,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),h(eE,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),h(eE,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),h(eE,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),h(eE,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),h(eE,"MISSING_CLIENT_TYPE","missing-client-type"),h(eE,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),h(eE,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),h(eE,"INVALID_REQ_TYPE","invalid-req-type"),eE),RE=new AE(3e4,6e4);function DE(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function LE(e,t,n,r){return ME.apply(this,arguments)}function ME(){return ME=hr(lr().mark((function e(t,n,r,i){var a,o=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",FE(t,a,hr(lr().mark((function e(){var a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Pa(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",PE.fetch()(zE(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),ME.apply(this,arguments)}function FE(e,t,n){return UE.apply(this,arguments)}function UE(){return UE=hr(lr().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},OE),n),e.prev=2,a=new BE(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw qE(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=Dt(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw qE(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw qE(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw qE(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw bE(t,d,h);case 34:gE(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Sa)){e.next=41;break}throw e.t0;case 41:gE(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),UE.apply(this,arguments)}function jE(e,t,n,r){return VE.apply(this,arguments)}function VE(){return VE=hr(lr().mark((function e(t,n,r,i){var a,o,u=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,LE(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&gE(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),VE.apply(this,arguments)}function zE(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?NE(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var BE=function(){function e(t){var n=this;Ft(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(kE(n.auth,"network-request-failed"))}),RE.get())}))}return jt(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function qE(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=kE(e,t,r);return i.customData._tokenResponse=n,i}function KE(e){return GE.apply(this,arguments)}function GE(){return GE=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LE(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),GE.apply(this,arguments)}function WE(e,t){return HE.apply(this,arguments)}function HE(){return HE=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",LE(t,"GET","/v2/recaptchaConfig",DE(t,n)));case 1:case"end":return e.stop()}}),e)}))),HE.apply(this,arguments)}function QE(e,t){return $E.apply(this,arguments)}function $E(){return $E=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",LE(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),$E.apply(this,arguments)}function YE(e,t){return JE.apply(this,arguments)}function JE(){return JE=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",LE(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),JE.apply(this,arguments)}function XE(e,t){return ZE.apply(this,arguments)}function ZE(){return ZE=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",LE(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),ZE.apply(this,arguments)}function eI(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function tI(){return tI=hr(lr().mark((function e(t){var n,r,i,a,o,u,s=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Fa(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,xE((a=rI(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:eI(nI(a.auth_time)),issuedAtTime:eI(nI(a.iat)),expirationTime:eI(nI(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),tI.apply(this,arguments)}function nI(e){return 1e3*Number(e)}function rI(e){var t=Dt(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return yE("JWT malformed, contained fewer than 3 sections"),null;try{var a=ha(r);return a?JSON.parse(a):(yE("Failed to decode base64 JWT payload"),null)}catch(o){return yE("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function iI(e,t){return aI.apply(this,arguments)}function aI(){return aI=hr(lr().mark((function e(t,n){var r=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Sa&&oI(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),aI.apply(this,arguments)}function oI(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var uI=function(){function e(t){Ft(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return jt(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(hr(lr().mark((function t(){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),sI=function(){function e(t,n){Ft(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return jt(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=eI(this.lastLoginAt),this.creationTime=eI(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function cI(e){return lI.apply(this,arguments)}function lI(){return lI=hr(lr().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,iI(t,XE(r,{idToken:i}));case 6:xE(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=ZS(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=hI(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new sI(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),lI.apply(this,arguments)}function fI(){return(fI=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fa(t),e.next=3,cI(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hI(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Mt(n),Mt(t))}function dI(e,t){return pI.apply(this,arguments)}function pI(){return pI=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,FE(t,{},hr(lr().mark((function e(){var r,i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pa({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=zE(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",PE.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),pI.apply(this,arguments)}var vI=function(){function e(){Ft(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return jt(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){xE(e.idToken,"internal-error"),xE("undefined"!==typeof e.idToken,"internal-error"),xE("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=rI(e);return xE(t,"internal-error"),xE("undefined"!==typeof t.exp,"internal-error"),xE("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=hr(lr().mark((function e(t){var n,r=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],xE(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=hr(lr().mark((function e(t,n){var r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dI(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return SE("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(xE("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(xE("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(xE("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function mI(e,t){xE("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var yI=function(){function e(t){Ft(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=ZS(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Mt(a.providerData):[],this.metadata=new sI(a.createdAt||void 0,a.lastLoginAt||void 0)}return jt(e,[{key:"getIdToken",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iI(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(xE(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return tI.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return fI.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(xE(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){xE(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=hr(lr().mark((function e(t){var n,r,i=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,cI(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,iI(this,QE(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;xE(k&&x,t,"internal-error");var S=vI.fromJSON(this.name,x);xE("string"===typeof k,t,"internal-error"),mI(f,t.name),mI(h,t.name),xE("boolean"===typeof b,t,"internal-error"),xE("boolean"===typeof w,t,"internal-error"),mI(d,t.name),mI(p,t.name),mI(v,t.name),mI(m,t.name),mI(y,t.name),mI(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=hr(lr().mark((function t(n,r){var i,a,o,u=arguments;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new vI).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,cI(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),gI=new Map;function kI(e){EE(e instanceof Function,"Expected a class definition");var t=gI.get(e);return t?(EE(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,gI.set(e,t),t)}var bI=function(){function e(){Ft(this,e),this.type="NONE",this.storage={}}return jt(e,[{key:"_isAvailable",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();bI.type="NONE";var wI=bI;function _I(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var xI=function(){function e(t,n,r){Ft(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=_I(this.userKey,a.apiKey,o),this.fullPersistenceKey=_I("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return jt(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?yI._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=hr(lr().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(kI(wI),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||kI(wI),u=_I(i,n.config.apiKey,n.name),s=null,c=$t(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=yI._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function SI(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(CI(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(EI(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(NI(t))return"Blackberry";if(PI(t))return"Webos";if(II(t))return"Safari";if((t.includes("chrome/")||TI(t))&&!t.includes("edge/"))return"Chrome";if(AI(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function EI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga();return/firefox\//i.test(e)}function II(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga();return/crios\//i.test(e)}function CI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga();return/iemobile/i.test(e)}function AI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga();return/android/i.test(e)}function NI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga();return/blackberry/i.test(e)}function PI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga();return/webos/i.test(e)}function OI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function RI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga();return OI(e)||AI(e)||PI(e)||NI(e)||/windows phone/i.test(e)||CI(e)}function DI(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=SI(ga());break;case"Worker":t="".concat(SI(ga()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ro,"/").concat(r)}var LI=function(){function e(t){Ft(this,e),this.auth=t,this.queue=[]}return jt(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=hr(lr().mark((function e(t){var n,r,i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=$t(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=$t(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(Y){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function MI(e){return FI.apply(this,arguments)}function FI(){return FI=hr(lr().mark((function e(t){var n,r=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",LE(t,"GET","/v2/passwordPolicy",DE(t,n)));case 2:case"end":return e.stop()}}),e)}))),FI.apply(this,arguments)}var UI=function(){function e(t){var n,r,i,a;Ft(this,e);var o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=o.minPasswordLength)&&void 0!==n?n:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=t.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(a=t.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=t.schemaVersion}return jt(e,[{key:"validatePassword",value:function(e){var t,n,r,i,a,o,u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(n=u.meetsMaxPasswordLength)||void 0===n||n),u.isValid&&(u.isValid=null===(r=u.containsLowercaseLetter)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsUppercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(a=u.containsNumericCharacter)||void 0===a||a),u.isValid&&(u.isValid=null===(o=u.containsNonAlphanumericCharacter)||void 0===o||o),u}},{key:"validatePasswordLengthOptions",value:function(e,t){var n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}},{key:"validatePasswordCharacterOptions",value:function(e,t){var n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(var r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}},{key:"updatePasswordCharacterOptionsStatuses",value:function(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}]),e}(),jI=function(){function e(t,n,r,i){Ft(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zI(this),this.idTokenSubscription=new zI(this),this.beforeStateQueue=new LI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return jt(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=kI(t)),this._initializationPromise=this.queue(hr(lr().mark((function r(){var i,a;return lr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,xI.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=hr(lr().mark((function e(t){var n,r,i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return xE(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cI(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Fa(t):null)&&xE(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=hr(lr().mark((function e(t){var n,r=this,i=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&xE(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(hr(lr().mark((function n(){return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(kI(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"validatePassword",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._getPasswordPolicyInternal()){e.next=3;break}return e.next=3,this._updatePasswordPolicy();case 3:if((n=this._getPasswordPolicyInternal()).schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION){e.next=6;break}return e.abrupt("return",Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})));case 6:return e.abrupt("return",n.validatePassword(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPasswordPolicyInternal",value:function(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}},{key:"_updatePasswordPolicy",value:function(){var e=hr(lr().mark((function e(){var t,n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MI(this);case 2:t=e.sent,n=new UI(t),null===this.tenantId?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Ea("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"authStateReady",value:function(){var e=this;return new Promise((function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged((function(){r(),t()}),n)}))}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return xE(n=t&&kI(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,xI.create(this,[kI(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=hr(lr().mark((function e(t){var n=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(xE(u,this,"internal-error"),u.then((function(){o||a(i.currentUser)})),"function"===typeof t){var s=e.addObserver(t,n,r);return function(){o=!0,s()}}var c=e.addObserver(t);return function(){o=!0,c()}}},{key:"directlySetCurrentUser",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return xE(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DI(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=hr(lr().mark((function e(){var t,n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=hr(lr().mark((function e(){var t,n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&mE("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function VI(e){return Fa(e)}var zI=function(){function e(t){var n=this;Ft(this,e),this.auth=t,this.observer=null,this.addObserver=Da((function(e){return n.observer=e}))}return jt(e,[{key:"next",get:function(){return xE(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function BI(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=kE("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function qI(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var KI=function(){function e(t){Ft(this,e),this.type="recaptcha-enterprise",this.auth=VI(t)}return jt(e,[{key:"verify",value:function(){var e=hr(lr().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;cE(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=hr(lr().mark((function e(n,r){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:WE(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new lE(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&cE(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));BI("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function GI(e,t,n){return WI.apply(this,arguments)}function WI(){return WI=hr(lr().mark((function e(t,n,r){var i,a,o,u,s=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new KI(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),WI.apply(this,arguments)}function HI(e,t,n){var r=VI(e);xE(r._canInitEmulator,r,"emulator-config-failed"),xE(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=QI(t),o=function(e){var t=QI(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:$I(r.substr(a.length+1))}}var o=Dt(r.split(":"),2);return{host:o[0],port:$I(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function QI(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function $I(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var YI=function(){function e(t,n){Ft(this,e),this.providerId=t,this.signInMethod=n}return jt(e,[{key:"toJSON",value:function(){return SE("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return SE("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return SE("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return SE("not implemented")}}]),e}();function JI(e,t){return XI.apply(this,arguments)}function XI(){return XI=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",LE(t,"POST","/v1/accounts:resetPassword",DE(t,n)));case 1:case"end":return e.stop()}}),e)}))),XI.apply(this,arguments)}function ZI(e,t){return eT.apply(this,arguments)}function eT(){return eT=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",LE(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),eT.apply(this,arguments)}function tT(e,t){return nT.apply(this,arguments)}function nT(){return nT=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",LE(t,"POST","/v1/accounts:update",DE(t,n)));case 1:case"end":return e.stop()}}),e)}))),nT.apply(this,arguments)}function rT(e,t){return iT.apply(this,arguments)}function iT(){return iT=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jE(t,"POST","/v1/accounts:signInWithPassword",DE(t,n)));case 1:case"end":return e.stop()}}),e)}))),iT.apply(this,arguments)}function aT(e,t){return oT.apply(this,arguments)}function oT(){return oT=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",LE(t,"POST","/v1/accounts:sendOobCode",DE(t,n)));case 1:case"end":return e.stop()}}),e)}))),oT.apply(this,arguments)}function uT(e,t){return sT.apply(this,arguments)}function sT(){return sT=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aT(t,n));case 1:case"end":return e.stop()}}),e)}))),sT.apply(this,arguments)}function cT(e,t){return lT.apply(this,arguments)}function lT(){return lT=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aT(t,n));case 1:case"end":return e.stop()}}),e)}))),lT.apply(this,arguments)}function fT(e,t){return hT.apply(this,arguments)}function hT(){return hT=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aT(t,n));case 1:case"end":return e.stop()}}),e)}))),hT.apply(this,arguments)}function dT(e,t){return pT.apply(this,arguments)}function pT(){return pT=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aT(t,n));case 1:case"end":return e.stop()}}),e)}))),pT.apply(this,arguments)}function vT(e,t){return mT.apply(this,arguments)}function mT(){return mT=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jE(t,"POST","/v1/accounts:signInWithEmailLink",DE(t,n)));case 1:case"end":return e.stop()}}),e)}))),mT.apply(this,arguments)}function yT(e,t){return gT.apply(this,arguments)}function gT(){return gT=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jE(t,"POST","/v1/accounts:signInWithEmailLink",DE(t,n)));case 1:case"end":return e.stop()}}),e)}))),gT.apply(this,arguments)}var kT=function(e){zt(n,e);var t=Gt(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Ft(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return jt(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=hr(lr().mark((function e(t){var n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,GI(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",rT(t,i));case 11:return e.abrupt("return",rT(t,r).catch(function(){var e=hr(lr().mark((function e(n){var i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,GI(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",rT(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",vT(t,{email:this._email,oobCode:this._password}));case 13:gE(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ZI(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",yT(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:gE(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(YI);function bT(e,t){return wT.apply(this,arguments)}function wT(){return wT=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jE(t,"POST","/v1/accounts:signInWithIdp",DE(t,n)));case 1:case"end":return e.stop()}}),e)}))),wT.apply(this,arguments)}var _T=function(e){zt(n,e);var t=Gt(n);function n(){var e;return Ft(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return jt(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return bT(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,bT(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,bT(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pa(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gE("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=ZS(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(YI);function xT(e,t){return ST.apply(this,arguments)}function ST(){return ST=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",LE(t,"POST","/v1/accounts:sendVerificationCode",DE(t,n)));case 1:case"end":return e.stop()}}),e)}))),ST.apply(this,arguments)}function ET(){return ET=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jE(t,"POST","/v1/accounts:signInWithPhoneNumber",DE(t,n)));case 1:case"end":return e.stop()}}),e)}))),ET.apply(this,arguments)}function IT(){return IT=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jE(t,"POST","/v1/accounts:signInWithPhoneNumber",DE(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw qE(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),IT.apply(this,arguments)}var TT=h({},"USER_NOT_FOUND","user-not-found");function CT(){return CT=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",jE(t,"POST","/v1/accounts:signInWithPhoneNumber",DE(t,r),TT));case 2:case"end":return e.stop()}}),e)}))),CT.apply(this,arguments)}var AT=function(e){zt(n,e);var t=Gt(n);function n(e){var r;return Ft(this,n),(r=t.call(this,"phone","phone")).params=e,r}return jt(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return ET.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return IT.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return CT.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(YI);var NT=function(){function e(t){var n,r,i,a,o,u;Ft(this,e);var s=Oa(Ra(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);xE(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return jt(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Oa(Ra(e)).link,n=t?Oa(Ra(t)).deep_link_id:null,r=Oa(Ra(e)).deep_link_id;return(r?Oa(Ra(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var PT=function(){function e(){Ft(this,e),this.providerId=e.PROVIDER_ID}return jt(e,null,[{key:"credential",value:function(e,t){return kT._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=NT.parseLink(t);return xE(n,"argument-error"),kT._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();PT.PROVIDER_ID="password",PT.EMAIL_PASSWORD_SIGN_IN_METHOD="password",PT.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var OT=function(){function e(t){Ft(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return jt(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),RT=function(e){zt(n,e);var t=Gt(n);function n(){var e;return Ft(this,n),(e=t.apply(this,arguments)).scopes=[],e}return jt(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Mt(this.scopes)}}]),n}(OT),DT=function(e){zt(n,e);var t=Gt(n);function n(){return Ft(this,n),t.apply(this,arguments)}return jt(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return xE(e.idToken||e.accessToken,"argument-error"),_T._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return xE("providerId"in t&&"signInMethod"in t,"argument-error"),_T._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(RT),LT=function(e){zt(n,e);var t=Gt(n);function n(){return Ft(this,n),t.call(this,"facebook.com")}return jt(n,null,[{key:"credential",value:function(e){return _T._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(RT);LT.FACEBOOK_SIGN_IN_METHOD="facebook.com",LT.PROVIDER_ID="facebook.com";var MT=function(e){zt(n,e);var t=Gt(n);function n(){var e;return Ft(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return jt(n,null,[{key:"credential",value:function(e,t){return _T._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(RT);MT.GOOGLE_SIGN_IN_METHOD="google.com",MT.PROVIDER_ID="google.com";var FT=function(e){zt(n,e);var t=Gt(n);function n(){return Ft(this,n),t.call(this,"github.com")}return jt(n,null,[{key:"credential",value:function(e){return _T._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(RT);FT.GITHUB_SIGN_IN_METHOD="github.com",FT.PROVIDER_ID="github.com";var UT=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i;return Ft(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return jt(n,[{key:"_getIdTokenResponse",value:function(e){return bT(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,bT(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,bT(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(YI),jT=function(e){zt(n,e);var t=Gt(n);function n(e){return Ft(this,n),xE(e.startsWith("saml."),"argument-error"),t.call(this,e)}return jt(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=UT.fromJSON(e);return xE(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return UT._create(r,n)}catch(i){return null}}}]),n}(OT),VT=function(e){zt(n,e);var t=Gt(n);function n(){return Ft(this,n),t.call(this,"twitter.com")}return jt(n,null,[{key:"credential",value:function(e,t){return _T._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(RT);function zT(e,t){return BT.apply(this,arguments)}function BT(){return BT=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jE(t,"POST","/v1/accounts:signUp",DE(t,n)));case 1:case"end":return e.stop()}}),e)}))),BT.apply(this,arguments)}VT.TWITTER_SIGN_IN_METHOD="twitter.com",VT.PROVIDER_ID="twitter.com";var qT=function(){function e(t){Ft(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return jt(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=hr(lr().mark((function t(n,r,i){var a,o,u,s,c=arguments;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,yI._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=KT(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=hr(lr().mark((function t(n,r,i){var a;return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=KT(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function KT(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function GT(){return GT=hr(lr().mark((function e(t){var n,r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=VI(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new qT({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,zT(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,qT._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),GT.apply(this,arguments)}var WT=function(e){zt(n,e);var t=Gt(n);function n(e,r,i,a){var o,u;return Ft(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Kt(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return jt(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Sa);function HT(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw WT._fromErrorAndOperation(e,n,t,r);throw n}))}function QT(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function $T(e,t){return YT.apply(this,arguments)}function YT(){return YT=hr(lr().mark((function e(t,n){var r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fa(t),e.next=3,ZT(!0,r,n);case 3:return e.t0=YE,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=QT(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),YT.apply(this,arguments)}function JT(e,t){return XT.apply(this,arguments)}function XT(){return XT=hr(lr().mark((function e(t,n){var r,i,a=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=iI,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",qT._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),XT.apply(this,arguments)}function ZT(e,t,n){return eC.apply(this,arguments)}function eC(){return(eC=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cI(n);case 2:i=QT(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",xE(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tC(e,t){return nC.apply(this,arguments)}function nC(){return nC=hr(lr().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,iI(t,HT(i,a,n,t),r);case 6:return xE((o=e.sent).idToken,i,"internal-error"),xE(u=rI(o.idToken),i,"internal-error"),s=u.sub,xE(t.uid===s,i,"user-mismatch"),e.abrupt("return",qT._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&gE(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),nC.apply(this,arguments)}function rC(e,t){return iC.apply(this,arguments)}function iC(){return iC=hr(lr().mark((function e(t,n){var r,i,a,o,u=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,HT(t,i,n);case 4:return a=e.sent,e.next=7,qT._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),iC.apply(this,arguments)}function aC(e,t){return oC.apply(this,arguments)}function oC(){return oC=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rC(VI(t),n));case 1:case"end":return e.stop()}}),e)}))),oC.apply(this,arguments)}function uC(e,t){return sC.apply(this,arguments)}function sC(){return(sC=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fa(t),e.next=3,ZT(!1,r,n.providerId);case 3:return e.abrupt("return",JT(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cC(e,t){return lC.apply(this,arguments)}function lC(){return(lC=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tC(Fa(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fC(e,t){return hC.apply(this,arguments)}function hC(){return hC=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jE(t,"POST","/v1/accounts:signInWithCustomToken",DE(t,n)));case 1:case"end":return e.stop()}}),e)}))),hC.apply(this,arguments)}function dC(){return dC=hr(lr().mark((function e(t,n){var r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=VI(t),e.next=3,fC(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,qT._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),dC.apply(this,arguments)}var pC=function(){function e(t,n){Ft(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return jt(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?vC._fromServerResponse(e,t):"totpInfo"in t?mC._fromServerResponse(e,t):gE(e,"internal-error")}}]),e}(),vC=function(e){zt(n,e);var t=Gt(n);function n(e){var r;return Ft(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return jt(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(pC),mC=function(e){zt(n,e);var t=Gt(n);function n(e){return Ft(this,n),t.call(this,"totp",e)}return jt(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(pC);function yC(e,t,n){var r;xE((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),xE("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(xE(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(xE(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function gC(e){return kC.apply(this,arguments)}function kC(){return kC=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=VI(t))._getPasswordPolicyInternal()){e.next=4;break}return e.next=4,n._updatePasswordPolicy();case 4:case"end":return e.stop()}}),e)}))),kC.apply(this,arguments)}function bC(){return bC=hr(lr().mark((function e(t,n,r){var i,a,o,u;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=VI(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,GI(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&yC(a,u,r),e.next=9,cT(a,u);case 9:e.next=14;break;case 11:return r&&yC(a,o,r),e.next=14,cT(a,o).catch(function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,GI(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&yC(a,n,r),e.next=8,cT(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),bC.apply(this,arguments)}function wC(){return wC=hr(lr().mark((function e(t,n,r){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JI(Fa(t),{oobCode:n,newPassword:r}).catch(function(){var e=hr(lr().mark((function e(n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&gC(t),n;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),wC.apply(this,arguments)}function _C(){return _C=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tT(Fa(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),_C.apply(this,arguments)}function xC(e,t){return SC.apply(this,arguments)}function SC(){return SC=hr(lr().mark((function e(t,n){var r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fa(t),e.next=3,JI(r,{oobCode:n});case 3:i=e.sent,xE(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return xE(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:xE(i.mfaInfo,r,"internal-error");case 13:xE(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=pC._fromServerResponse(VI(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),SC.apply(this,arguments)}function EC(){return EC=hr(lr().mark((function e(t,n){var r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xC(Fa(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),EC.apply(this,arguments)}function IC(e,t,n){return TC.apply(this,arguments)}function TC(){return TC=hr(lr().mark((function e(t,n,r){var i,a,o,u,s,c,l;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=VI(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,GI(a,o,"signUpPassword");case 5:s=e.sent,u=zT(a,s),e.next=10;break;case 9:u=zT(a,o).catch(function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=6;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,GI(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",zT(a,n));case 6:throw t;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){throw e.code==="auth/".concat("password-does-not-meet-requirements")&&gC(t),e}));case 12:return c=e.sent,e.next=15,qT._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),TC.apply(this,arguments)}function CC(){return CC=hr(lr().mark((function e(t,n,r){var i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){xE(t.handleCodeInApp,a,"argument-error"),t&&yC(a,e,t)},a=VI(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,GI(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,fT(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,fT(a,o).catch(function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,GI(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,fT(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),CC.apply(this,arguments)}function AC(){return AC=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fa(t),xE((a=PT.credentialWithLink(n,r||IE()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",aC(i,a));case 4:case"end":return e.stop()}}),e)}))),AC.apply(this,arguments)}function NC(e,t){return PC.apply(this,arguments)}function PC(){return PC=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",LE(t,"POST","/v1/accounts:createAuthUri",DE(t,n)));case 1:case"end":return e.stop()}}),e)}))),PC.apply(this,arguments)}function OC(){return OC=hr(lr().mark((function e(t,n){var r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=TE()?IE():"http://localhost",i={identifier:n,continueUri:r},e.next=4,NC(Fa(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),OC.apply(this,arguments)}function RC(){return(RC=hr(lr().mark((function e(t,n){var r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fa(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&yC(r.auth,a,n),e.next=8,uT(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DC(){return(DC=hr(lr().mark((function e(t,n,r){var i,a,o,u;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fa(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&yC(i.auth,o,r),e.next=8,dT(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LC(e,t){return MC.apply(this,arguments)}function MC(){return MC=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",LE(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),MC.apply(this,arguments)}function FC(){return(FC=hr(lr().mark((function e(t,n){var r,i,a,o,u,s,c;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Fa(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,iI(a,LC(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function UC(e,t,n){return jC.apply(this,arguments)}function jC(){return jC=hr(lr().mark((function e(t,n,r){var i,a,o,u;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,iI(t,ZI(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),jC.apply(this,arguments)}var VC=jt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ft(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),zC=function(e){zt(n,e);var t=Gt(n);function n(e,r,i,a){var o;return Ft(this,n),(o=t.call(this,e,r,i)).username=a,o}return jt(n)}(VC),BC=function(e){zt(n,e);var t=Gt(n);function n(e,r){return Ft(this,n),t.call(this,e,"facebook.com",r)}return jt(n)}(VC),qC=function(e){zt(n,e);var t=Gt(n);function n(e,r){return Ft(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return jt(n)}(zC),KC=function(e){zt(n,e);var t=Gt(n);function n(e,r){return Ft(this,n),t.call(this,e,"google.com",r)}return jt(n)}(VC),GC=function(e){zt(n,e);var t=Gt(n);function n(e,r,i){return Ft(this,n),t.call(this,e,"twitter.com",r,i)}return jt(n)}(zC);function WC(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=rI(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new VC(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new BC(a,i);case"github.com":return new qC(a,i);case"google.com":return new KC(a,i);case"twitter.com":return new GC(a,i,e.screenName||null);case"custom":case"anonymous":return new VC(a,null);default:return new VC(a,r,i)}}(n)}var HC=function(){function e(t,n,r){Ft(this,e),this.type=t,this.credential=n,this.user=r}return jt(e,[{key:"toJSON",value:function(){return{multiFactorSession:h({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),QC=function(){function e(t,n,r){Ft(this,e),this.session=t,this.hints=n,this.signInResolver=r}return jt(e,[{key:"resolveSignIn",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=VI(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return pC._fromServerResponse(r,e)}));xE(i.mfaPendingCredential,r,"internal-error");var o=HC._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=hr(lr().mark((function e(t){var a,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,qT._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return xE(n.user,r,"internal-error"),e.abrupt("return",qT._forOperation(n.user,n.operationType,u));case 17:gE(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function $C(e,t){return LE(e,"POST","/v2/accounts/mfaEnrollment:start",DE(e,t))}function YC(e,t){return LE(e,"POST","/v2/accounts/mfaEnrollment:start",DE(e,t))}function JC(e,t){return LE(e,"POST","/v2/accounts/mfaEnrollment:finalize",DE(e,t))}function XC(e,t){return LE(e,"POST","/v2/accounts/mfaEnrollment:withdraw",DE(e,t))}var ZC=function(){function e(t){var n=this;Ft(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return pC._fromServerResponse(t.auth,e)})))}))}return jt(e,[{key:"getSession",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=HC,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=hr(lr().mark((function e(t,n){var r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,iI(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=hr(lr().mark((function e(t){var n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,iI(this.user,XC(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),eA=new WeakMap;var tA="__sak",nA=function(){function e(t,n){Ft(this,e),this.storageRetriever=t,this.type=n}return jt(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(tA,"1"),this.storage.removeItem(tA),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var rA=function(e){zt(n,e);var t=Gt(n);function n(){var e;return Ft(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=ga();return II(e)||OI(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=RI(),e._shouldAllowMigration=!0,e}return jt(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);_a()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=hr(lr().mark((function e(t,r){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hu(Bt(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=hr(lr().mark((function e(t){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hu(Bt(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hu(Bt(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(nA);rA.type="LOCAL";var iA=rA,aA=function(e){zt(n,e);var t=Gt(n);function n(){return Ft(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return jt(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(nA);aA.type="SESSION";var oA=aA;function uA(e){return Promise.all(e.map(function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var sA=function(){function e(t){Ft(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return jt(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=hr(lr().mark((function e(t){var n,r,i,a,o,u,s,c;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,uA(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function cA(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}sA.receivers=[];var lA=function(){function e(t){Ft(this,e),this.target=t,this.handlers=new Set}return jt(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=hr(lr().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=cA("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function fA(){return window}function hA(e){fA().location.href=e}function dA(){return"undefined"!==typeof fA().WorkerGlobalScope&&"function"===typeof fA().importScripts}function pA(){return vA.apply(this,arguments)}function vA(){return(vA=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function mA(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var yA="firebaseLocalStorageDb",gA="firebaseLocalStorage",kA="fbase_key",bA=function(){function e(t){Ft(this,e),this.request=t}return jt(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function wA(e,t){return e.transaction([gA],t?"readwrite":"readonly").objectStore(gA)}function _A(){var e=indexedDB.deleteDatabase(yA);return new bA(e).toPromise()}function xA(){var e=indexedDB.open(yA,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(gA,{keyPath:kA})}catch(r){n(r)}})),e.addEventListener("success",hr(lr().mark((function n(){var r;return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(gA)){n.next=12;break}return r.close(),n.next=5,_A();case 5:return n.t0=t,n.next=8,xA();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function SA(e,t,n){return EA.apply(this,arguments)}function EA(){return EA=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wA(t,!0).put((h(i={},kA,n),h(i,"value",r),i)),e.abrupt("return",new bA(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),EA.apply(this,arguments)}function IA(e,t){return TA.apply(this,arguments)}function TA(){return TA=hr(lr().mark((function e(t,n){var r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wA(t,!1).get(n),e.next=3,new bA(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),TA.apply(this,arguments)}function CA(e,t){var n=wA(e,!0).delete(t);return new bA(n).toPromise()}var AA=function(){function e(){Ft(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return jt(e,[{key:"_openDb",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,xA();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dA()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=hr(lr().mark((function e(){var t=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=sA._getInstance(dA()?self:null),this.receiver._subscribe("keyChanged",function(){var e=hr(lr().mark((function e(n,r){var i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=hr(lr().mark((function e(){var t,n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pA();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new lA(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&mA()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,xA();case 5:return t=e.sent,e.next=8,SA(t,tA,"1");case 8:return e.next=10,CA(t,tA);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=hr(lr().mark((function e(t,n){var r=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return SA(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return IA(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=hr(lr().mark((function e(t){var n=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return CA(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=hr(lr().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=wA(e,!1).getAll();return new bA(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=$t(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(hr(lr().mark((function t(){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();AA.type="LOCAL";var NA=AA;function PA(e,t){return LE(e,"POST","/v2/accounts/mfaSignIn:start",DE(e,t))}function OA(e,t){return LE(e,"POST","/v2/accounts/mfaSignIn:finalize",DE(e,t))}var RA=1e12,DA=function(){function e(t){Ft(this,e),this.auth=t,this.counter=RA,this._widgets=new Map}return jt(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new LA(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||RA;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||RA;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||RA,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),LA=function(){function e(t,n,r){var i=this;Ft(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;xE(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return jt(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var MA=qI("rcb"),FA=new AE(3e4,6e4),UA=function(){function e(){var t;Ft(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=fA().grecaptcha)||void 0===t?void 0:t.render)}return jt(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return xE(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&sE(fA().grecaptcha)?Promise.resolve(fA().grecaptcha):new Promise((function(r,i){var a=fA().setTimeout((function(){i(kE(e,"network-request-failed"))}),FA.get());fA()[MA]=function(){fA().clearTimeout(a),delete fA()[MA];var o=fA().grecaptcha;if(o&&sE(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(kE(e,"internal-error"))},BI("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Pa({onload:MA,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(kE(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=fA().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var jA=function(){function e(){Ft(this,e)}return jt(e,[{key:"load",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new DA(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),VA="recaptcha",zA={theme:"light",type:"image"},BA=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},zA);Ft(this,e),this.parameters=r,this.type=VA,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=VI(t),this.isInvisible="invisible"===this.parameters.size,xE("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof n?document.getElementById(n):n;xE(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jA:new UA,this.validateStartingState()}return jt(e,[{key:"verify",value:function(){var e=hr(lr().mark((function e(){var t,n,r,i=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){xE(!this.parameters.sitekey,this.auth,"argument-error"),xE(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),xE("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=fA()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){xE(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=hr(lr().mark((function e(){var t,n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xE(TE()&&!dA(),this.auth,"internal-error"),e.next=3,qA();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,KE(this.auth);case 8:xE(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return xE(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function qA(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var KA=function(){function e(t,n){Ft(this,e),this.verificationId=t,this.onConfirmation=n}return jt(e,[{key:"confirm",value:function(e){var t=AT._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function GA(){return GA=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=VI(t),e.next=3,$A(i,n,Fa(r));case 3:return a=e.sent,e.abrupt("return",new KA(a,(function(e){return aC(i,e)})));case 5:case"end":return e.stop()}}),e)}))),GA.apply(this,arguments)}function WA(e,t,n){return HA.apply(this,arguments)}function HA(){return(HA=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fa(t),e.next=3,ZT(!1,i,"phone");case 3:return e.next=5,$A(i.auth,n,Fa(r));case 5:return a=e.sent,e.abrupt("return",new KA(a,(function(e){return uC(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function QA(){return(QA=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fa(t),e.next=3,$A(i.auth,n,Fa(r));case 3:return a=e.sent,e.abrupt("return",new KA(a,(function(e){return cC(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $A(e,t,n){return YA.apply(this,arguments)}function YA(){return YA=hr(lr().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,xE("string"===typeof a,t,"argument-error"),xE(r.type===VA,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return xE("enroll"===u.type,t,"internal-error"),e.next=13,$C(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return xE("signin"===u.type,t,"internal-error"),xE(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,PA(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,xT(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),YA.apply(this,arguments)}function JA(){return(JA=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JT(Fa(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var XA=function(){function e(t){Ft(this,e),this.providerId=e.PROVIDER_ID,this.auth=VI(t)}return jt(e,[{key:"verifyPhoneNumber",value:function(e,t){return $A(this.auth,e,Fa(t))}}],[{key:"credential",value:function(e,t){return AT._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?AT._fromTokenResponse(n,r):null}}]),e}();function ZA(e,t){return t?kI(t):(xE(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}XA.PROVIDER_ID="phone",XA.PHONE_SIGN_IN_METHOD="phone";var eN=function(e){zt(n,e);var t=Gt(n);function n(e){var r;return Ft(this,n),(r=t.call(this,"custom","custom")).params=e,r}return jt(n,[{key:"_getIdTokenResponse",value:function(e){return bT(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return bT(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return bT(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(YI);function tN(e){return rC(e.auth,new eN(e),e.bypassAuthState)}function nN(e){var t=e.auth,n=e.user;return xE(n,t,"internal-error"),tC(n,new eN(e),e.bypassAuthState)}function rN(e){return iN.apply(this,arguments)}function iN(){return iN=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,xE(r=t.user,n,"internal-error"),e.abrupt("return",JT(r,new eN(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),iN.apply(this,arguments)}var aN=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Ft(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return jt(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=hr(lr().mark((function t(n,r){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=hr(lr().mark((function e(t){var n,r,i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tN;case"linkViaPopup":case"linkViaRedirect":return rN;case"reauthViaPopup":case"reauthViaRedirect":return nN;default:gE(this.auth,"internal-error")}}},{key:"resolve",value:function(e){EE(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){EE(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),oN=new AE(2e3,1e4);function uN(e,t,n){return sN.apply(this,arguments)}function sN(){return sN=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=VI(t),wE(t,n,OT),a=ZA(i,r),o=new hN(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),sN.apply(this,arguments)}function cN(){return(cN=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wE((i=Fa(t)).auth,n,OT),a=ZA(i.auth,r),o=new hN(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lN(e,t,n){return fN.apply(this,arguments)}function fN(){return(fN=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wE((i=Fa(t)).auth,n,OT),a=ZA(i.auth,r),o=new hN(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hN=function(e){zt(n,e);var t=Gt(n);function n(e,r,i,a,o){var u;return Ft(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Kt(u),u}return jt(n,[{key:"executeNotNull",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return xE(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=hr(lr().mark((function e(){var t,n=this;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return EE(1===this.filter.length,"Popup operations only handle one event"),t=cA(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(kE(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(kE(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(kE(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,oN.get())}()}}]),n}(aN);hN.currentPopupAction=null;var dN="pendingRedirect",pN=new Map,vN=function(e){zt(n,e);var t=Gt(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ft(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return jt(n,[{key:"execute",value:function(){var e=hr(lr().mark((function e(){var t,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=pN.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,mN(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,hu(Bt(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:pN.set(this.auth._key(),t);case 21:return this.bypassAuthState||pN.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=hr(lr().mark((function e(t){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",hu(Bt(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",hu(Bt(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(aN);function mN(e,t){return yN.apply(this,arguments)}function yN(){return yN=hr(lr().mark((function e(t,n){var r,i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_N(n),i=wN(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),yN.apply(this,arguments)}function gN(e,t){return kN.apply(this,arguments)}function kN(){return kN=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wN(t)._set(_N(n),"true"));case 1:case"end":return e.stop()}}),e)}))),kN.apply(this,arguments)}function bN(e,t){pN.set(e._key(),t)}function wN(e){return kI(e._redirectPersistence)}function _N(e){return _I(dN,e.config.apiKey,e.name)}function xN(e,t,n){return function(e,t,n){return SN.apply(this,arguments)}(e,t,n)}function SN(){return SN=hr(lr().mark((function e(t,n,r){var i,a;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=VI(t),wE(t,n,OT),e.next=4,i._initializationPromise;case 4:return a=ZA(i,r),e.next=7,gN(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),SN.apply(this,arguments)}function EN(e,t,n){return function(e,t,n){return IN.apply(this,arguments)}(e,t,n)}function IN(){return(IN=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wE((i=Fa(t)).auth,n,OT),e.next=4,i.auth._initializationPromise;case 4:return a=ZA(i.auth,r),e.next=7,gN(a,i.auth);case 7:return e.next=9,RN(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function TN(e,t,n){return function(e,t,n){return CN.apply(this,arguments)}(e,t,n)}function CN(){return(CN=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wE((i=Fa(t)).auth,n,OT),e.next=4,i.auth._initializationPromise;case 4:return a=ZA(i.auth,r),e.next=7,ZT(!1,i,n.providerId);case 7:return e.next=9,gN(a,i.auth);case 9:return e.next=11,RN(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AN(e,t){return NN.apply(this,arguments)}function NN(){return NN=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VI(t)._initializationPromise;case 2:return e.abrupt("return",PN(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),NN.apply(this,arguments)}function PN(e,t){return ON.apply(this,arguments)}function ON(){return ON=hr(lr().mark((function e(t,n){var r,i,a,o,u,s=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=VI(t),a=ZA(i,n),o=new vN(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),ON.apply(this,arguments)}function RN(e){return DN.apply(this,arguments)}function DN(){return(DN=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cA("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var LN=function(){function e(t){Ft(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return jt(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FN(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!FN(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(kE(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(MN(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(MN(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function MN(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function FN(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function UN(e){return jN.apply(this,arguments)}function jN(){return jN=hr(lr().mark((function e(t){var n,r=arguments;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",LE(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),jN.apply(this,arguments)}var VN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zN=/^https?/;function BN(){return BN=hr(lr().mark((function e(t){var n,r,i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,UN(t);case 4:n=e.sent,r=n.authorizedDomains,i=$t(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!qN(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:gE(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),BN.apply(this,arguments)}function qN(e){var t=IE(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!zN.test(r))return!1;if(VN.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var KN=new AE(3e4,6e4);function GN(){var e=fA().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Mt(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var WN=null;function HN(e){return WN=WN||function(e){return new Promise((function(t,n){var r,i,a;function o(){GN(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){GN(),n(kE(e,"network-request-failed"))},timeout:KN.get()})}if(null===(i=null===(r=fA().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=fA().gapi)||void 0===a?void 0:a.load)){var u=qI("iframefcb");return fA()[u]=function(){gapi.load?o():n(kE(e,"network-request-failed"))},BI("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw WN=null,e}))}(e),WN}var QN=new AE(5e3,15e3),$N="__/auth/iframe",YN="emulator/auth/iframe",JN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZN(e){var t=e.config;xE(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?NE(t,YN):"https://".concat(e.config.authDomain,"/").concat($N),r={apiKey:t.apiKey,appName:e.name,v:Ro},i=XN.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Pa(r).slice(1))}function eP(e){return tP.apply(this,arguments)}function tP(){return tP=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,HN(t);case 2:return n=e.sent,xE(r=fA().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ZN(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JN,dontclear:!0},(function(e){return new Promise(function(){var n=hr(lr().mark((function n(r,i){var a,o,u;return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){fA().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=kE(t,"network-request-failed"),o=fA().setTimeout((function(){i(a)}),QN.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),tP.apply(this,arguments)}var nP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rP=function(){function e(t){Ft(this,e),this.window=t,this.associatedEvent=null}return jt(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function iP(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},nP),{width:r.toString(),height:i.toString(),top:a,left:o}),c=ga().toLowerCase();n&&(u=TI(c)?"_blank":n),EI(c)&&(t=t||"http://localhost",s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=Dt(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return OI(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new rP(null);var f=window.open(t||"",u,l);xE(f,e,"popup-blocked");try{f.focus()}catch(h){}return new rP(f)}var aP="__/auth/handler",oP="emulator/auth/handler",uP=encodeURIComponent("fac");function sP(e,t,n,r,i,a){return cP.apply(this,arguments)}function cP(){return cP=hr(lr().mark((function e(t,n,r,i,a,o){var u,s,c,l,f,h,d,p,v,m,y,g,k;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xE(t.config.authDomain,t,"auth-domain-config-required"),xE(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Ro,eventId:a},n instanceof OT)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",Ca(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),s=0,c=Object.entries(o||{});s<c.length;s++)l=Dt(c[s],2),f=l[0],h=l[1],u[f]=h;for(n instanceof RT&&(d=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=d.join(",")),t.tenantId&&(u.tid=t.tenantId),p=u,v=0,m=Object.keys(p);v<m.length;v++)y=m[v],void 0===p[y]&&delete p[y];return e.next=10,t._getAppCheckToken();case 10:return g=e.sent,k=g?"#".concat(uP,"=").concat(encodeURIComponent(g)):"",e.abrupt("return","".concat(lP(t),"?").concat(Pa(p).slice(1)).concat(k));case 13:case"end":return e.stop()}}),e)}))),cP.apply(this,arguments)}function lP(e){var t=e.config;return t.emulator?NE(t,oP):"https://".concat(t.authDomain,"/").concat(aP)}var fP="webStorageSupport",hP=function(){function e(){Ft(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oA,this._completeRedirectFn=PN,this._overrideRedirectResult=bN}return jt(e,[{key:"_openPopup",value:function(){var e=hr(lr().mark((function e(t,n,r,i){var a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return EE(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,sP(t,n,r,IE(),i);case 3:return o=e.sent,e.abrupt("return",iP(t,o,cA()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=hr(lr().mark((function e(t,n,r,i){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,sP(t,n,r,IE(),i);case 4:return hA(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(EE(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eP(t);case 2:return n=e.sent,r=new LN(t),n.register("authEvent",(function(e){return xE(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(fP,{type:fP},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[fP];void 0!==i&&t(!!i),gE(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return BN.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return RI()||II()||OI()}}]),e}(),dP=hP,pP=function(){function e(t){Ft(this,e),this.factorId=t}return jt(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return SE("unexpected MultiFactorSessionType")}}}]),e}(),vP=function(e){zt(n,e);var t=Gt(n);function n(e){var r;return Ft(this,n),(r=t.call(this,"phone")).credential=e,r}return jt(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return LE(e,"POST","/v2/accounts/mfaEnrollment:finalize",DE(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return LE(e,"POST","/v2/accounts/mfaSignIn:finalize",DE(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(pP),mP=function(){function e(){Ft(this,e)}return jt(e,null,[{key:"assertion",value:function(e){return vP._fromCredential(e)}}]),e}();mP.FACTOR_ID="phone";var yP=function(){function e(){Ft(this,e)}return jt(e,null,[{key:"assertionForEnrollment",value:function(e,t){return gP._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return gP._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=hr(lr().mark((function e(t){var n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xE("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,YC(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});case 4:return i=e.sent,e.abrupt("return",kP._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();yP.FACTOR_ID="totp";var gP=function(e){zt(n,e);var t=Gt(n);function n(e,r,i){var a;return Ft(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return jt(n,[{key:"_finalizeEnroll",value:function(){var e=hr(lr().mark((function e(t,n,r){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xE("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",JC(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xE(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",OA(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(pP),kP=function(){function e(t,n,r,i,a,o,u){Ft(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return jt(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(bP(e)||bP(t))&&(r=!0),r&&(bP(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),bP(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function bP(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var wP="@firebase/auth",_P="1.3.0",xP=function(){function e(t){Ft(this,e),this.auth=t,this.internalListeners=new Map}return jt(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){xE(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var SP;!function(e){var t;null===(t=va())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function EP(){return window}SP="Browser",Io(new Ua("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;xE(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:SP,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DI(SP)},l=new jI(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(kI);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Io(new Ua("auth-internal",(function(e){return function(e){return new xP(e)}(VI(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),jo(wP,_P,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(SP)),jo(wP,_P,"esm2017");var IP=2e3;function TP(e,t,n){return CP.apply(this,arguments)}function CP(){return CP=hr(lr().mark((function e(t,n,r){var i,a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=EP(),o=a.BuildInfo,EE(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,DP(n.sessionId);case 4:return u=e.sent,s={},OI()?s.ibi=o.packageName:AI()?s.apn=o.packageName:gE(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",sP(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),CP.apply(this,arguments)}function AP(){return AP=hr(lr().mark((function e(t){var n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=EP(),r=n.BuildInfo,i={},OI()?i.iosBundleId=r.packageName:AI()?i.androidPackageName=r.packageName:gE(t,"operation-not-supported-in-this-environment"),e.next=5,UN(t,i);case 5:case"end":return e.stop()}}),e)}))),AP.apply(this,arguments)}function NP(e){var t=EP().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function PP(e,t,n){return OP.apply(this,arguments)}function OP(){return OP=hr(lr().mark((function e(t,n,r){var i,a,o;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=EP(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(kE(t,"redirect-cancelled-by-user"))}),IP))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),AI()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),OP.apply(this,arguments)}function RP(e){var t,n,r,i,a,o,u,s,c,l,f=EP();xE("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),xE("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),xE("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),xE("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),xE("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function DP(e){return LP.apply(this,arguments)}function LP(){return(LP=hr(lr().mark((function e(t){var n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=MP(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function MP(e){if(EE(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var FP=20,UP=function(e){zt(n,e);var t=Gt(n);function n(){var e;return Ft(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return jt(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),hu(Bt(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(LN);function jP(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:KP(),postBody:null,tenantId:e.tenantId,error:kE(e,"no-auth-event")}}function VP(e,t){return GP()._set(WP(e),t)}function zP(e){return BP.apply(this,arguments)}function BP(){return BP=hr(lr().mark((function e(t){var n;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GP()._get(WP(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,GP()._remove(WP(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),BP.apply(this,arguments)}function qP(e,t){var n,r,i=function(e){var t=HP(e),n=t.link?decodeURIComponent(t.link):void 0,r=HP(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return HP(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=HP(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?kE(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function KP(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<FP;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function GP(){return kI(iA)}function WP(e){return _I("authEvent",e.config.apiKey,e.name)}function HP(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=Qt(e.split("?"));t[0];return Oa(t.slice(1).join("?"))}var QP=function(){function e(){Ft(this,e),this._redirectPersistence=oA,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=PN,this._overrideRedirectResult=bN}return jt(e,[{key:"_initialize",value:function(){var e=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new UP(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){gE(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=hr(lr().mark((function e(t,n,r,i){var a,o,u,s;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return RP(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),pN.clear(),e.next=10,this._originValidation(t);case 10:return o=jP(t,r,i),e.next=13,VP(t,o);case 13:return e.next=15,TP(t,o,n);case 15:return u=e.sent,e.next=18,NP(u);case 18:return s=e.sent,e.abrupt("return",PP(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return AP.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=EP(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(hr(lr().mark((function n(){return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,zP(e);case 2:t.onEvent(YP());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=hr(lr().mark((function n(r){var i,a;return lr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,zP(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=qP(i,r.url)),t.onEvent(a||YP());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");EP().handleOpenURL=function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),$P=QP;function YP(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:kE("no-auth-event")}}var JP=1e3;function XP(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ZP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga();return!("file:"!==XP()&&"ionic:"!==XP()&&"capacitor:"!==XP()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function eO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga();return _a()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga();return/Edge\/\d+/.test(e)}(e)}function tO(){try{var e=self.localStorage,t=cA();if(e)return e.setItem(t,"1"),e.removeItem(t),!eO()||xa()}catch(n){return nO()&&xa()}return!1}function nO(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function rO(){return("http:"===XP()||"https:"===XP()||ba()||ZP())&&!(wa()||ka())&&tO()&&!nO()}function iO(){return ZP()&&"undefined"!==typeof document}function aO(){return oO.apply(this,arguments)}function oO(){return(oO=hr(lr().mark((function e(){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(iO()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),JP);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var uO={LOCAL:"local",NONE:"none",SESSION:"session"},sO=xE,cO="persistence";function lO(e,t){sO(Object.values(uO).includes(t),e,"invalid-persistence-type"),wa()?sO(t!==uO.SESSION,e,"unsupported-persistence-type"):ka()?sO(t===uO.NONE,e,"unsupported-persistence-type"):nO()?sO(t===uO.NONE||t===uO.LOCAL&&xa(),e,"unsupported-persistence-type"):sO(t===uO.NONE||tO(),e,"unsupported-persistence-type")}function fO(e){return hO.apply(this,arguments)}function hO(){return hO=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=dO(),r=_I(cO,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),hO.apply(this,arguments)}function dO(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var pO=xE,vO=function(){function e(){Ft(this,e),this.browserResolver=kI(dP),this.cordovaResolver=kI($P),this.underlyingResolver=null,this._redirectPersistence=oA,this._completeRedirectFn=PN,this._overrideRedirectResult=bN}return jt(e,[{key:"_initialize",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=hr(lr().mark((function e(t,n,r,i){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=hr(lr().mark((function e(t,n,r,i){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return iO()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return pO(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,aO();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function mO(e){return e.unwrap()}function yO(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new _O(e,function(e,t){var n,r=Fa(e),i=t;return xE(t.customData.operationType,r,"argument-error"),xE(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),QC._fromError(r,i)}(e,t));else if(r){var i=gO(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function gO(e){var t=(e instanceof Sa?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Sa)&&"temporaryProof"in t&&"phoneNumber"in t)return XA.credentialFromResult(e);var n,r=t.providerId;if(!r||r===tE.PASSWORD)return null;switch(r){case tE.GOOGLE:n=MT;break;case tE.FACEBOOK:n=LT;break;case tE.GITHUB:n=FT;break;case tE.TWITTER:n=VT;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?UT._create(r,u):_T._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new DT(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Sa?n.credentialFromError(e):n.credentialFromResult(e)}function kO(e,t){return t.catch((function(t){throw t instanceof Sa&&yO(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,gO(t)),additionalUserInfo:WC(e),user:xO.getOrCreate(r)}}))}function bO(e,t){return wO.apply(this,arguments)}function wO(){return wO=hr(lr().mark((function e(t,n){var r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return kO(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),wO.apply(this,arguments)}var _O=function(){function e(t,n){Ft(this,e),this.resolver=n,this.auth=t.wrapped()}return jt(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return kO(mO(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),xO=function(){function e(t){Ft(this,e),this._delegate=t,this.multiFactor=function(e){var t=Fa(e);return eA.has(t)||eA.set(t,ZC._fromUser(t)),eA.get(t)}(t)}return jt(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kO(this.auth,uC(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bO(this.auth,WA(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kO(this.auth,lN(this._delegate,t,vO)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fO(VI(this.auth));case 2:return e.abrupt("return",TN(this._delegate,t,vO));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kO(this.auth,cC(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return bO(this.auth,function(e,t,n){return QA.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return kO(this.auth,function(e,t,n){return cN.apply(this,arguments)}(this._delegate,e,vO))}},{key:"reauthenticateWithRedirect",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fO(VI(this.auth));case 2:return e.abrupt("return",EN(this._delegate,t,vO));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return RC.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$T(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return UC(Fa(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return UC(Fa(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return JA.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return FC.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return DC.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();xO.USER_MAP=new WeakMap;var SO=xE,EO=function(){function e(t,n){if(Ft(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;SO(r,"invalid-api-key",{appName:t.name}),SO(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?vO:void 0;this._delegate=n.initialize({options:{persistence:TO(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(hE),this.linkUnderlyingAuth()}return jt(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?xO.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){HI(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return _C.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return xC(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return wC.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=hr(lr().mark((function e(t,n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kO(this._delegate,IC(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return OC.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=NT.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=hr(lr().mark((function e(){var t;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return SO(rO(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,AN(this._delegate,vO);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",kO(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){VI(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=IO(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=IO(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return CC.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return bC.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=hr(lr().mark((function e(t){var n,r;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lO(this._delegate,t),e.t0=t,e.next=e.t0===uO.SESSION?4:e.t0===uO.LOCAL?6:e.t0===uO.NONE?11:13;break;case 4:return n=oA,e.abrupt("break",14);case 6:return e.next=8,kI(NA)._isAvailable();case 8:return r=e.sent,n=r?NA:iA,e.abrupt("break",14);case 11:return n=wI,e.abrupt("break",14);case 13:return e.abrupt("return",gE("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return kO(this._delegate,function(e){return GT.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return kO(this._delegate,aC(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return kO(this._delegate,function(e,t){return dC.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return kO(this._delegate,function(e,t,n){return aC(Fa(e),PT.credential(t,n)).catch(function(){var t=hr(lr().mark((function t(n){return lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&gC(e),n;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return kO(this._delegate,function(e,t,n){return AC.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return bO(this._delegate,function(e,t,n){return GA.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return SO(rO(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",kO(this._delegate,uN(this._delegate,t,vO)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return SO(rO(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,fO(this._delegate);case 3:return e.abrupt("return",xN(this._delegate,t,vO));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return EC.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function IO(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&xO.getOrCreate(e))},error:t,complete:n}}function TO(e,t){var n=function(e,t){var n=dO();if(!n)return[];var r=_I(cO,e,t);switch(n.getItem(r)){case uO.NONE:return[wI];case uO.LOCAL:return[NA,oA];case uO.SESSION:return[oA];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(NA)||n.push(NA),"undefined"!==typeof window)for(var r=0,i=[iA,oA];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(wI)||n.push(wI),n}EO.Persistence=uO;var CO=function(){function e(){Ft(this,e),this.providerId="phone",this._delegate=new XA(mO(fu.auth()))}return jt(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return XA.credential(e,t)}}]),e}();CO.PHONE_SIGN_IN_METHOD=XA.PHONE_SIGN_IN_METHOD,CO.PROVIDER_ID=XA.PROVIDER_ID;var AO=xE,NO=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fu.app();Ft(this,e),AO(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new BA(i.auth(),t,n),this.type=this._delegate.type}return jt(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Ua("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new EO(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:nE,PASSWORD_RESET:rE,RECOVER_EMAIL:iE,REVERT_SECOND_FACTOR_ADDITION:aE,VERIFY_AND_CHANGE_EMAIL:oE,VERIFY_EMAIL:uE}},EmailAuthProvider:PT,FacebookAuthProvider:LT,GithubAuthProvider:FT,GoogleAuthProvider:MT,OAuthProvider:DT,SAMLAuthProvider:jT,PhoneAuthProvider:CO,PhoneMultiFactorGenerator:mP,RecaptchaVerifier:NO,TwitterAuthProvider:VT,Auth:EO,AuthCredential:YI,Error:Sa}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.4.6")}(fu);var PO=fu.initializeApp({apiKey:"AIzaSyCyvuJtIYRITJuhyn4Hm74skWiyKeXNsv8",authDomain:"netflix-clone-a13bf.firebaseapp.com",projectId:"netflix-clone-a13bf",storageBucket:"netflix-clone-a13bf.appspot.com",messagingSenderId:"617588135236",appId:"1:617588135236:web:3c6d1ec760310e7739f311"}).firestore(),OO=fu.auth(),RO=PO;var DO=function(){var e=(0,t.useRef)(null),n=(0,t.useRef)(null);return(0,sr.jsx)("div",{className:"signupScreen",children:(0,sr.jsxs)("form",{children:[(0,sr.jsx)("h1",{children:"Sign In"}),(0,sr.jsx)("input",{ref:e,type:"email",placeholder:"Email"}),(0,sr.jsx)("input",{ref:n,placeholder:"Password",type:"password"}),(0,sr.jsx)("button",{type:"submit",onClick:function(t){t.preventDefault(),OO.signInWithEmailAndPassword(e.current.value,n.current.value).then((function(e){console.log(e)})).catch((function(e){return alert(e.message)}))},children:"Sign In"}),(0,sr.jsxs)("h4",{children:[(0,sr.jsx)("span",{className:"signupScreen__gray",children:"New to Netflix? "}),(0,sr.jsx)("span",{className:"signupScreen__link",onClick:function(t){t.preventDefault(),OO.createUserWithEmailAndPassword(e.current.value,n.current.value).then((function(e){console.log(e)})).catch((function(e){alert(e.message)}))},children:"Sign Up now."})]})]})})};var LO=function(){var e=Dt((0,t.useState)(!1),2),n=e[0],r=e[1];return(0,sr.jsxs)("div",{className:"loginScreen",children:[(0,sr.jsxs)("div",{className:"loginScreen__background",children:[(0,sr.jsx)("img",{className:"loginScreen__logo",src:"https://th.bing.com/th/id/R.a1f673e7df715f16dae49f4874009082?rik=1oW0xBGxcarNqw&pid=ImgRaw&r=0",alt:""}),(0,sr.jsx)("button",{onClick:function(){return r(!0)},className:"loginScreen__button",children:"Sign In"}),(0,sr.jsx)("div",{className:"loginScreen__gradient"})]}),(0,sr.jsx)("div",{className:"loginScreen__body",children:n?(0,sr.jsx)(DO,{}):(0,sr.jsxs)(sr.Fragment,{children:[(0,sr.jsx)("h1",{children:"Unlimited films, TV programmes and more."}),(0,sr.jsx)("h2",{children:"Watch anywhere. Cancel at any time."}),(0,sr.jsx)("h3",{children:"Ready to watch? Enter your email to create or restart your membership."}),(0,sr.jsx)("div",{className:"loginScreen__input",children:(0,sr.jsxs)("form",{children:[(0,sr.jsx)("input",{type:"email",placeholder:"Email Address"}),(0,sr.jsx)("button",{onClick:function(){return r(!0)},className:"loginScreen__getStarted",children:"GET STARTED"})]})})]})})]})},MO="https://js.stripe.com/v3",FO=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,UO="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",jO=null,VO=function(e){return null!==jO||(jO=new Promise((function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(UO),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(MO,'"]')),t=0;t<e.length;t++){var n=e[t];if(FO.test(n.src))return n}return null}();r&&e?console.warn(UO):r||(r=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(MO).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n}(e)),r.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(i){return void n(i)}else t(null)}))),jO},zO=Promise.resolve().then((function(){return VO(null)})),BO=!1;zO.catch((function(e){BO||console.warn(e)}));var qO=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];BO=!0;var r=Date.now();return zO.then((function(e){return function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"2.1.7",startTime:t})}(r,n),r}(e,t,r)}))};var KO=function(){var e=Dt((0,t.useState)([]),2),n=e[0],r=e[1],i=_(Ct),a=Dt((0,t.useState)(null),2),o=a[0],u=a[1];(0,t.useEffect)((function(){RO.collection("customers").doc(i.uid).collection("subscriptions").get().then((function(e){e.forEach(function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u({role:t.data().role,current_period_end:t.data().current_period_end.seconds,current_period_start:t.data().current_period_start});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[i.uid]),(0,t.useEffect)((function(){RO.collection("products").where("active","==",!0).get().then((function(e){var t={};e.forEach(function(){var e=hr(lr().mark((function e(n){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t[n.id]=n.data(),e.next=3,n.ref.collection("prices").get();case 3:e.sent.docs.forEach((function(e){t[n.id].prices={priceId:e.id,priceData:e.data()}}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r(t)}))}),[]),console.log(n),console.log(o);var s=function(){var e=hr(lr().mark((function e(t){return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RO.collection("customers").doc(i.uid).collection("checkout_sessions").add({price:t,success_url:window.location.origin,cancel_url:window.location.origin});case 2:e.sent.onSnapshot(function(){var e=hr(lr().mark((function e(t){var n,r,i;return lr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data(),r=n.error,i=n.sessionId,r&&alert("An error occurred: ".concat(r.message)),!i){e.next=7;break}return e.next=5,qO("pk_test_51O0oDdK4ktPy7y3hOQGRtgVCNMmDbA1uhZmUXYxx72xPSYjQIaHsfY3dqFhwj7fEVlssQvRWOKzqocvgzBdIRUGO001Lgzrq5p");case 5:e.sent.redirectToCheckout({sessionId:i});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,sr.jsxs)("div",{className:"planScreen",children:[(0,sr.jsx)("br",{}),o&&(0,sr.jsxs)("p",{children:["Renewal date : ",new Date(1e3*(null===o||void 0===o?void 0:o.current_period_end)).toLocaleDateString()]}),Object.entries(n).map((function(e){var t,n=Dt(e,2),r=n[0],i=n[1],a=null===(t=i.name)||void 0===t?void 0:t.toLowerCase().includes(null===o||void 0===o?void 0:o.role);return(0,sr.jsxs)("div",{className:"".concat(a&&"planScreen__plan--disabled","\n                planScreen__plan"),children:[(0,sr.jsxs)("div",{className:"planScreen__info",children:[(0,sr.jsx)("h5",{children:i.name}),(0,sr.jsx)("h6",{children:i.description})]}),(0,sr.jsx)("button",{onClick:function(){return!a&&s(i.prices.priceId)},children:a?"Current Package":"Subscribe"})]},r)}))]})};var GO=function(){var e=_(Ct);return(0,sr.jsxs)("div",{className:"profileScreen",children:[(0,sr.jsx)(cr,{}),(0,sr.jsxs)("div",{className:"profileScreen__body",children:[(0,sr.jsx)("h1",{children:"Edit Profile"}),(0,sr.jsxs)("div",{className:"profileScreen__info",children:[(0,sr.jsx)("img",{src:"https://wallpapers.com/images/hd/netflix-profile-pictures-5yup5hd2i60x7ew3.jpg",alt:""}),(0,sr.jsxs)("div",{className:"profileScreen__details",children:[(0,sr.jsx)("h2",{children:e.email}),(0,sr.jsxs)("div",{className:"profileScreen__plans",children:[(0,sr.jsx)("h3",{children:"Plans"}),(0,sr.jsx)(KO,{}),(0,sr.jsx)("button",{onClick:function(){return OO.signOut()},className:"profileScreen__signOut",children:"Sign Out"})]})]})]})]})]})};var WO=function(){var e=_(Ct),n=P();return(0,t.useEffect)((function(){var e=OO.onAuthStateChanged((function(e){n(e?It({uid:e.uid,email:e.email}):Tt())}));return function(){e()}}),[n]),(0,sr.jsx)("div",{className:"app",children:(0,sr.jsx)(aa,{children:e?(0,sr.jsxs)(ir,{children:[(0,sr.jsx)(nr,{path:"/profile",element:(0,sr.jsx)(GO,{})}),(0,sr.jsx)(nr,{exact:!0,path:"/",element:(0,sr.jsx)(ra,{})})]}):(0,sr.jsx)(LO,{})})})},HO=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},QO=document.getElementById("root");(0,i.s)(QO).render((0,sr.jsx)(t.StrictMode,{children:(0,sr.jsx)(I,{store:At,children:(0,sr.jsx)(WO,{})})})),HO()}()}();
//# sourceMappingURL=main.1fb56103.js.map